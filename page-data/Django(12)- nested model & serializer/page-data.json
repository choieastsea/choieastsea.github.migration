{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/Django(12)- nested model & serializer/",
    "result": {"data":{"cur":{"id":"d26a1107-cacb-5c12-bb01-14391a2df0aa","html":"<p>ì €ë²ˆê¹Œì§€ Item ëª¨ë¸ê³¼ ì—°ê´€ëœ Questionê³¼ Answer ëª¨ë¸ì„ êµ¬í˜„í•´ë³´ì•˜ë‹¤. ì§ˆë¬¸ì„ ë‚¨ê¸´ ì‚¬ëŒë§Œ í•´ë‹¹ ì§ˆë¬¸ì„ ë³€ê²½í•  ìˆ˜ ìˆê³ , ë‹µë³€ì€ ê´€ë¦¬ì í˜ì´ì§€ë¥¼ í†µí•´ì„œë§Œ ë‹¬ ìˆ˜ ìˆë‹¤.</p>\n<p>ì˜¤ëŠ˜ì€ ì‡¼í•‘ëª°ì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ ì‚¬ìš©ìê°€ ë¬¼ê±´ì„ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê³ , êµ¬ë§¤í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³´ë„ë¡ í•˜ì.</p>\n<h2 id=\"ì¥ë°”êµ¬ë‹ˆcart-ëª¨ë¸-ë§Œë“¤ê¸°\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EB%B0%94%EA%B5%AC%EB%8B%88cart-%EB%AA%A8%EB%8D%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"ì¥ë°”êµ¬ë‹ˆcart ëª¨ë¸ ë§Œë“¤ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¥ë°”êµ¬ë‹ˆ(Cart) ëª¨ë¸ ë§Œë“¤ê¸°</h2>\n<p>ì¥ë°”êµ¬ë‹ˆì— ëŒ€í•œ ìš”êµ¬ì‚¬í•­ì„ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ì. ì¥ë°”êµ¬ë‹ˆëŠ” User modelê³¼ Item modelì„ <code class=\"language-text\">N:M</code>ìœ¼ë¡œ ì—°ê²°í•´ì£¼ëŠ” í…Œì´ë¸”ì´ë¯€ë¡œ, ë³„ë„ì˜ ëª¨ë¸ë¡œ ì‘ì„±í•˜ë„ë¡ í•œë‹¤. <code class=\"language-text\">python manage.py startapp cart</code>ë¡œ ì¥ë°”êµ¬ë‹ˆ ì•±ì„ ë§Œë“¤ì.</p>\n<ul>\n<li>ì‚¬ìš©ì</li>\n<li>ë¬¼ê±´(item) &#x26; ë¬¼ê±´ì˜ í˜„ì¬ ê°€ê²©</li>\n<li>ìˆ˜ëŸ‰</li>\n<li>ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€/ì—…ë°ì´íŠ¸ ì‹œì (ì¶”ê°€, ìˆ˜ì • ë“±ìœ¼ë¡œ 7ì¼ ì§€ë‚˜ë©´ ì¥ë°”êµ¬ë‹ˆ ì‚­ì œë˜ë„ë¡ í•  ìˆ˜ ìˆì„ ê²ƒ)</li>\n</ul>\n<p>ìœ„ì˜ ìš”êµ¬ì‚¬í•­ì„ <code class=\"language-text\">cart/models.py</code>ì— êµ¬í˜„í•´ë³´ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Cart</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    user <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>settings<span class=\"token punctuation\">.</span>AUTH_USER_MODEL<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ì‚¬ìš©ì'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># ì‚¬ìš©ì ì‚­ì œë˜ë©´ ì¥ë°”êµ¬ë‹ˆë„ ì‚­ì œë˜ë„ë¡</span>\n    item <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Item<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ìƒí’ˆ'</span><span class=\"token punctuation\">)</span>\n    amount <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>PositiveIntegerField<span class=\"token punctuation\">(</span>verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ìˆ˜ëŸ‰'</span><span class=\"token punctuation\">,</span> default<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    date_created <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span>verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ìµœì¢… ìˆ˜ì • ì¼ì'</span><span class=\"token punctuation\">,</span> auto_now<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># ì¶”ê°€ë˜ê±°ë‚˜, ìˆ˜ì •ë˜ë©´ updateë˜ë„ë¡ í•¨</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        db_table <span class=\"token operator\">=</span> <span class=\"token string\">'cart'</span>\n        verbose_name <span class=\"token operator\">=</span> <span class=\"token string\">'ì¥ë°”êµ¬ë‹ˆ ë¬¼ê±´'</span>\n        verbose_name_plural <span class=\"token operator\">=</span> <span class=\"token string\">'ì¥ë°”êµ¬ë‹ˆ ë¬¼ê±´ë“¤'</span></code></pre></div>\n<p>ë‹¤ìŒìœ¼ë¡œëŠ”, serializerë¥¼ êµ¬í˜„í•œë‹¤. serializerì—ì„œëŠ” ì•„ë˜ì˜ ë‘ê°€ì§€ í•„ë“œê°€ ì¶”ê°€ë˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>\n<ul>\n<li>ì´ ê¸ˆì•¡</li>\n<li>ì£¼ë¬¸ì´ ê°€ëŠ¥í•œì§€ ì—¬ë¶€(í’ˆì ˆì´ ë˜ë©´ ì£¼ë¬¸ì´ ë¶ˆê°€ëŠ¥)</li>\n</ul>\n<p>ì‚¬ìš©ìì—ê²Œ í•´ë‹¹ í•„ë“œë¥¼ ì œê³µí•˜ë©´ì„œ, ë™ì‹œì— Createë‚˜ Update í• ë•ŒëŠ” í•„ìš” ì—†ìœ¼ë¯€ë¡œ <code class=\"language-text\">readonly</code>ë¡œ ì„ ì–¸í•˜ë„ë¡ í•œë‹¤. ì¶”ê°€ì ìœ¼ë¡œ, user ì •ë³´ ì—­ì‹œ <code class=\"language-text\">request.user</code>ë¡œë§Œ ë°›ê³ , <strong>bodyë¥¼ í†µí•˜ì—¬ ë³€ê²½ë˜ë©´ ì•ˆë˜ë¯€ë¡œ readonlyì—¬ì•¼í•œë‹¤</strong>.</p>\n<h3 id=\"serializermethodfield---set-value-in-serializers-field\" style=\"position:relative;\"><a href=\"#serializermethodfield---set-value-in-serializers-field\" aria-label=\"serializermethodfield   set value in serializers field permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SerializerMethodField - set value in serializerâ€™s field</h3>\n<p>ì´ ê¸ˆì•¡, ì£¼ë¬¸ ê°€ëŠ¥ ì—¬ë¶€ì™€ ê°™ì€ í•„ë“œëŠ” ì°¸ì¡°ë¥¼ í†µí•´ ë°”ë¡œ ì•Œì•„ë‚¼ ìˆ˜ ìˆëŠ” ê°’ì´ ì•„ë‹ˆë¯€ë¡œ, ë³„ë„ì˜ í•¨ìˆ˜ë¥¼ í†µí•˜ì—¬ ê°’ì„ ê°€ì ¸ì™€ì•¼ í•œë‹¤. ì´ëŠ” <code class=\"language-text\">SerializerMethodField</code>ë¡œ ì„ ì–¸í•´ì£¼ë©´ ëœë‹¤. <a href=\"https://www.django-rest-framework.org/api-guide/fields/#serializermethodfield\">ê³µì‹ë¬¸ì„œì°¸ê³ </a></p>\n<p>ì¸ìë¡œ <code class=\"language-text\">method_name</code> ì„ ëª…ì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ <code class=\"language-text\">get_{field_name}</code>ì˜ í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•˜ë©´ ë˜ê³ , ëª…ì‹œí•œë‹¤ë©´ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ë©´ í•´ë‹¹ í•¨ìˆ˜ë¥¼ í†µí•˜ì—¬ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤. í•´ë‹¹ í•¨ìˆ˜ëŠ” model instanceë¥¼ <code class=\"language-text\">obj</code>ì¸ìë¡œ ë°›ì•„ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</p>\n<p><code class=\"language-text\">cart/serializers.py</code>ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CartSerializer</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    user <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>source<span class=\"token operator\">=</span><span class=\"token string\">'user.username'</span><span class=\"token punctuation\">,</span> read_only<span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    total_price <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>SerializerMethodField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    is_available_now <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>SerializerMethodField<span class=\"token punctuation\">(</span>method_name<span class=\"token operator\">=</span><span class=\"token string\">'is_available'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_total_price</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ì´ ê¸ˆì•¡ ë¦¬í„´</span>\n        <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">.</span>item<span class=\"token punctuation\">.</span>price <span class=\"token operator\">*</span> obj<span class=\"token punctuation\">.</span>amount\n    \n    <span class=\"token keyword\">def</span> <span class=\"token function\">is_available</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># í˜„ì¬ ìˆ˜ëŸ‰ì´ ì£¼ë¬¸ ê°€ëŠ¥í•œì§€</span>\n        <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">.</span>item<span class=\"token punctuation\">.</span>stock_count <span class=\"token operator\">>=</span> obj<span class=\"token punctuation\">.</span>amount\n    \n    <span class=\"token keyword\">def</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> validated_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># user, itm_info ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´ ìˆ˜ëŸ‰ë§Œ ëˆ„ì í•˜ëŠ” update</span>\n        cart_exist <span class=\"token operator\">=</span> Cart<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>user<span class=\"token operator\">=</span>validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> item<span class=\"token operator\">=</span>validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'item'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> cart_exist<span class=\"token punctuation\">:</span>\n            validated_data<span class=\"token punctuation\">[</span><span class=\"token string\">'amount'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'amount'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> cart_exist<span class=\"token punctuation\">.</span>amount\n            <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>cart_exist<span class=\"token punctuation\">,</span> validated_data<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ create</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>validated_data<span class=\"token punctuation\">)</span>\n    \n    <span class=\"token comment\"># itemì„ ë³´ì—¬ì¤„ ë•Œ, idë§Œ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ì•„ë‹Œ, ì•ˆì˜ ë‚´ìš©ë“¤ì„ ItemCartSerializer í†µí•´ì„œ ë³´ì—¬ì£¼ë„ë¡ í•´ì•¼í•¨</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">to_representation</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        response <span class=\"token operator\">=</span> <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to_representation<span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">)</span>\n        response<span class=\"token punctuation\">[</span><span class=\"token string\">'item'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ItemCartSerializer<span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">.</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>data\n        <span class=\"token keyword\">return</span> response\n    \n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        model <span class=\"token operator\">=</span> Cart\n        fields <span class=\"token operator\">=</span> <span class=\"token string\">\"__all__\"</span></code></pre></div>\n<ul>\n<li>\n<p>SerializerMethodFieldë¥¼ ì´ìš©í•˜ë©´ <u>í•„ë“œë§ˆë‹¤ ë™ì ì¸ ë°ì´í„°ë¡œ ì²˜ë¦¬</u>í•´ì¤„ ìˆ˜ ìˆë‹¤. ë˜í•œ ì´ëŠ” <strong>í•­ìƒ</strong> <code class=\"language-text\">read_only</code> ì†ì„±ì´ë¯€ë¡œ, deserialize ê³¼ì •ì—ì„œëŠ” í•„ìš”ê°€ ì—†ë‹¤.</p>\n</li>\n<li>\n<p>serializerë¥¼ í†µí•´ì„œ Cart instanceë¥¼ createê°€ ë  ë•Œ, <strong>í•´ë‹¹ ì‚¬ìš©ìì—ê²Œ ì´ë¯¸ ìˆë˜ itemì´ë¼ë©´ <code class=\"language-text\">update</code>ê°€ ë˜ë„ë¡ í•´ì•¼í•œë‹¤!</strong> ë”°ë¼ì„œ create í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•´ì£¼ì—ˆë‹¤.</p>\n</li>\n<li>\n<p>ì´ì „ì— ì‚¬ìš©ìì˜ ì´ë¦„ì„ ë§ˆìŠ¤í‚¹í•˜ê¸° ìœ„í•´ <code class=\"language-text\">to_representation</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆì—ˆëŠ”ë°, ì—¬ê¸°ì„œëŠ” itemì— ëŒ€í•œ JSONì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì¶”ê°€ì ìœ¼ë¡œ, itemì€ <code class=\"language-text\">ItemCartSerializer</code>ì˜ dataë¡œ ê°€ì ¸ì˜¤ì§€ ì•Šìœ¼ë©´ item__idë§Œ ê°€ì ¸ì˜¤ë¯€ë¡œ ItemCartSerializerë¥¼ ì •ì˜í•˜ì—¬ ì¥ë°”êµ¬ë‹ˆì— ë‹´ì€ ì•„ì´í…œì˜ ì •ë³´ë“¤ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. serializerì˜ fieldë¡œ ItemCartSerializerë¥¼ ê°–ë„ë¡ í•˜ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ, ê·¸ë ‡ê²Œ í•˜ë©´ requestì— Item idë§Œì´ ì•„ë‹Œ Item model ê°ì²´ë¥¼ ì‹¤ì–´ì•¼ í•˜ë¯€ë¡œ ì´ ë°©ë²•ì´ ë” ì¢‹ì•„ ë³´ì¸ë‹¤.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ItemCartSerializer</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    item_id <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        model <span class=\"token operator\">=</span> Item\n        fields <span class=\"token operator\">=</span> <span class=\"token string\">\"__all__\"</span></code></pre></div>\n<p>ì´ì œ, ViewSetì„ ë§Œë“¤ì–´ë³´ì!</p>\n<h3 id=\"cartmodelviewset---ë©”ì†Œë“œì—-ë”°ë¼-ì˜¤ë²„ë¼ì´ë“œ\" style=\"position:relative;\"><a href=\"#cartmodelviewset---%EB%A9%94%EC%86%8C%EB%93%9C%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%98%A4%EB%B2%84%EB%9D%BC%EC%9D%B4%EB%93%9C\" aria-label=\"cartmodelviewset   ë©”ì†Œë“œì— ë”°ë¼ ì˜¤ë²„ë¼ì´ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CartModelViewSet - ë©”ì†Œë“œì— ë”°ë¼ ì˜¤ë²„ë¼ì´ë“œ</h3>\n<p>ìš”êµ¬ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ol>\n<li>\n<p>ì¥ë°”êµ¬ë‹ˆëŠ” <strong>ë³¸ì¸ì˜ ê²ƒë§Œ ë³´ì—¬ì£¼ë„ë¡</strong> í•´ì•¼í•œë‹¤.</p>\n</li>\n<li>\n<p>ë˜í•œ, ìˆ˜ì •ì— ìˆì–´ì„œ <strong>item ìì²´ëŠ” ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•˜ê³  <u>ìˆ˜ëŸ‰ë§Œ ìˆ˜ì • ê°€ëŠ¥</u>í•˜ë„ë¡</strong> í•œë‹¤. ì´ëŸ¬í•œ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ViewSetì„ êµ¬ì„±í•´ë³´ë„ë¡ í•˜ì.</p>\n</li>\n</ol>\n<p>ìš°ì„ , ìš”ì²­ì´ ë“¤ì–´ì˜¨ ì‚¬ìš©ìê°€ ê°–ê³  ìˆëŠ” Cartë§Œ ë³´ì—¬ì¤˜ì•¼ í•˜ë¯€ë¡œ, <code class=\"language-text\">queryset</code>ì„ ìˆ˜ì •í•´ì•¼í•œë‹¤.! ì´ëŠ” <code class=\"language-text\">get_queryset()</code>ì„ ì˜¤ë²„ë¼ì´ë“œ í•˜ë©´ ë  ê²ƒì´ë‹¤.</p>\n<p>ìˆ˜ì •ì— ìˆì–´ì„œëŠ” ì…ë ¥ ì¸ìë¥¼ <code class=\"language-text\">amount</code>ë§Œ ê°€ëŠ¥í•˜ê²Œ í•´ì•¼í•˜ë¯€ë¡œ, PUT ìš”ì²­ì— ëŒ€í•˜ì—¬ëŠ” ë‹¤ë¥¸ <code class=\"language-text\">serializer_class</code>ë¥¼ ì„ íƒí•˜ë„ë¡ í•œë‹¤. Updateë¥¼ ìœ„í•œ serializerëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CartUpdateSerializer</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    item <span class=\"token operator\">=</span> ItemCartSerializer<span class=\"token punctuation\">(</span>read_only<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># ì•„ì´í…œ ì •ë³´ ë³´ì—¬ì£¼ê¸° read_only</span>\n\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        model <span class=\"token operator\">=</span> Cart\n        fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'amount'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'item'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>itemì„ read_onlyë¡œ í•˜ì˜€ê¸°ì— amountë§Œ ì…ë ¥ë°›ì„ ê²ƒì´ë‹¤. amountëŠ” Cart modelì—ì„œ <code class=\"language-text\">PositiveIntegerField</code>ë¡œ ì •ì˜ë˜ì–´ìˆê¸°ì— serializerì—ì„œ ë³„ë„ì˜ validationì€ ì§„í–‰í•˜ì§€ ì•Šì•˜ë‹¤. ì´ë¥¼ ì´ìš©í•œ ModelViewSetì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CartModelViewSet</span><span class=\"token punctuation\">(</span>viewsets<span class=\"token punctuation\">.</span>ModelViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    queryset <span class=\"token operator\">=</span> Cart<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    serializer_class <span class=\"token operator\">=</span> CartSerializer\n    permission_classes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>IsAuthenticated<span class=\"token punctuation\">]</span> <span class=\"token comment\"># ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥</span>\n    \n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ë³¸ì¸ì´ ì¥ë°”êµ¬ë‹ˆì— í¬í•¨ì‹œí‚¨ ê²ƒë“¤ë§Œ ë³´ì—¬ì£¼ë„ë¡ í•´ì•¼í•¨(íƒ€ì¸ ì ‘ê·¼ ë¶ˆê°€)</span>\n        queryset <span class=\"token operator\">=</span> Cart<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>user<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> queryset\n    \n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_serializer_class</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>action <span class=\"token operator\">==</span> <span class=\"token string\">'update'</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> CartUpdateSerializer\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> CartSerializer\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">perform_create</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> serializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># cart ìƒì„±ë˜ê¸° ì „, serializerì— authì— í•´ë‹¹í•˜ëŠ” user ì •ë³´ ë„£ì–´ì¤˜ì•¼í•¨</span>\n        serializer<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>user<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì!</p>\n<ul>\n<li>\n<p>POST (create)</p>\n<p>item_idì™€ amountë¥¼ bodyì— ë„£ìœ¼ë©´ ìƒì„±ëœë‹¤.</p>\n</li>\n<li>\n<p>GET</p>\n<p>ë³¸ì¸ì´ ë‹´ì€ ì¥ë°”êµ¬ë‹ˆë§Œ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n</li>\n<li>\n<p>UPDATE</p>\n<p>amountë§Œ ìˆ˜ì • ê°€ëŠ¥í•˜ë‹¤.</p>\n</li>\n<li>\n<p>DELETE</p>\n<p>ë³¸ì¸ì˜ ê²ƒë§Œ ì‚­ì œí•  ìˆ˜ ìˆë‹¤.</p>\n</li>\n</ul>\n<p>ëª¨ë‘ ì™„ë£Œë˜ì—ˆìŒì„ í™•ì¸í•´ë³´ì•˜ë‹¤~ api í…ŒìŠ¤íŠ¸ëŠ” DRFì—ì„œ localhost:8000ìœ¼ë¡œ ì ‘ì†ì‹œ ë””ë²„ê¹…ëª¨ë“œë¡œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë‹ˆ, í¸í•˜ê²Œ ì´ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.</p>\n<p>ì„œë²„ ì†ŒìŠ¤ì½”ë“œëŠ” <a href=\"https://github.com/choieastsea/market-guri-django/commit/91de4eca0979d470484655ee452d7b5efd158f7f\">ì—¬ê¸°ì™€</a>, <a href=\"https://github.com/choieastsea/market-guri-django/commit/a66ff714d2a4a278711d9034429012bd2dfee799\">ì—¬ê¸°ì—</a> ìˆë‹¤.</p>\n<h3 id=\"csrf-token-ê´€ë ¨-ë¡œì§-ìˆ˜ì •\" style=\"position:relative;\"><a href=\"#csrf-token-%EA%B4%80%EB%A0%A8-%EB%A1%9C%EC%A7%81-%EC%88%98%EC%A0%95\" aria-label=\"csrf token ê´€ë ¨ ë¡œì§ ìˆ˜ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSRF token ê´€ë ¨ ë¡œì§ ìˆ˜ì •</h3>\n<p>í”„ë¡ íŠ¸ì—ì„œ ì¥ë°”êµ¬ë‹ˆë¥¼ ë‹´ëŠ” ë¶€ë¶„ì„ í™•ì¸í•˜ë ¤ê³  í–ˆëŠ”ë°, CSRF Token ê´€ë ¨í•˜ì—¬ ë‚´ê°€ ì˜ëª»í•œ ë¶€ë¶„ì´ ìˆì–´ ìˆ˜ì •ì„ í•´ì•¼í•  ê²ƒ ê°™ë‹¤. (ì´ì „ ê²Œì‹œë¬¼ì˜ ë‚´ìš©ì€ ë°”ê¿” ë†“ì„ ê²ƒ)</p>\n<p>CSRFëŠ” ë§Œë£Œë˜ë¯€ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ ì ê²€í•´ì¤˜ì•¼í•œë‹¤. ë”°ë¼ì„œ, í”„ë¡ íŠ¸ì—ì„œ í˜ì´ì§€ê°€ ë°”ë€”ë•Œë§ˆë‹¤ CSRF tokenì„ ìš”ì²­í•˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ê³ , ì„œë²„ì—ì„œë„ ì´ì— ëŒ€í•˜ì—¬ í† í°ì„ ë°œê¸‰í•˜ë„ë¡ apië¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>middleware<span class=\"token punctuation\">.</span>csrf <span class=\"token keyword\">import</span> get_token\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse\n\n<span class=\"token decorator annotation punctuation\">@api_view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_csrf</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    unsafe methodì— ëŒ€í•˜ì—¬ csrf ê²€ì¦ì„ ìœ„í•œ í† í°ì„ ë°œê¸‰í•˜ëŠ” í•¨ìˆ˜\n    \"\"\"</span>\n    csrf_token <span class=\"token operator\">=</span> get_token<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n    response <span class=\"token operator\">=</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>csrf_token<span class=\"token punctuation\">)</span>\n    response<span class=\"token punctuation\">.</span>set_cookie<span class=\"token punctuation\">(</span><span class=\"token string\">'csrftoken'</span><span class=\"token punctuation\">,</span>csrf_token<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># print(response.cooki)</span>\n    <span class=\"token keyword\">return</span> response</code></pre></div>\n<p>ìœ„ì˜ view í•¨ìˆ˜ë¥¼ myuser appì— ì¶”ê°€í•˜ì˜€ê³ , í”„ë¡ íŠ¸ì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì—¬ tokenì„ ì¿ í‚¤ì˜ í˜•íƒœë¡œ ìœ ì§€í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.</p>\n<h2 id=\"í”„ë¡ íŠ¸ì™€-í•¨ê»˜ë³´ê¸°\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%A0%ED%8A%B8%EC%99%80-%ED%95%A8%EA%BB%98%EB%B3%B4%EA%B8%B0\" aria-label=\"í”„ë¡ íŠ¸ì™€ í•¨ê»˜ë³´ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í”„ë¡ íŠ¸ì™€ í•¨ê»˜ë³´ê¸°</h2>\n<p>í”„ë¡ íŠ¸ ì½”ë“œëŠ” <a href=\"https://github.com/choieastsea/market-guri-react/commit/c007c68cd908c98dffbe812eceff4fce0c4aad03\">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•œë‹¤.</p>\n<ul>\n<li>\n<p>ì•„ì´í…œ í˜ì´ì§€</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABMUlEQVQoz5VT26qDMBD0/39Lq/VeaB+kL32pCsop3q8xUzYloj3xwFkYdrPJDjubRIuiCPf7HeSfz6cArZMkwbdxzn9B5qVpqiJpy7LsoDJ5vugYxnmBlmUZLpcLbrfbIa7XK6QSih+Ph1hTrSSdGcfCObQ4jmGaJlzXheM4sG179duY9ouiwDzPGMdRQCmZZnU+n+H7PjzP23kZE1kQBMjzHGVZ7gi2pIQdIXVjWdbaHeUlIe3XdS06ZIwdX8qWkEh0XRcjOJ1OMAxjJSTfNM1KME3T/yRvY9nhq2wwzBx1zzCxZSd1R0gyZaEKjvPpsG27z3M6kCsI0zQVRWEYisF/Q+bJ9123ITmYIQ2573slhmHAq+rwU7Zom2Z93PyvDukQva+qqpQ/gXGSqP5JKnsDFfmBrdRe9usAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"item_page\"\n        title=\"item_page\"\n        src=\"/static/345a25ba3193c53bf805b276dc3aa2b0/37523/item_page.png\"\n        srcset=\"/static/345a25ba3193c53bf805b276dc3aa2b0/e9ff0/item_page.png 180w,\n/static/345a25ba3193c53bf805b276dc3aa2b0/f21e7/item_page.png 360w,\n/static/345a25ba3193c53bf805b276dc3aa2b0/37523/item_page.png 720w,\n/static/345a25ba3193c53bf805b276dc3aa2b0/302a4/item_page.png 1080w,\n/static/345a25ba3193c53bf805b276dc3aa2b0/07a9c/item_page.png 1440w,\n/static/345a25ba3193c53bf805b276dc3aa2b0/28b65/item_page.png 2414w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ìˆ˜ëŸ‰ì„ ì²´í¬í•˜ê³  ì¥ë°”êµ¬ë‹ˆë¥¼ ëˆ„ë¥´ë©´ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ëœë‹¤.</p>\n</li>\n<li>\n<p>ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAApklEQVQoz62R3QrDIAyFff/3q94UKfZCW3bltNL5c0YcHYPRdqweyE2iX3ISxjlH13UQQkBKCa01KNf3PWKMIJVSdmOrb2I40efjo3pMBbd7BKNECAHruiLnfDjN/pQFmTiP/AIOwwClVAVeVQXO81x3Z62tHQn8T9DfCiS7V0BfQLI7TdPpAX454NsyhXOuzYTLssB739byOI5IKbWxTPszxjSx/AQS4GK2VUqBagAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cart_page\"\n        title=\"cart_page\"\n        src=\"/static/1f1498ed3a70de1e5dd480c42e1f7752/37523/cart_page.png\"\n        srcset=\"/static/1f1498ed3a70de1e5dd480c42e1f7752/e9ff0/cart_page.png 180w,\n/static/1f1498ed3a70de1e5dd480c42e1f7752/f21e7/cart_page.png 360w,\n/static/1f1498ed3a70de1e5dd480c42e1f7752/37523/cart_page.png 720w,\n/static/1f1498ed3a70de1e5dd480c42e1f7752/302a4/cart_page.png 1080w,\n/static/1f1498ed3a70de1e5dd480c42e1f7752/07a9c/cart_page.png 1440w,\n/static/1f1498ed3a70de1e5dd480c42e1f7752/dc0c1/cart_page.png 2348w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ë³¸ì¸ì˜ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ë¬¼ê±´ë“¤ê³¼ ì´ ìˆ˜ëŸ‰, ê°€ê²©ê³¼ ì¬ê³ ì— ë”°ë¥¸ í˜„ì¬ êµ¬ë§¤ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ë³´ì—¬ì¤€ë‹¤.</p>\n</li>\n</ul>\n<p>ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©ì„ ë³µìŠµí•´ë³´ë©´,</p>\n<ul>\n<li>read_only <code class=\"language-text\">SerializerField</code>ë¡œ ë³´ì—¬ì¤„ë•Œë§Œ ì‚¬ìš©í•˜ëŠ” í•„ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤</li>\n<li><code class=\"language-text\">to_representation</code>ì„ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ nested serializerë¥¼ ë³´ê¸° ì¢‹ê²Œ í•  ìˆ˜ ìˆë‹¤ (request ë°›ì„ ë•Œì—ëŠ” ë‹¨ìˆœ idë¡œë§Œ ë°›ê³ , responseëŠ” modelì˜ ë°ì´í„°ë¥¼ í•´ë‹¹ ëª¨ë¸ì˜ ì‹œë¦¬ì–¼ë¼ì´ì €ë¡œ ë³´ì—¬ì¤Œ)</li>\n<li>ViewSetì—ì„œ request method ë“±ì— ë”°ë¼ serializerë¥¼ ë°”ê¿”ì¤„ ìˆ˜ ìˆë‹¤</li>\n<li>get_querysetì—ì„œ í•„ìš”ì— ë”°ë¼ <code class=\"language-text\">self.request.user</code>ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤</li>\n</ul>\n<p>ë‹¤ìŒì—ëŠ” ì¥ë°”êµ¬ë‹ˆë¥¼ í†µí•˜ê±°ë‚˜ ìƒí’ˆ í˜ì´ì§€ì—ì„œì˜ êµ¬ë§¤ë¥¼ í•  ìˆ˜ ìˆë„ë¡ <code class=\"language-text\">êµ¬ë§¤</code> ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ë³´ì! ì§€ê¸ˆì€ í”„ë¡ íŠ¸ê°€ ë§¤ìš° ëª»ìƒê²¼ì§€ë§Œ, ì‹¬ì‹¬í•˜ë©´ ë°”ê¾¸ë„ë¡ í•˜ê² ë‹¤â€¦^_^</p>","excerpt":"ì €ë²ˆê¹Œì§€ Item ëª¨ë¸ê³¼ ì—°ê´€ëœ Questionê³¼ Answer ëª¨ë¸ì„ êµ¬í˜„í•´ë³´ì•˜ë‹¤. ì§ˆë¬¸ì„ ë‚¨ê¸´ ì‚¬ëŒë§Œ í•´ë‹¹ ì§ˆë¬¸ì„ ë³€ê²½í•  ìˆ˜ ìˆê³ , ë‹µë³€ì€ ê´€ë¦¬ì í˜ì´ì§€ë¥¼ í†µí•´ì„œë§Œ ë‹¬ ìˆ˜ ìˆë‹¤. ì˜¤ëŠ˜ì€ ì‡¼í•‘ëª°ì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ ì‚¬ìš©ìê°€ ë¬¼ê±´ì„ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê³ , êµ¬ë§¤í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³´ë„ë¡ í•˜ì. ì¥ë°”êµ¬ë‹ˆ(Cart) ëª¨ë¸ ë§Œë“¤ê¸° ì¥ë°”êµ¬ë‹ˆì— ëŒ€í•œ ìš”êµ¬ì‚¬í•­ì„ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ì. ì¥ë°”êµ¬ë‹ˆëŠ” User modelê³¼ Item modelì„ ìœ¼ë¡œ ì—°ê²°í•´ì£¼ëŠ” í…Œì´ë¸”ì´ë¯€ë¡œ, ë³„ë„ì˜ ëª¨ë¸ë¡œ ì‘ì„±í•˜ë„ë¡ í•œë‹¤. ë¡œ ì¥ë°”êµ¬ë‹ˆ ì•±ì„ ë§Œë“¤ì. ì‚¬ìš©ì ë¬¼ê±´(item) & ë¬¼ê±´ì˜ í˜„ì¬ ê°€ê²© ìˆ˜ëŸ‰ ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€/ì—…ë°ì´íŠ¸ ì‹œì (ì¶”ê°€, ìˆ˜ì • ë“±ìœ¼ë¡œ 7ì¼ ì§€ë‚˜ë©´ ì¥ë°”êµ¬ë‹ˆ ì‚­ì œë˜ë„ë¡ í•  ìˆ˜ ìˆì„ ê²ƒ) ìœ„ì˜ ìš”êµ¬ì‚¬í•­ì„ ì— êµ¬í˜„í•´ë³´ì. ë‹¤ìŒìœ¼ë¡œëŠ”, serializerë¥¼ êµ¬í˜„í•œë‹¤. serializerì—ì„œëŠ” ì•„ë˜ì˜ ë‘ê°€ì§€ í•„ë“œê°€ ì¶”ê°€ë˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤. ì´ ê¸ˆì•¡ ì£¼ë¬¸ì´ ê°€ëŠ¥í•œì§€ ì—¬ë¶€(í’ˆì ˆì´ ë˜ë©´ ì£¼ë¬¸ì´ ë¶ˆê°€ëŠ¥) ì‚¬ìš©ìì—ê²Œ í•´ë‹¹ í•„ë“œë¥¼ ì œê³µí•˜ë©´ì„œ,â€¦","frontmatter":{"date":"June 16, 2023","title":"(Django) ì¥ê³  api ì„œë²„ë¥¼ ì´ìš©í•œ í”„ë¡œì íŠ¸ [12- nested model & serializer, ì¥ë°”êµ¬ë‹ˆ ëª¨ë¸ ì¶”ê°€]","categories":"BE","author":"choieastsea","emoji":"ğŸ™„"},"fields":{"slug":"/Django(12)- nested model & serializer/"}},"next":{"id":"743c8dd2-f602-5a45-9e46-65b1f6265e9d","html":"<p>ì €ë²ˆê¹Œì§€ Django User modelê³¼ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” SessionAuthenticationì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ë‹¤.</p>\n<p>ì˜¤ëŠ˜ì€ â€œìƒí’ˆâ€ì— í•´ë‹¹í•˜ëŠ” Item modelì„ êµ¬ì²´ì ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê³ , ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ëª‡ê°€ì§€ ëª¨ë¸ì„ ì¶”ê°€ë¡œ ë§Œë“¤ì–´ë³´ì. ìš°ì„ , ìƒí’ˆì— ëŒ€í•˜ì—¬ ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ë‚¨ê¸¸ ìˆ˜ ìˆë„ë¡ Question ëª¨ë¸ê³¼ QNA ëª¨ë¸ì„ ë§Œë“¤ì–´ì£¼ë„ë¡ í•œë‹¤.</p>\n<h1 id=\"model-with-foreignkey\" style=\"position:relative;\"><a href=\"#model-with-foreignkey\" aria-label=\"model with foreignkey permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Model with ForeignKey</h1>\n<p>ì§ˆë¬¸ ëª¨ë¸ì— ëŒ€í•œ ì •ì˜ëŠ” ë³„ë„ì˜ appì„ ë§Œë“¤ì–´ì„œ ì§„í–‰í•˜ì˜€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf <span class=\"token keyword\">import</span> settings\n<span class=\"token keyword\">from</span> item<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Item\n\n<span class=\"token comment\"># Create your models here.</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Question</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    item <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Item<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ìƒí’ˆ'</span><span class=\"token punctuation\">,</span> default<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n    title <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ì§ˆë¬¸ ì œëª©'</span><span class=\"token punctuation\">,</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    content <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>TextField<span class=\"token punctuation\">(</span>verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ì§ˆë¬¸ ë‚´ìš©'</span><span class=\"token punctuation\">)</span>\n    user <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>settings<span class=\"token punctuation\">.</span>AUTH_USER_MODEL<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ì§ˆë¬¸ì'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># ì‚¬ìš©ì ì‚­ì œë˜ë©´ ì§ˆë¬¸ë„ ì‚­ì œë˜ë„ë¡</span>\n    date_created <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span>verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ì‘ì„±ì¼ì'</span><span class=\"token punctuation\">,</span> auto_now_add<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># ì§ˆë¬¸ ìƒì„±ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ ì‹œê°„ìœ¼ë¡œ ì´ˆê¸°í™”</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        db_table <span class=\"token operator\">=</span> <span class=\"token string\">'question'</span>\n        verbose_name <span class=\"token operator\">=</span> <span class=\"token string\">'ì§ˆë¬¸'</span>\n        verbose_name_plural <span class=\"token operator\">=</span> <span class=\"token string\">'ì§ˆë¬¸ë“¤'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Answer</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ì§ˆë¬¸'</span><span class=\"token punctuation\">)</span>\n    answer <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>TextField<span class=\"token punctuation\">(</span>verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'íŒë§¤ì ë‹µë³€'</span><span class=\"token punctuation\">)</span>\n    date_created <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span>verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ì‘ì„±ì¼ì'</span><span class=\"token punctuation\">,</span> auto_now_add<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        db_table <span class=\"token operator\">=</span> <span class=\"token string\">'answer'</span>\n        </code></pre></div>\n<p>ì§ˆë¬¸ì— ëŒ€í•œ ëª¨ë¸ê³¼ ë‹µë³€ì— ëŒ€í•œ ëª¨ë¸ì´ ì¡´ì¬í•˜ëŠ”ë°, ì§ˆë¬¸ì€ 2ê°œì˜ Foriegn keyë¥¼ ê°€ì ¸ì•¼ í•œë‹¤.</p>\n<ul>\n<li>ì–´ë–¤ ì•„ì´í…œì— ëŒ€í•œ ì§ˆë¬¸ì¸ì§€ (item)</li>\n<li>ëˆ„ê°€ ì‘ì„±í•œ ì§ˆë¬¸ì¸ì§€ (user)</li>\n</ul>\n<p><code class=\"language-text\">ForeignKey</code>ë¡œ ì •ì˜í•œ í•„ë“œë“¤ì€ originì´ ì–´ë””ì— ìˆëŠ”ì§€, ì°¸ì¡°í•˜ê³  ìˆëŠ” ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆì„ ë•Œì— ëŒ€í•œ ì •ì˜ë¥¼ í•´ì¤„ ìˆ˜ ìˆë‹¤. ì¶”ê°€ì ìœ¼ë¡œ, ìš°ë¦¬ì²˜ëŸ¼ custom user modelì„ ì‚¬ìš©í•œ ê²½ìš°ì—ëŠ”, <code class=\"language-text\">from django.{í”„ë¡œì íŠ¸ ì•±} import settings</code>ë¥¼ í•´ì£¼ê³ , <code class=\"language-text\">settings.AUTH_USER_MODEL</code>ë¡œ ê°€ì ¸ì™€ì•¼ í•œë‹¤!! settings.pyì—ì„œ AUTH_USER_MODEL ì ìš©ì„ í•´ë†¨ìœ¼ë‹ˆ ê·¸ê²ƒì„ ê°€ì ¸ì™€ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ê·¸ë¦¬ê³  ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìˆ˜í–‰í•´ì£¼ì~</p>\n<p>ê·¸ë¦¬ê³ , ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Questionì„ ì‘ì„±í•˜ëŠ” apië¥¼ ë§Œë“¤ì–´ë³´ë„ë¡ í•˜ì. ìš°ì„ , ModelSerializerë¥¼ ì´ìš©í•˜ì—¬ ViewSetì„ ë§Œë“¤ì–´ì£¼ì.</p>\n<ol>\n<li>\n<p>question/serializers.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> rest_framework <span class=\"token keyword\">import</span> serializers\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionSerializer</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        model <span class=\"token operator\">=</span> Question\n        fields <span class=\"token operator\">=</span> <span class=\"token string\">\"__all__\"</span></code></pre></div>\n<p>ì´ì œ Viewë¥¼ ë§Œë“¤ì–´ì£¼ì.</p>\n</li>\n<li>\n<p>question/views.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> rest_framework <span class=\"token keyword\">import</span> viewsets\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>serializers <span class=\"token keyword\">import</span> QuestionSerializer\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n<span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>permissions <span class=\"token keyword\">import</span> IsAuthenticatedOrReadOnly\n<span class=\"token comment\"># Create your views here.</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionModelViewSet</span><span class=\"token punctuation\">(</span>viewsets<span class=\"token punctuation\">.</span>ModelViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    queryset <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    serializer_class <span class=\"token operator\">=</span> QuestionSerializer\n    permission_classes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>IsAuthenticatedOrReadOnly<span class=\"token punctuation\">]</span>\n    \n    <span class=\"token keyword\">def</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        kwargs<span class=\"token punctuation\">[</span><span class=\"token string\">'partial'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span> <span class=\"token comment\"># for partial update</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>querysetê³¼ serializer_classë¥¼ ì •ì˜í•´ì£¼ì—ˆê³ , <strong>permission_classes</strong> ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì •ì˜í•´ì£¼ì—ˆë‹¤. ì´ëŠ” ì—­ì‹œ DRFì—ì„œ ViewSetì„ ìœ„í•´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ í•´ë‹¹ Viewì— ì ‘ê·¼í•  ë•Œ í•„ìš”í•œ ê¶Œí•œì— ëŒ€í•˜ì—¬ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤.</p>\n<p>ìš°ë¦¬ ì„œë¹„ìŠ¤ëŠ” â€<u>íšŒì›ë§Œ ìƒí’ˆì— ëŒ€í•œ ì§ˆë¬¸ì„ ë‚¨ê¸¸ ìˆ˜ ìˆ</u>â€œê³ , <u>ë¹„íšŒì›ì€ ì§ˆë¬¸ì„ ë³¼ ìˆ˜ë§Œ ìˆê²Œ í•˜ê¸°</u> ìœ„í•´ <code class=\"language-text\">IsAuthenticatedOrReadOnly</code>ë¥¼ ë‹¬ì•„ì£¼ì—ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´, ìš”ì²­ì— ëŒ€í•˜ì—¬ ê¶Œí•œì´ ì—†ëŠ” ì‚¬ìš©ìëŠ” ì½ê¸° ìš”ì²­ë§Œ ê°€ëŠ¥í•  ê²ƒì´ë‹¤.</p>\n<p>permission_classesëŠ” ë°°ì—´ë¡œ ì„ ì–¸í•˜ë©° ì—¬ëŸ¬ ê¶Œí•œê³¼ ê´€ë ¨í•œ ì •ì±…ì„ ë‹¬ì•„ì¤„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, <a href=\"https://www.django-rest-framework.org/api-guide/permissions/\">ê³µì‹ ë¬¸ì„œ</a>ë¥¼ í™•ì¸í•´ë³´ì.</p>\n</li>\n<li>\n<p>urls.py</p>\n<p>ì €ë²ˆì— item/urls.pyì²˜ëŸ¼ ì‘ì„±í•´ì£¼ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path<span class=\"token punctuation\">,</span> include\n<span class=\"token keyword\">from</span> question <span class=\"token keyword\">import</span> views\n<span class=\"token keyword\">from</span> rest_framework <span class=\"token keyword\">import</span> routers\n\nrouter <span class=\"token operator\">=</span> routers<span class=\"token punctuation\">.</span>DefaultRouter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nrouter<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span><span class=\"token string\">r'basic'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>QuestionModelViewSet<span class=\"token punctuation\">)</span>\n\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> include<span class=\"token punctuation\">(</span>router<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n</ol>\n<p>ì¶”ê°€ì ìœ¼ë¡œ rootì˜ urls.pyë„ questionì•±ì„ í¬í•¨í•˜ë„ë¡ ìˆ˜ì •í•˜ì.</p>\n<p>ì´ì œ, í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì!</p>\n<h2 id=\"api-test\" style=\"position:relative;\"><a href=\"#api-test\" aria-label=\"api test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>api test</h2>\n<p><a href=\"http://localhost:8000/question%EB%A5%BC\">http://localhost:8000/questionë¥¼</a> ì…ë ¥í•˜ë©´ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsUlEQVQ4y6WRWW/TQBRG/XOI4iROs0AWJSBB/iuvvPAXeElbO0ECgdSqCDdkszOeGS+JOchLyENVlFJLR3OvdH38XY8xGo4ZDUb0X/bpdXu0mx06Fx3azXZOy2pzYbXotLrUq3WqL0zMSg2zYv6lWjGpVeu8ffMO43Wny2QwZNIfMOn1GbfajC9axVnWo7IfWk2GDas4j2R9w2LQsHhl1jDm8znOdMqVbTO9uuTacXBmM64dO69P2NiO85BZMZ8x/zzH+J2mCN9HKYUQAiklSZJw7iOilPeffvDRXvDh0sXQYchqtcbzfJRUOVJqoij+J2F5Kh3xaytZeZKlJzGECPjy9Tv3S4/lNsDbqXxQ64gwI3yMciaMSeKEJErYJ3sMrUPc+xWbncKTIUJF+ddzwriUxo+SSY9kvXFIU6JAoxYb9GKNXvvonUT7AVqFZ0mP4mwzY5+mqM0OceMSLDYod1XIMmkp1E8SHg4oIZGZRIanFcr66cJjwm93BLcu8tZFbXxUtrp8TkIvOL0YJ4TJ/mzZw4Rbgbj5maeTd4s88TMSpigvKC5EqOJCAo2W+r/+4R//6Nm2Rhq6wgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"api-test1\" title=\"api-test1\" src=\"/static/0abbe3509e82d758650300290a82ab4b/37523/api-test1.png\" srcset=\"/static/0abbe3509e82d758650300290a82ab4b/e9ff0/api-test1.png 180w,\n/static/0abbe3509e82d758650300290a82ab4b/f21e7/api-test1.png 360w,\n/static/0abbe3509e82d758650300290a82ab4b/37523/api-test1.png 720w,\n/static/0abbe3509e82d758650300290a82ab4b/302a4/api-test1.png 1080w,\n/static/0abbe3509e82d758650300290a82ab4b/07a9c/api-test1.png 1440w,\n/static/0abbe3509e82d758650300290a82ab4b/28b65/api-test1.png 2414w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>ë¡œê·¸ì¸ë˜ì–´ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ, ìƒˆë¡œìš´ ì§ˆë¬¸ì„ ìƒì„±í•˜ëŠ” requestëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë§Œì•½ ë¡œê·¸ì¸ ë˜ì–´ ìˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ formë„ í•˜ë‹¨ì— ë‚˜ì˜¬ ê²ƒì´ë‹¤. (localhost:8000/admin ìœ¼ë¡œ ë¡œê·¸ì¸ í•˜ê³  ê°™ì€ ë¸Œë¼ìš°ì € ë‚´ì—ì„œ ì ‘ì†í•˜ë©´ ë‚˜ì˜¬ ê²ƒ)</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 30.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAArElEQVQY042Q7QrDIAxF+/7vNNgrjD3CxliLlVq10fhxR+wK/bUZOEgu4ZA41FpRSsFR0h8l+U9qRU4MthZEhBACBmbGtm2Y5xnTNGFdVyilsCxLG/gLEch7WGvhnNuF3vsmGcexhSITcUqpj5zbS/TdUCSC1rqJjDGQPMbYRYgRJTM4noQikpOP7dpgz8khIHHEW1u8lMEgq8rJ8o9nJOvBOo+aAi63B673Jz6fTNJk0D6ESQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"api-test2\" title=\"api-test2\" src=\"/static/27e0713231083ab3a4eb5c77d23f64db/37523/api-test2.png\" srcset=\"/static/27e0713231083ab3a4eb5c77d23f64db/e9ff0/api-test2.png 180w,\n/static/27e0713231083ab3a4eb5c77d23f64db/f21e7/api-test2.png 360w,\n/static/27e0713231083ab3a4eb5c77d23f64db/37523/api-test2.png 720w,\n/static/27e0713231083ab3a4eb5c77d23f64db/302a4/api-test2.png 1080w,\n/static/27e0713231083ab3a4eb5c77d23f64db/07a9c/api-test2.png 1440w,\n/static/27e0713231083ab3a4eb5c77d23f64db/59f0d/api-test2.png 2370w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>í•˜ì§€ë§Œ, <strong><u><em>ë¬¸ì œê°€ ë³´ì¸ë‹¤.</em></u></strong></p>\n<p>requestì—ì„œ ì§ˆë¬¸ìë¥¼ ëª…ì‹œí•˜ë©°, GETì—ì„œë„ ë¦¬í„´ì‹œ ì§ˆë¬¸ìì˜ idê°€ ë…¸ì¶œì´ ëœë‹¤. ì¶”ê°€ì ìœ¼ë¡œ UPDATE, DELETEì— ëŒ€í•˜ì—¬ëŠ” ë³¸ì¸ì´ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ <code class=\"language-text\">IsAuthenticated</code> ì´ë¯€ë¡œ ë‚¨ì´ ì‘ì„±í•œ ì§ˆë¬¸ì„ ìˆ˜ì •/ì‚­ì œí•  ìˆ˜ ìˆê²Œ ëœë‹¤.</p>\n<p>ìš°ë¦¬ëŠ” ì—¬ê¸°ì„œ ëª‡ê°€ì§€ë¥¼ í•´ì¤„ ìˆ˜ ìˆë‹¤.</p>\n<blockquote>\n<ol>\n<li>ì§ˆë¬¸ìë¥¼ ëª…ì‹œí•˜ì§€ ì•Šë„ë¡, serializer ìˆ˜ì •</li>\n<li>ì§ˆë¬¸ìë¥¼ ìë™ìœ¼ë¡œ ë„£ì–´ì£¼ë„ë¡ perform_create ì˜¤ë²„ë¼ì´ë“œ</li>\n<li>ë³¸ì¸ì´ ì‘ì„±í•œ ê¸€ë§Œ ìˆ˜ì •/ì‚­ì œí•  ìˆ˜ ìˆë„ë¡ custom permission ì¶”ê°€</li>\n</ol>\n</blockquote>\n<h1 id=\"custom-permission--set-user-automatically-in-viewset\" style=\"position:relative;\"><a href=\"#custom-permission--set-user-automatically-in-viewset\" aria-label=\"custom permission  set user automatically in viewset permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom Permission &#x26; set user automatically in viewset</h1>\n<p>í•´ì•¼í•  ì¼ë“¤ì„ ì°¨ê·¼ì°¨ê·¼ í•´ë³´ì.</p>\n<ol>\n<li>\n<p>serializer field ì¡°ì •</p>\n<p><strong>requestì—ì„œëŠ” userë¥¼ ì ì§€ ëª»í•˜ë„ë¡</strong> í•´ì•¼í•œë‹¤. ì´ëŠ” <u>read_onlyë¡œ ì‹œë¦¬ì–¼ë¼ì´ì € í•„ë“œë¥¼ ì„ ì–¸</u>í•˜ë„ë¡ í•˜ë©´ ëœë‹¤.</p>\n<p>ë˜í•œ, responseì—ì„œëŠ” userì˜ id(PK)ë¥¼ ë…¸ì¶œí•˜ì§€ ì•Šê³  ì´ë¦„ê³¼ ê°™ì€ ë‹¤ë¥¸ í•„ë“œë¥¼ ë„˜ê²¨ì£¼ë„ë¡ í•´ë³´ì. usernameì„ ë³´ë‚´ì£¼ëŠ”ë°, ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ë¥¼ serializer ë‹¨ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> rest_framework <span class=\"token keyword\">import</span> serializers\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionSerializer</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    user <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>source<span class=\"token operator\">=</span><span class=\"token string\">'user.username'</span><span class=\"token punctuation\">,</span> read_only<span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        model <span class=\"token operator\">=</span> Question\n        fields <span class=\"token operator\">=</span> <span class=\"token string\">\"__all__\"</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">to_representation</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> instance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        data <span class=\"token operator\">=</span> <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to_representation<span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">)</span>\n        username <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token comment\"># ê°€ìš´ë° ë¬¸ì ê°€ë¦¬ê¸°</span>\n        masked_username <span class=\"token operator\">=</span> username<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token string\">'*'</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> username<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span>\n        data<span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> masked_username\n        <span class=\"token keyword\">return</span> data</code></pre></div>\n<p>ìš°ì„ , user fieldë¥¼ <strong>read_onlyë¡œ ì¶”ê°€</strong>í•´ì£¼ë©´ì„œ ì–´ë””ì—ì„œ ê°€ì ¸ì™€ì•¼í•˜ëŠ”ì§€ <code class=\"language-text\">source</code> parameterì— ì ì–´ì¤€ë‹¤.</p>\n<p>ì´í›„ì—, <strong>to_representation ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©</strong>í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§ˆ usernameì„ ì¼ë¶€ ê°€ë¦¬ë„ë¡ í•˜ì˜€ë‹¤. ì´ í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë©´, rawí•œ data typeì„ ë³´ê¸° ì¢‹ê²Œ ë°”ê¿”ì£¼ê¸°ì—ë„ ì¢‹ì„ ê²ƒì´ë‹¤.</p>\n</li>\n<li>\n<p>perform_create</p>\n<p>serializerë¥¼ ë°”ê¾¸ë©´ GETì€ ì˜ ìˆ˜í–‰ë˜ê² ì§€ë§Œ ë‚˜ë¨¸ì§€ëŠ” ì˜ ì•ˆë  ê²ƒì´ë‹¤. <strong>Question modelì—ì„œ ì‘ì„±ìëŠ” í•„ìš”í•˜ì§€ë§Œ, ë‹¨ì§€ request bodyì— ìˆìœ¼ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì´ë‹¤</strong>. ìš°ë¦¬ëŠ” requestì—ì„œ ì˜¤ëŠ” authentication ì •ë³´(<code class=\"language-text\">request.user</code>)ë¥¼ questionëª¨ë¸ì˜ create ë‹¨ê³„ì—ì„œ ì´ˆê¸°í™”í•´ì„œ ë„£ì–´ì£¼ë©´ ëœë‹¤. viewset ë‚´ì— <code class=\"language-text\">perform_create</code> í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ì¤€ë‹¤. createì—ì„œ serializerë¥¼ ê²€ì¦í•œ ì´í›„ì— ì‹¤ì œ saveê°€ ì´ë£¨ì–´ì§€ëŠ” ë¶€ë¶„ì¸ë°, ì—¬ê¸°ì„œ userë¥¼ <code class=\"language-text\">self.request.user</code>ë¡œ ë„£ì–´ì£¼ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">perform_create</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> serializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># ìƒì„±ë˜ê¸° ì „, serializerì— user ì •ë³´ ë„£ì–´ì¤˜ì•¼í•¨</span>\n  serializer<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>user<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span></code></pre></div>\n<p>createí•  ë•Œ requestì—ì„œ ë“¤ì–´ì˜¨ userì— ë§ê²Œ ëª¨ë¸ì´ ìƒì„±ë˜ê³  DBì— ì €ì¥ë  ê²ƒì´ë‹¤.</p>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, ìˆ˜ì •ê³¼ ì‚­ì œì— ëŒ€í•œ ê¶Œí•œì„ ì¡°ì •í•´ì£¼ì! ë³¸ì¸ë§Œ ìˆ˜ì •ê³¼ ì‚­ì œë¥¼ í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤.</p>\n</li>\n<li>\n<p>custom permission</p>\n<p>Permissionì€ Djangoì—ì„œ ì œê³µí•˜ëŠ” <code class=\"language-text\">BasePermission</code> í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆë‹¤. <code class=\"language-text\">IsAuthenticated</code> ë“±ê³¼ ê°™ì´ ì œê³µí•´ì£¼ëŠ” permission í•¨ìˆ˜ ì—­ì‹œ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ ì ¸ìˆë‹¤. BasePermission í´ë˜ìŠ¤ì˜ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">BasePermission</span><span class=\"token punctuation\">(</span>metaclass<span class=\"token operator\">=</span>BasePermissionMetaclass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    A base class from which all permission classes should inherit.\n    \"\"\"</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">has_permission</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Return `True` if permission is granted, `False` otherwise.\n        \"\"\"</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">has_object_permission</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Return `True` if permission is granted, `False` otherwise.\n        \"\"\"</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\n</code></pre></div>\n<p>ë³´ë©´, has_permissoinê³¼ has_object_permissioní•¨ìˆ˜ê°€ ìˆëŠ”ë°, í›„ìëŠ” <code class=\"language-text\">get_object()</code>  í•¨ìˆ˜ê°€ ìˆ˜í–‰ë  ë•Œ í˜¸ì¶œë  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì•ì „ì— ê³µë¶€í–ˆë˜ <code class=\"language-text\">API_View</code>ì—ì—ì„œ ì œê³µë˜ëŠ” í•¨ìˆ˜ë¡œ, get/update/deleteì™€ ê°™ì´ idë¥¼ urlë¡œ ì…ë ¥ë°›ì•„ íŠ¹ì • ê°ì²´ì— ì ‘ê·¼í•  ë•Œ í˜¸ì¶œëœë‹¤. ë”°ë¼ì„œ <code class=\"language-text\">has_object_permission</code> í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ë³´ì.! <code class=\"language-text\">conf/permissions.py</code> ë¥¼ ë§Œë“¤ì–´ì£¼ê³  ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> rest_framework <span class=\"token keyword\">import</span> permissions\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IsOwnerOrReadOnly</span><span class=\"token punctuation\">(</span>permissions<span class=\"token punctuation\">.</span>BasePermission<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">has_object_permission</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># íŠ¹ì • ê°ì²´ë¥¼ ì ‘ê·¼í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ê¶Œí•œ(get, update, delete) &lt;-> APIView ê¸°ë°˜ì˜ POSTì—ì„œëŠ” í˜¸ì¶œë˜ì§€ ì•ŠìŒ</span>\n        <span class=\"token comment\"># GET, HEAD, OPTIONS ìš”ì²­ì€ í•­ìƒ í—ˆìš©</span>\n        <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token keyword\">in</span> permissions<span class=\"token punctuation\">.</span>SAFE_METHODS<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\n\n        <span class=\"token comment\"># ì‘ì„±ìë§Œ ìˆ˜ì •, ì‚­ì œë¥¼ í—ˆìš©</span>\n        <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">.</span>user <span class=\"token operator\">==</span> request<span class=\"token punctuation\">.</span>user\n</code></pre></div>\n<p>ê¶Œí•œì— ëŒ€í•˜ì—¬ Boolean typeìœ¼ë¡œ ë¦¬í„´í•˜ë„ë¡ í•˜ë©´ ëœë‹¤. ë§Œì•½ Questionì˜ ì‘ì„±ì (user)ê°€ ìš”ì²­ì„ ë³´ë‚¸ ì‚¬ëŒ(request.user)ê³¼ ë‹¤ë¥´ë‹¤ë©´ <code class=\"language-text\">False</code>ë¥¼ ë¦¬í„´í•˜ë„ë¡ í•œë‹¤. ë˜í•œ custom permissionì„ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤ë©´ ViewSetì˜ permission_classesì—ë‹¤ê°€ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.!</p>\n<p>ì—¬ê¸°ê¹Œì§€ ê¶Œí•œì— ëŒ€í•˜ì—¬ ì˜ ì•Œì•„ë³´ì•˜ë‹¤. í•´ë‹¹ ë‚´ìš©ê¹Œì§€ ì»¤ë°‹í•œë²ˆ í•˜ê³  ê°€ì. <a href=\"https://github.com/choieastsea/market-guri-django/commit/99a1643d42de98db25af3d1aac653a1832d89e02\">ì½”ë“œ ì°¸ê³ </a></p>\n<p><a href=\"http://localhost:8000/question/basic\">http://localhost:8000/question/basic</a> ìš”ì²­ì— ëŒ€í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì˜ ë‚˜ì˜¨ë‹¤ë©´ ì„±ê³µì´ë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"th*******ae\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ë°°ì†¡ ê´€ë ¨ ë¬¸ì˜\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"í•´ë‹¹ ìƒí’ˆì„ ì˜¤ëŠ˜ ì‹œí‚¤ë©´ ì–¸ì œì¯¤ ë„ì°©í• ê¹Œìš”?\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"date_created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-05-13\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"item\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"th*******ae\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ë°°ì†¡ ê´€ë ¨ ë¬¸ì˜2\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"í•´ë‹¹ ìƒí’ˆì„ ì˜¤ëŠ˜ ì‹œí‚¤ë©´ ì–¸ì œì¯¤ ë„ì°©í• ê¹Œìš”?\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"date_created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-05-13\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"item\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    ...\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>ë˜í•œ, ~/question/basic/{id} ë¡œ ì ‘ê·¼í•´ì„œ <strong>ë³¸ì¸ì´ ì‘ì„±í•œ ê¸€ì´ë¼ë©´ UPDATEì™€ DELETEê°€ ê°€ëŠ¥í•  ê²ƒì´ê³ , ì•„ë‹ˆë©´ permission ê´€ë ¨ ì—ëŸ¬ê°€ ë‚˜ì˜¬ ê²ƒì´ë‹¤</strong></p>\n</li>\n</ol>\n<p>ì´ì œ ê°œë…ì ì¸ ê²ƒë“¤ì€ ê±°ì˜ ëë‚¬ë‹¤.! ë³¸ê²©ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì²´í™”í•´ë³´ì.</p>\n<p>ìš°ì„  Question ëª¨ë¸ì€ ë§Œë“¤ì—ˆìœ¼ë‹ˆ, ì´ì— í•´ë‹¹í•˜ëŠ” Answerì— ëŒ€í•œ apië¥¼ êµ¬ì²´í™”í•´ë³´ì.</p>\n<h1 id=\"answer-model\" style=\"position:relative;\"><a href=\"#answer-model\" aria-label=\"answer model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Answer model</h1>\n<p>ìš°ì„ , Questionê³¼ Answerë¥¼ êµ³ì´ êµ¬ë¶„í•  í•„ìš”ëŠ” ì—†ì„ ê²ƒ ê°™ì•„, <code class=\"language-text\">qna</code>ë¼ëŠ” í•œ íŒ¨í‚¤ì§€ë¡œ ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ë„ë¡ í•˜ì. ì§ˆë¬¸ì— ëŒ€í•œ ê²ƒì€ <code class=\"language-text\">/qna/question</code>. ë‹µë³€ì€ <code class=\"language-text\">/qna/answer</code>ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ë°”ê¿€ ê²ƒì´ë‹¤.</p>\n<p>answer modelì˜ ì‘ì„± ë° ìˆ˜ì •ì€ <code class=\"language-text\">ì¥ê³  ê´€ë¦¬ì í˜ì´ì§€</code>ì—ì„œë§Œ ê°€ëŠ¥í•˜ë„ë¡ í•˜ì. ë”°ë¼ì„œ, apië‹¨ì—ì„œëŠ” <strong>ì½ê¸°ë§Œ ê°€ëŠ¥í•˜ë„ë¡ í•˜ì!</strong> ì´ëŠ” <code class=\"language-text\">allowed_methods</code>ë¥¼ GETë§Œ ì„¤ì •í•´ì£¼ë©´ ë  ê²ƒì´ë‹¤.</p>\n<p>ë˜í•œ, itemì— ëŒ€í•œ <strong>ì§ˆë¬¸ê³¼ ëŒ€ë‹µ</strong>ì„ í•œë²ˆì— í™•ì¸í•˜ëŠ” apiê°€ ìˆìœ¼ë©´ ì¢‹ìœ¼ë‹ˆ ì´ë¥¼ <code class=\"language-text\">AnswerModelViewSet</code>ì— ë„£ì–´ì£¼ë„ë¡ í•˜ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">AnswerModelViewSet</span><span class=\"token punctuation\">(</span>viewsets<span class=\"token punctuation\">.</span>ModelViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    queryset <span class=\"token operator\">=</span> Answer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    serializer_class <span class=\"token operator\">=</span> AnswerSerializer\n    allowed_methods <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># only for get (ë‹µë³€ì€ ê´€ë¦¬ìí˜ì´ì§€ì—ì„œ ì‘ì„±í•˜ë¯€ë¡œ, ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ê¸°ë§Œ í•˜ë©´ ë¨)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># íŠ¹ì • item_codeì— ëŒ€í•œ QNA ë³´ì—¬ì£¼ë„ë¡ /qna/answer/?item_code=2</span>\n        queryset <span class=\"token operator\">=</span> Answer<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        item_id <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query_params<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'item_code'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> item_id <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span>\n            queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>question__item<span class=\"token operator\">=</span>item_id<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> queryset</code></pre></div>\n<p>item_codeì— ëŒ€í•œ query parameterë¥¼ ì…ë ¥ë°›ì•„, item_idì— ë”°ë¼ í•´ë‹¹í•˜ëŠ” Answer querysetì„ ë¦¬í„´í•˜ë„ë¡ í•˜ë©´ ëœë‹¤! <u>ì–¸ë”ë°”(_) ë‘ê°œë¡œ foreign keyì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</u></p>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, answer serializer í´ë˜ìŠ¤ë¥¼ ë³´ì. ModelSerializerë¡œ ë‹¨ìˆœí•˜ê²Œ êµ¬í˜„í•˜ë©´, questionì˜ idë§Œ ë³´ì—¬ì§€ê²Œ ë  ê²ƒì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì¥ê³ ëŠ” ì°¸ì¡° ê°ì²´ì˜ PKë¥¼ ë³´ì—¬ì£¼ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì°¸ì¡° ê°ì²´ë¥¼ ëª¨ë‘ ë³´ì—¬ì¤˜ì•¼ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"answer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ì•ˆë…•í•˜ì„¸ìš” íŒë§¤ìì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"date_created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-05-14\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"question\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"answer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ë‹µë³€ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"date_created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-05-14\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"question\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>AnswerSerializerì—ì„œ question fieldë¥¼ QuestionSerializerë¡œ ê°€ì ¸ì˜¤ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">AnswerSerializer</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> QuestionSerializer<span class=\"token punctuation\">(</span>read_only<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># question ë‚´ìš©ë„ ë³´ì—¬ì£¼ê¸°</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        model <span class=\"token operator\">=</span> Answer\n        fields <span class=\"token operator\">=</span> <span class=\"token string\">\"__all__\"</span></code></pre></div>\n<p>ì´ë ‡ê²Œ í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"question\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"th*******ae\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ë°°ì†¡ ê´€ë ¨ ë¬¸ì˜\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"í•´ë‹¹ ìƒí’ˆì„ ì˜¤ëŠ˜ ì‹œí‚¤ë©´ ì–¸ì œì¯¤ ë„ì°©í• ê¹Œìš”?\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"date_created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-05-13\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"item\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"answer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ì•ˆë…•í•˜ì„¸ìš” íŒë§¤ìì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"date_created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-05-14\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"question\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"th*******ae\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ë°°ì†¡ ê´€ë ¨ ë¬¸ì˜2\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"í•´ë‹¹ ìƒí’ˆì„ ì˜¤ëŠ˜ ì‹œí‚¤ë©´ ì–¸ì œì¯¤ ë„ì°©í• ê¹Œìš”?\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"date_created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-05-13\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"item\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"answer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ë‹µë³€ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"date_created\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-05-14\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>ê²°ê³¼ëŠ” ìœ„ì™€ ê°™ì„ ê²ƒì´ë‹¤! ì‹¤ì œ ì„œë¹„ìŠ¤ë¼ë©´ Serializerë¥¼ ë³€ê²½í•˜ì—¬ ë³´ì—¬ì¤„ í•„ë“œì™€ ë³´ì—¬ì§€ë©´ ì•ˆë˜ëŠ” í•„ë“œë¥¼ êµ¬ë¶„í•˜ê³  ë°ì´í„°ë¥¼ ì •ì œí•  í•„ìš”ê°€ ìˆë‹¤.</p>\n<h1 id=\"item-list-pagination\" style=\"position:relative;\"><a href=\"#item-list-pagination\" aria-label=\"item list pagination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Item List Pagination</h1>\n<p><code class=\"language-text\">Pagination</code>ì´ë€, ë§ì€ ì–‘ì˜ ë°°ì—´ì„ í˜ì´ì§€ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì˜ë¯¸í•œë‹¤. í•´ë‹¹ ì„œë¹„ìŠ¤ì—ì„œëŠ” ë©”ì¸í˜ì´ì§€ì—ì„œ ëª¨ë“  ìƒí’ˆì„ ë³´ì—¬ì£¼ëŠ”ë°, ë§¤ ì‹œì ë§ˆë‹¤ ëª¨ë“  ìƒí’ˆì„ ê°€ì ¸ì™€ì„œ ë³´ì—¬ì£¼ëŠ” ê²ƒì€ ë¹„ì‹¸ë¯€ë¡œ, í˜ì´ì§€ë¥¼ ë‚˜ëˆ„ì–´ ë³´ì—¬ì£¼ë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ì•„ë³´ì¸ë‹¤.!</p>\n<p>DRFì—ì„œëŠ” Paginationì„ ìœ„í•œ í´ë˜ìŠ¤ê°€ ì œê³µëœë‹¤. <a href=\"https://www.django-rest-framework.org/api-guide/pagination/\">ê³µì‹ë¬¸ì„œ</a></p>\n<p>ìš°ë¦¬ëŠ” <code class=\"language-text\">item/basic/</code> GET ë©”ì†Œë“œì— ëŒ€í•˜ì—¬ë§Œ paginationì„ ì œê³µí•  ì˜ˆì •ì´ë‹¤. ìš°ì„ , <code class=\"language-text\">pagination.py</code>ì—ì„œ ìš°ë¦¬ê°€ ì‚¬ìš©í•  í˜ì´ì§€ ì •ì±…ì„ ì •ì˜í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>pagination <span class=\"token keyword\">import</span> PageNumberPagination\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ItemPagination</span><span class=\"token punctuation\">(</span>PageNumberPagination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    page_size <span class=\"token operator\">=</span> <span class=\"token number\">10</span></code></pre></div>\n<p>ì´í›„, Item Viewì—ì„œ ì´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ë©´ ëœë‹¤. item/views.pyì— pagination_classë¥¼ ì¶”ê°€í•´ì£¼ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ItemModelViewSet</span><span class=\"token punctuation\">(</span>viewsets<span class=\"token punctuation\">.</span>ModelViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    queryset <span class=\"token operator\">=</span> Item<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    serializer_class <span class=\"token operator\">=</span> ItemSerializer\n    pagination_class <span class=\"token operator\">=</span> ItemPagination\n    allowed_methods <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># only for get method</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>ê·¸ëŸ¼, <code class=\"language-text\">/item/basic/</code> ì˜ ê²°ê³¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì˜¤ê²Œ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"count\"</span><span class=\"token operator\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"next\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:8000/item/basic/?page=2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"previous\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"results\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"item_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Iphone U14\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1700000</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"stock_count\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        ...\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"item_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Iphone test3\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1700000</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"stock_count\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê¸°ì¡´ apiì™€ ë‹¤ë¥¸ ì ì„ ë³´ë©´, countì™€ next/previousê°€ ì œê³µë˜ì–´ í”„ë¡ íŠ¸ì—ì„œ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Pagination componentë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆê³ , ê¸°ì¡´ì— ì „ë‹¬ë˜ë˜ ë°ì´í„°ëŠ” ìœ„ì—ì„œ ì„¤ì •í•œ ê²ƒì²˜ëŸ¼ 10ê°œì”© ëŠì–´ì„œ results ë°°ì—´ì— ë“¤ì–´ê°€ê²Œ ëœë‹¤!</p>\n<p>ì˜¤ëŠ˜ê¹Œì§€ ì¥ê³ ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì¸ permission, authentication, ê·¸ë¦¬ê³  pagination ë“±ì„ ê³µë¶€í•´ë³´ì•˜ë‹¤. ë‹¤ìŒì—ëŠ” ì•„ì´í…œ í˜ì´ì§€ë¥¼ êµ¬ì²´í™”í•˜ê³ , <code class=\"language-text\">ì•„ì´í…œ êµ¬ë§¤</code>ì™€ ê´€ë ¨í•œ ë¡œì§ì„ ë§Œë“¤ì–´ë³´ë„ë¡ í•˜ì! <a href=\"https://github.com/choieastsea/market-guri-django/commit/6763ffd6f0b828a23f97e5437705f16bb43bcc2e\">ì½”ë“œ</a></p>","frontmatter":{"date":"May 12, 2023","title":"(Django) ì¥ê³  api ì„œë²„ë¥¼ ì´ìš©í•œ í”„ë¡œì íŠ¸ [11- ëª¨ë¸ êµ¬ì²´í™”, ì°¸ì¡° ëª¨ë¸ êµ¬í˜„]","categories":"BE","author":"choieastsea","emoji":"ğŸ™„"},"fields":{"slug":"/Django(11)- model advanced/"}},"prev":{"id":"022c18c1-b2d0-5e01-bc62-931440b696f2","html":"<h1 id=\"ìš´ì˜ì²´ì œë€\" style=\"position:relative;\"><a href=\"#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%9E%80\" aria-label=\"ìš´ì˜ì²´ì œë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìš´ì˜ì²´ì œë€?</h1>\n<blockquote>\n<p>OS</p>\n<p>Operating System</p>\n</blockquote>\n<p>ìš´ì˜ì²´ì œê°€ ì—†ëŠ” ì»´í“¨í„°ë„ ì¡´ì¬í•  ìˆ˜ ìˆì§€ë§Œ, ë¬¸êµ¬ì ì—ì„œ ì‚´ ìˆ˜ ìˆëŠ” ê³„ì‚°ê¸°ì™€ ê°™ì´ ê³ ì •ëœ ê¸°ëŠ¥ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. Programmableí•œ ê¸°ê³„ì—ëŠ” ìš´ì˜ì²´ì œê°€ í•„ìš”í•  ê²ƒì´ë‹¤..!</p>\n<p><strong>ìš´ì˜ì²´ì œëŠ” í”„ë¡œê·¸ë¨ë“¤ì´ ì‹¤í–‰ë˜ê³ , ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•´ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê±°ë‚˜, ìì›ì„ ë³´í˜¸í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´</strong>ì´ë‹¤.</p>\n<h3 id=\"ìš´ì˜ì²´ì œëŠ”-ìì›ì„-ì–´ë–»ê²Œ-ê´€ë¦¬í•˜ê³ -ë³´í˜¸í• ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%8A%94-%EC%9E%90%EC%9B%90%EC%9D%84-%EC%96%B4%EB%96%BB%EA%B2%8C-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B3%A0-%EB%B3%B4%ED%98%B8%ED%95%A0%EA%B9%8C\" aria-label=\"ìš´ì˜ì²´ì œëŠ” ìì›ì„ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ê³  ë³´í˜¸í• ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìš´ì˜ì²´ì œëŠ” ìì›ì„ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ê³  ë³´í˜¸í• ê¹Œ?</h3>\n<p>OSëŠ” physical(cpu, memory, HDD ë“± ëª¨ë“  ì¥ì¹˜)ì— ëŒ€í•˜ì—¬ ì‚¬ìš©ìê°€ <strong>ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡</strong> í•œë‹¤. ì´ëŸ¬í•œ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” <code class=\"language-text\">interface</code>ë¥¼ í†µí•˜ì—¬ ì‚¬ìš©ìê°€ ìì›ì— ì •í•´ì§„ ë°©ë²•ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•œë‹¤. ì´ëŸ¬í•œ ì—­í• ì„ <code class=\"language-text\">Virtualization</code>(ê°€ìƒí™”)ë¼ê³  í•˜ë©°, OSë¥¼ virtural machineìœ¼ë¡œ ë³´ëŠ” ê²¬í•´ë„ ì¡´ì¬í•œë‹¤.</p>\n<p>ìë™ì°¨ë¥¼ ë³´ë©´, ì‚¬ìš©ìê°€ ì—”ì§„ì„ ì§ì ‘ ì œì–´í•œë‹¤ê¸° ë³´ë‹¤ëŠ” ì—‘ì…€ê³¼ ê¸°ì–´ ë“±ìœ¼ë¡œ(ì •í•´ì§„ ë°©ë²•ì„ í†µí•´ì„œ) ì—”ì§„ì„ ì»¨íŠ¸ë¡¤í•˜ê³  ì—”ì§„ì„ ì§ì ‘ ë³´ëŠ” ê²ƒì´ ì•„ë‹Œ ê³„ê¸°íŒì„ í†µí•´ ì—”ì§„ì˜ ìƒíƒœë¥¼ ë³´ëŠ” ê²ƒê³¼ ìœ ì‚¬í•˜ë‹¤.</p>\n<p>ë”°ë¼ì„œ, ìš´ì˜ì²´ì œëŠ” <strong>ì‚¬ìš©ìì—ê²Œ í¸ë¦¬í•œ ì¸í„°í˜ì´ìŠ¤ í™˜ê²½ì„ ì œê³µí•˜ê³  ì»´í“¨í„° ì‹œìŠ¤í…œì˜ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´</strong>ë¼ê³  ì •ì˜í•  ìˆ˜ ìˆë‹¤. OSì˜ ëª©ì ì´ ì´ê²ƒì´ë¯€ë¡œ, ì´ë¥¼ ìœ„í•´ ìì›ì„ ê°€ìƒí™”í•˜ê³ , ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•˜ì—¬ ì ‘ê·¼í•˜ë„ë¡ í•˜ê³ â€¦ ë“±ìœ¼ë¡œ êµ¬ì„±ëœ ê²ƒì´ë¼ê³  ë³´ë©´ ë  ê²ƒ ê°™ë‹¤.</p>\n<h1 id=\"ìš´ì˜ì²´ì œì˜-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EC%9D%98-%EA%B5%AC%EC%84%B1\" aria-label=\"ìš´ì˜ì²´ì œì˜ êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìš´ì˜ì²´ì œì˜ êµ¬ì„±</h1>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 135.55555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEHElEQVRIx42VW0xcVRSGv3MGZoCCtAgVKdIGxLYIQsdSwKHQ4aqUkhYU2oIlXrjaeqEMzB5EKqEasBo11YR4qYnGFxNNTGN8EuOLT76YmBpNfNTEl9YYEVM4y+wzezpTAk13sufszMz59lrrXxe4eaUBI0AvcBJ4ERgFugEFHAf6gWQ2XUrAPxI9J6dvAWaAF8xeMOBzwOvAeWAeSL018EeBMn0xPuBp4BljXQdQA7QBlUATEDaebAr0EVq2OfN7Mu+JvvkBsB4GTgBDYNWCdQjLbsCym7A8Ze57Qz/D0JWoQbFtgEdRMo6SQZRznFXxut/vDKYAfu64B0p6YG8PlJ2C6glYFHhLIHwdIvq5BsqJbpTTTUQ6mPyvnNByFd8IPP+nRuZh2UNM/JtGz1d3MvzrdoZ/yWPsai6fylYuShaTK9uZFg9qLWqhhjMjSYRXg8xKkHlpcPf7EmDoygkaXlvgI6nhggSZlkeYlRaU00b35RF6l07xknS570Zcl+0o8Oxf2cxIOzsbiihsbaX4SBsF9X3kB7rIKa3F8jwBVLlCiBunY0AE2E92SSYz0sCHxjo3js/+kcOr8pBRsd+o+A5wGtCwL4Hn8PjqsJNewfJ8jcd7Go/vKBn5dzMndYxdS4sLM3Y1izk5BOwiIz8Lyw5g2XX4MlPxeDNdgXZ3gmXrZN5mUiYTb3oxEyvasibUWlYcOCXZhK+30n4plkhJ5nkv0GDO9oYpp1VWThMRyYkDlZNDRFpYEGi9mJTw91zj8vqLoqvjY4+JWzPKyb4ZqKSFc7HEZKupVQ9QDGQAO4DOdQVhG0gjSu5KAEoUuHgDeNA0hHeBWeAz4AMjWNx9JZaB1KCkMJrYYsWBF24Ai4w1A0ApUA00a2nWWRgD+lGy15xvAFujN6ytD77fNIyNekAMWIaS8o2BEyv2OlV1DFM2B7puFqOkKhGY7QK1Yt2Xo0p6Uu7HTurFk7IPb/ou7ORGkrcUuL89+YPF+N9WgiiFKKk1Z1t/bENJkwtcE6gYxMRQN1Kd8GeARbet1U7DpYQyi+4dKAkkWOj4UNKJkjxCy7nMSwFdn9fz6BfN9C4F6f++nrFrfpRTypSUoBwtwB4Tu0qUPI6S/XGge5tThnIOu2UUXj3ItPhZkgIqBsbZfewNPpEiQsuVKEe/eADlHDDq3mc0sOJ5GDM/YnZ4FX4T6PtWu54DBKgOwXcC5wVmRbc8eNk85wS3Cz04atSKmIScEpvQPzbz2uxYsaXuwUo66Z5F4grHzgM/WdzGsky1BM2g0hVzBNgHpJtuYyeMUp0ZXnPO2gioa3cYqDAQnS7lZlY3m/GqL3obeNM02wngKWDwVsBuN37RwT8JHDYjNWA6eKMZr8Xmcp1i7RsBtUtngT4DGzVWPXY78foffO+o6MyDxioAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"os\" title=\"os\" src=\"/static/8899fcdb131df900902558feb87eaaf1/37523/os-1.png\" srcset=\"/static/8899fcdb131df900902558feb87eaaf1/e9ff0/os-1.png 180w,\n/static/8899fcdb131df900902558feb87eaaf1/f21e7/os-1.png 360w,\n/static/8899fcdb131df900902558feb87eaaf1/37523/os-1.png 720w,\n/static/8899fcdb131df900902558feb87eaaf1/00d43/os-1.png 1000w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>ìš´ì˜ì²´ì œì—ì„œ ìì›ì„ ê´€ë¦¬í•˜ëŠ” í•µì‹¬ì€ <code class=\"language-text\">kernel</code>(ì»¤ë„)ì—ì„œ ë‹´ë‹¹í•œë‹¤. application(ì‘ìš© í”„ë¡œê·¸ë¨)ì—ì„œëŠ” resourceì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ kernelì„ í†µí•´ì•¼(ì»¤ë„ ëª¨ë“œ) í•˜ë©°, ì´ëŠ” <code class=\"language-text\">system call</code>ì„ í˜¸ì¶œí•˜ì—¬ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Cì–¸ì–´ì—ì„œ í‘œì¤€ ì‰˜ ì…ì¶œë ¥ì— ì‚¬ìš©ë˜ëŠ” <code class=\"language-text\">printf</code>í•¨ìˆ˜ëŠ” OSì˜ ì…ì¶œë ¥ì„ ë‹´ë‹¹í•˜ëŠ” ì–´ë– í•œ ì‹œìŠ¤í…œ ì½œì„ í˜¸ì¶œí•  ê²ƒì´ë‹¤.</p>\n<p>ì»¤ë„ì€ ìì›(ì¥ì¹˜)ì„ driverë¥¼ í†µí•´ ì¥ì¹˜ë¥¼ ë…ì í•˜ëŠ” ê²ƒì²˜ëŸ¼ ê°€ìƒí™”í•˜ì—¬ ì ‘ê·¼í•œë‹¤. driverëŠ” í•˜ë“œì›¨ì–´ë§ˆë‹¤ ë‹¬ë¼ ì´ë¯¸ OSì— êµ¬í˜„ì´ ë˜ì–´ìˆì„ìˆ˜ë„ ìˆê³ , ì¶”ê°€ì ìœ¼ë¡œ ì„¤ì¹˜í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•´ì•¼í•  ìˆ˜ë„ ìˆë‹¤. ë˜í•œ, ë“œë¼ì´ë²„ëŠ” ì»¤ë„ ë‚´ë¶€ì— êµ¬í˜„ì´ ë˜ì–´ ìˆì–´ ì»¤ë„ì—ì„œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ë„ ìˆë‹¤.</p>\n<h1 id=\"ìš´ì˜ì²´ì œì˜-3ê°€ì§€-ê°œë…\" style=\"position:relative;\"><a href=\"#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EC%9D%98-3%EA%B0%80%EC%A7%80-%EA%B0%9C%EB%85%90\" aria-label=\"ìš´ì˜ì²´ì œì˜ 3ê°€ì§€ ê°œë… permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìš´ì˜ì²´ì œì˜ 3ê°€ì§€ ê°œë…</h1>\n<p><code class=\"language-text\">OSTEP</code>ì´ë¼ëŠ” ì±…ì—ì„œëŠ” OSì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê°œë…ìœ¼ë¡œ <code class=\"language-text\">Virtualization</code>, <code class=\"language-text\">Concurrency</code>, <code class=\"language-text\">Persistence</code>ë¥¼ ì–¸ê¸‰í•œë‹¤. ê°„ë‹¨í•˜ê²Œ ì˜ë¯¸ë¥¼ ìƒê°í•´ë³´ë©´ì„œ ìš´ì˜ì²´ì œ ë³µìŠµì„ ë³¸ê²©ì ìœ¼ë¡œ ì‹œì‘í•´ë³´ì.</p>\n<ol>\n<li>\n<p>Virtualization(ê°€ìƒí™”)</p>\n<ol>\n<li>\n<p>CPU ê°€ìƒí™”</p>\n<p>Processor(CPU)ê°€ í•˜ë‚˜ì—¬ë„ ë™ì‹œì— ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤! CPUëŠ” í•œë²ˆì— í•œê°€ì§€ ì¼ë§Œ ì²˜ë¦¬í•œë‹¤ê³  ë°°ì› ëŠ”ë°, ë§ˆì¹˜ ë§ì€ ìˆ˜ì˜ ê°€ìƒì˜ CPUê°€ ì¡´ì¬í•˜ëŠ” ë“¯í•œ illusionì´ ë³´ì¸ë‹¤. ì´ë¥¼ CPU ê°€ìƒí™”ë¼ê³  í•˜ë©°, í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê³  ë©ˆì¶”ê³  ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„ íƒí•  ì§€ ë“±ì„ OSê°€ ì„ íƒí•˜ê¸° ìœ„í•´ì„œëŠ” ë§ì€ ê·œì¹™ë“¤ì´ ì¡´ì¬í•˜ë©° ì´ê²ƒì„ ë°°ìš¸ í•„ìš”ê°€ ìˆë‹¤.</p>\n</li>\n<li>\n<p>ë©”ëª¨ë¦¬ ê°€ìƒí™”</p>\n<p>ë©”ëª¨ë¦¬ ì—­ì‹œ processê°€ í•˜ë‚˜ì˜ ë…ë¦½ì ì¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë³´ì¥ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì²˜ëŸ¼  ë³´ì´ëŠ”ë°, ì´ëŠ” Memory virtualizationì´ ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŸ¬í•œ ê°€ìƒí™”ë¥¼ í†µí•˜ì—¬ OSëŠ” ëª©í‘œ(í¸ë¦¬í•˜ê³  ì•ˆì „í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ìì›ì„ ê´€ë¦¬)ë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</p>\n</li>\n</ol>\n</li>\n<li>\n<p>Concurrency(ë™ì‹œì„±)</p>\n<p>ProcessëŠ” ë™ì‹œì— ë§ì€ ì¼ë“¤ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ <code class=\"language-text\">Thread</code>ë¥¼ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬í•œë‹¤. ì´ëŸ¬í•œ multi threadí™˜ê²½ì—ì„œëŠ” ê³µìœ ë˜ëŠ” ë°ì´í„°ë¥¼ ì •ë§ ì˜ ê³µìœ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì—¬ì•¼ ë™ì‹œì„±ì´ ë§Œì¡±ë˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ë™ì‹œì„±ì„ í™œìš©í•˜ì—¬ ì‘ì—…ë‹¨ìœ„ë¥¼ ë¶„í• í•˜ê³  ë³‘ë ¬ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</p>\n</li>\n<li>\n<p>Persistence(ì˜ì†ì„±)</p>\n<p>ë©”ëª¨ë¦¬ì™€ ë‹¬ë¦¬ ë³´ì¡° ê¸°ì–µ ì¥ì¹˜ëŠ” ì»´í“¨í„°ê°€ ì¢…ë£Œë˜ë”ë¼ë„ ë°ì´í„°ê°€ ë‚¨ì•„ìˆëŠ”ë‹¤. ì´ëŠ” <code class=\"language-text\">file system</code>ìœ¼ë¡œ ë””ìŠ¤í¬ ë“±ì˜ ì €ì¥ì¥ì¹˜ê°€ ì¶”ìƒí™”ë˜ì–´ êµ¬í˜„ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ ì €ì¥ì¥ì¹˜ì™€ì˜ I/OëŠ” ë³„ë„ì˜ ê°€ìƒí™”ë¥¼ ê±°ì¹˜ì§€ ì•Šìœ¼ë©° ì˜ì†ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•  í•„ìš”ê°€ ìˆë‹¤.</p>\n</li>\n</ol>\n<h2 id=\"ìš´ì˜ì²´ì œì˜-ëª©í‘œ\" style=\"position:relative;\"><a href=\"#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EC%9D%98-%EB%AA%A9%ED%91%9C\" aria-label=\"ìš´ì˜ì²´ì œì˜ ëª©í‘œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìš´ì˜ì²´ì œì˜ ëª©í‘œ</h2>\n<p>ìš´ì˜ì²´ì œì˜ ëª©í‘œì— ëŒ€í•˜ì—¬ êµ¬ì²´ì ìœ¼ë¡œ ìƒê°í•´ë³´ì. í•´ë‹¹ ë‚´ìš©ì€ OSTEPì˜ ë²ˆì—­ë³¸ì—ì„œ ë°œì·Œí–ˆë‹¤.</p>\n<p>ê°€ì¥ ê¸°ë³¸ì ì¸ ëª©í‘œëŠ” ì‹œìŠ¤í…œì„ í¸ë¦¬í•˜ê³  ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ ë§Œë“œëŠ” ë° í•„ìš”í•œ <code class=\"language-text\">ê°œë…</code>(abstraciton)ë“¤ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ë‹¤. í•´ë‹¹ ì¶”ìƒí™”ë¡œ ë§ì€ ê²ƒë“¤ì„ ì§ì ‘ êµ¬í˜„í•˜ê³  ìƒê°í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.</p>\n<p>ë‹¤ìŒìœ¼ë¡œëŠ” <code class=\"language-text\">ì„±ëŠ¥</code>ì´ë‹¤. ì„±ëŠ¥ì€ ì£¼ë¡œ minimize overheadì— ì´ˆì ì„ ë§ì¶˜ë‹¤. silver bulletì€ ì—†ìœ¼ë¯€ë¡œ, ìµœëŒ€í•œì˜ ì ˆì¶©ì•ˆì„ ì°¾ì•„ì„œ ê°€ì•¼í•  ê²ƒì´ë‹¤.</p>\n<p>ë˜í•œ, OSì™€ í”„ë¡œê·¸ë¨, í˜¹ì€ í”„ë¡œê·¸ë¨ë“¤ ê°„ì˜ <code class=\"language-text\">ë³´í˜¸</code>ì´ë‹¤. ê° í”„ë¡œì„¸ìŠ¤ë“¤ì€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë“¤ë¡œë¶€í„° ê³ ë¦½(isolation)ë˜ì–´ìˆì–´ì•¼ í•˜ë©°, ì´ëŠ” ë³´í˜¸ì˜ í•µì‹¬ì´ë‹¤.</p>\n<p>ê·¸ë¦¬ê³ , <code class=\"language-text\">ì‹ ë¢°ì„±</code>ì´ë‹¤. ìš´ì˜ì²´ì œëŠ” ì»´í“¨í„°ì˜ ì‹¤í–‰ê³¼ ë™ì‹œì— ê³„ì† ì‹¤í–‰ì¤‘ì´ì—¬ì•¼í•˜ë¯€ë¡œ, ë†’ì€ ì‹ ë¢°ì„±ì„ ì œê³µí•´ì•¼ í•œë‹¤. ì¶”ê°€ì ìœ¼ë¡œ ì—ë„ˆì§€ íš¨ìœ¨ì„±, ë³´ì•ˆ, ë„¤íŠ¸ì›Œí¬ì—ì„œì˜ ì´ë™ì„± ë“±ì´ ìˆë‹¤.</p>\n<p>ìœ„ì˜ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ìš°ë¦¬ëŠ” ìš´ì˜ì²´ì œê°€ ì–´ë–¤ ê¸°ëŠ¥ë“¤ì´ ì œê³µë˜ê³ , ì–´ë–¤ ê³ ë¯¼ë“¤ì„ í•´ì„œ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€ ê³µë¶€í•´ë³¼ í•„ìš”ê°€ ìˆë‹¤!</p>\n<p>ìš°ë¦¬ëŠ” ìš´ì˜ì²´ì œ ê°œë°œìê°€ ì•„ë‹ˆì§€ë§Œ, ë³´í†µ ìš´ì˜ì²´ì œ ìœ„ì—ì„œ ëŒì•„ê°€ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“œë¯€ë¡œ ìš´ì˜ì²´ì œë¥¼ ì•Œì•„ì•¼ í•  ê²ƒì´ë‹¤.</p>\n<h3 id=\"ì¶œì²˜\" style=\"position:relative;\"><a href=\"#%EC%B6%9C%EC%B2%98\" aria-label=\"ì¶œì²˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¶œì²˜</h3>\n<p><a href=\"https://pages.cs.wisc.edu/~remzi/OSTEP/\">OSTEP</a></p>\n<p>ì‰½ê²Œ ë°°ìš°ëŠ” ìš´ì˜ì²´ì œ â€˜ì¡°ì„±í˜¸â€™</p>","frontmatter":{"date":"June 26, 2023","title":"(OS) ìš´ì˜ì²´ì œ ë³µìŠµ [1. ìš´ì˜ì²´ì œì˜ ê°œìš”]","categories":"OS","author":"choieastsea","emoji":"ğŸ™„"},"fields":{"slug":"/OS(1)-intro/"}},"site":{"siteMetadata":{"siteUrl":"https://choieastsea.github.io","comments":{"utterances":{"repo":"choieastsea/choieastsea.github.io"}}}}},"pageContext":{"slug":"/Django(12)- nested model & serializer/","nextSlug":"/Django(11)- model advanced/","prevSlug":"/OS(1)-intro/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}