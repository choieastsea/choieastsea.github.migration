{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/Alg-BOJ-11279/",
    "result": {"data":{"cur":{"id":"1ba33787-0d65-5547-85b1-f5f258c16047","html":"<p>이제 백준 문제를 풀어보려고 한다. 최대힙과 관련된 문제이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\">문제 #11279\n널리 잘 알려진 자료구조 중 최대 힙이 있다. 최대 힙을 이용하여 다음과 같은 연산을 지원하는 프로그램을 작성하시오.\n\n배열에 자연수 x를 넣는다.\n배열에서 가장 큰 값을 출력하고, 그 값을 배열에서 제거한다.\n프로그램은 처음에 비어있는 배열에서 시작하게 된다.</code></pre></div>\n<p>단순하게 최댓값만 뽑아서 리턴해도 되지만, 최대힙을 사용하라해서 문제에 맞게 다시 구현해보았다.</p>\n<h2 id=\"백준에서-js를-사용하는-방법\" style=\"position:relative;\"><a href=\"#%EB%B0%B1%EC%A4%80%EC%97%90%EC%84%9C-js%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"백준에서 js를 사용하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>백준에서 JS를 사용하는 방법</h2>\n<p>백준에서는 node js만 가능하고, 입력을 file system을 통하여 받아야한다. 따라서 기본적으로 <code class=\"language-text\">fs</code>모듈의 <code class=\"language-text\">readFileSync(\"/dev/stdin\")</code>으로 가져오며 이후에 입력에 따라 재가공하면 된다. 나는 로컬에 stdin.txt파일을 만들어서 테스트한 후 제출하였다.</p>\n<h2 id=\"최대힙\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EB%8C%80%ED%9E%99\" aria-label=\"최대힙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최대힙</h2>\n<p>최대힙은 부모 노드의 값이 자식노드의 값보다 크거나 같은 완전이진트리이다. 0번째 인덱스가 <code class=\"language-text\">null</code>인 배열로 자식과 부모간 인덱스 이동이 가능하므로 간단하게 구현 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> lines <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/dev/stdin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// console.log(`lines : ${lines[0]}`);</span>\n\n<span class=\"token keyword\">const</span> MaxHeap <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  heap_list<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//부모와 자식 index 계산을 쉽게하기 위해 첫 인덱스에는 null값을 넣어주어 root index==1이 되도록 함</span>\n  <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//a번 index와 b번 index 원소 바꿔줌</span>\n    <span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//tmp로 swap하는게 구조분해보다 빠르긴 하므로 참고하자</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//배열에 값 없는 경우는 그냥 추가</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">heapify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">heapify</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentIndex</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//해당 index에서부터 root node까지 올라가면서 적절한 위치에 놔준다</span>\n    <span class=\"token comment\">// console.log(currentIndex);</span>\n    <span class=\"token keyword\">const</span> parentIndex <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>currentIndex <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentIndex <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>currentIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>parentIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//max heap 속성 위배하는 경우 swap</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>currentIndex<span class=\"token punctuation\">,</span> parentIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">heapify</span><span class=\"token punctuation\">(</span>parentIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//currentInde 1이하면 그냥 return</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//첫번째 인덱스를 마지막과 바꾼 후, 추출. 루트에서부터 내려오면서 힙 속성 만족시키기</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">swap</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> returnData <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverseHeapify</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> returnData<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">reverseHeapify</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentIndex</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//자식과 현재 노드의 크기를 비교하여 가장 큰 노드를 서브트리의 루트와 바꿔줘야한다.</span>\n    <span class=\"token keyword\">let</span> leftChildIndex <span class=\"token operator\">=</span> currentIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> rightChildIndex <span class=\"token operator\">=</span> currentIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//인덱스 오바되지 않도록 예외 처리</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>leftChildIndex <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>leftChildIndex <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//right child가 없는 경우</span>\n      rightChildIndex <span class=\"token operator\">-=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//leftchild와 일치시켜주자 그냥</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//셋 중 가장 큰 노드 찾기</span>\n    <span class=\"token keyword\">let</span> maxInd <span class=\"token operator\">=</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>leftChildIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>rightChildIndex<span class=\"token punctuation\">]</span>\n        <span class=\"token operator\">?</span> leftChildIndex\n        <span class=\"token operator\">:</span> rightChildIndex<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>maxInd<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>heap_list<span class=\"token punctuation\">[</span>currentIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//swap이 유의미해지는 경우.</span>\n      <span class=\"token comment\">//가장 큰 노드와 현재 노드 swqp</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>maxInd<span class=\"token punctuation\">,</span> currentIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">//바뀐 곳에서 다시 reverseHeapify</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverseHeapify</span><span class=\"token punctuation\">(</span>maxInd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> heap <span class=\"token operator\">=</span> MaxHeap<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> rtn <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> lines<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> input <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>lines<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>input <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//shift max heap</span>\n    rtn<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>heap<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//push input to max heap</span>\n    heap<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// console.log(`input : ${input} / heap : ${heap.heap_list}`);</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rtn<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>런타임에러가 나서 사례를 검색하였는데, console.log()를 여러번 해주지 말고 <u>버퍼에 넣어놨다가 마지막에 출력만 해주니 해결</u>되었다!</p>","excerpt":"이제 백준 문제를 풀어보려고 한다. 최대힙과 관련된 문제이다. 단순하게 최댓값만 뽑아서 리턴해도 되지만, 최대힙을 사용하라해서 문제에 맞게 다시 구현해보았다. 백준에서 JS를 사용하는 방법 백준에서는 node js만 가능하고, 입력을 file system을 통하여 받아야한다. 따라서 기본적으로 모듈의 으로 가져오며 이후에 입력에 따라 재가공하면 된다. 나는 로컬에 stdin.txt파일을 만들어서 테스트한 후 제출하였다. 최대힙 최대힙은 부모 노드의 값이 자식노드의 값보다 크거나 같은 완전이진트리이다. 0번째 인덱스가 인 배열로 자식과 부모간 인덱스 이동이 가능하므로 간단하게 구현 가능하다. 런타임에러가 나서 사례를 검색하였는데, console.log()를 여러번 해주지 말고 버퍼에 넣어놨다가 마지막에 출력만 해주니 해결되었다!","frontmatter":{"date":"February 19, 2022","title":"(Alg) 백준 11279 최대힙 JS","categories":"Alg","author":"choieastsea","emoji":"😬"},"fields":{"slug":"/Alg-BOJ-11279/"}},"next":{"id":"f6ef8e8f-999b-58d3-89ab-bab4c4f24f10","html":"<p>Web service with JavaScript(React and Express Js) + MySQL</p>\n<p>자바스크립트로 프론트와 백엔드를 모두 구축해보며 웹서비스에 대한 전반적인 이해도를 높여보자!</p>\n<h1 id=\"개발-환경\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD\" aria-label=\"개발 환경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개발 환경</h1>\n<p>아직 번들러를 다룰 줄 모르기에 간단하게 CRA로 웹서버를 구축해보았다. SQL도 할 줄 모르지만, 이 기회에 하면서 배워보도록 하자!</p>\n<ul>\n<li>\n<p>React.js with Create React App (<code class=\"language-text\">CRA</code>)</p>\n<p><a href=\"https://create-react-app.dev/\">https://create-react-app.dev/</a> 을 참고한다.</p>\n</li>\n<li>\n<p>Express.js</p>\n<p>Node.js 기반의 웹 서버를 구축할 수 있도록 만들어진 framework로 순수 Node.js로 서버를 구축하는 것보다 훨씬 편한 기능을 제공한다.</p>\n</li>\n<li>\n<p>MySQL</p>\n<p>관계형 DBMS로, SQL 쿼리를 통하여 데이터를 가져온다. api를 통하여 웹서버와 연동되어 CRUD를 수행하게 될 것이다.</p>\n</li>\n</ul>\n<h2 id=\"설치-환경\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98-%ED%99%98%EA%B2%BD\" aria-label=\"설치 환경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치 환경</h2>\n<ul>\n<li>node js &#x26; npm</li>\n</ul>\n<p><code class=\"language-text\">node -v</code>와 <code class=\"language-text\">npm -v</code>로 확인 가능</p>\n<ul>\n<li>MySQL</li>\n</ul>\n<p>설치되었다면 <code class=\"language-text\">mysql.server start</code>로 MySQL server 실행 가능, <code class=\"language-text\">mysql.server stop</code>으로 중단 가능하다.</p>\n<p><code class=\"language-text\">mysql -u [계정] -p [데이터베이스]</code>으로 원하는 db에 접속 가능하다.(이후 password 입력)</p>\n<p>이후, npm에서 <code class=\"language-text\">mysql2</code> 모듈을 설치하여 express 서버에서 sql문으로 데이터베이스에 접근할 수 있도록 해줘야 한다.</p>\n<h1 id=\"두가지-방법이-있습니다\" style=\"position:relative;\"><a href=\"#%EB%91%90%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95%EC%9D%B4-%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"두가지 방법이 있습니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두가지 방법이 있습니다.</h1>\n<p>Express로 웹서버를 먼저 실행하고 그 위에 리액트로 작성된 js파일을 빌드하여 나온 <code class=\"language-text\">index.html</code>을 응답해주는 방법으로 할 수 있다. (이는 실제 배포 환경에서 사용될 것)</p>\n<p>혹은, CRA로 개발 서버를 띄우고 Express 서버를 띄워서 접근에 대하여 프록시를 해줘 응답을 하는 방법이 있다. 나는 여기서 <strong>후자의 방법</strong>으로 해주었다. <a href=\"https://create-react-app.dev/docs/proxying-api-requests-in-development/%EB%A5%BC\">https://create-react-app.dev/docs/proxying-api-requests-in-development/를</a> 따라가면서 해보았다.</p>\n<h2 id=\"cra로-리액트-프로젝트-생성\" style=\"position:relative;\"><a href=\"#cra%EB%A1%9C-%EB%A6%AC%EC%95%A1%ED%8A%B8-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"cra로 리액트 프로젝트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CRA로 리액트 프로젝트 생성</h2>\n<p><code class=\"language-text\">npx create-react-app full-stack-in-js</code>로 프로젝트를 생성해준다.</p>\n<p><code class=\"language-text\">cd full-stack-in-js</code>로 접근하여 <code class=\"language-text\">npm start</code>(or yarn start)를 하면 <code class=\"language-text\">localhost:3000</code>에  CRA 초기 페이지(from react development server)가 나오는 것을 확인할 수 있다.</p>\n<h2 id=\"expressjs를-이용한-웹-서버-구축\" style=\"position:relative;\"><a href=\"#expressjs%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9B%B9-%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95\" aria-label=\"expressjs를 이용한 웹 서버 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Express.js를 이용한 웹 서버 구축</h2>\n<p>Express 모듈을 설치하고 package.json에 추가해준다. <code class=\"language-text\">npm install express --save</code> 명령어를 통하여 설치부터 package.json까지 한번에 작성할 수 있다. 추가적으로 <code class=\"language-text\">nodemon</code>패키지도 설치해주도록 하자.(노드 파일이 바뀌었을때 새로 서버를 시작하지 않고 바로 적용되도록 함)</p>\n<p>그리고 CRA로 만든 리액트 웹서비스와 별개로 js파일을 만들어주었다. 3000번 포트는 CRA서버와 겹치니까 3001번 포트로 웹서버를 구축하였다. 간단하게 Express공식사이트의 예제를 살짝 변형하였다. send 메서드를 통하여 request에 대한 response를 html로 보낼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// full-stack-in-js/server/server.js</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">3001</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;h1>Hello World!&lt;/h1>\n    &lt;!--script 안의 콘솔은 브라우저 콘솔창에 찍히게 된다.-->\n    &lt;script>console.log('hello world');&lt;/script>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  \t<span class=\"token comment\">//여기서의 콘솔은 서버가 돌아가는 콘솔에 찍히게 된다.</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'request'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//서버가 정상 실행되면 아래가 실행될 것이다.</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Example app listening at http://localhost:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>해당 파일이 있는 디렉토리에서 <code class=\"language-text\">npx nodemon server.js</code>와 같이 실행시켜주면 <code class=\"language-text\">localhost:3001</code>에 서버가 정상적으로 실행되는 것을 확인할 수 있다. (Example app listening at <a href=\"http://localhost:3001\">http://localhost:3001</a> 라고 터미널 콘솔에 나오는 것이 확인되야 함)</p>\n<h2 id=\"express와-cra를-연동-1-proxy-setting\" style=\"position:relative;\"><a href=\"#express%EC%99%80-cra%EB%A5%BC-%EC%97%B0%EB%8F%99-1-proxy-setting\" aria-label=\"express와 cra를 연동 1 proxy setting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Express와 CRA를 연동 (1) proxy setting</h2>\n<p>react dev server는 3000번 포트에서 실행되고 있고, Express는 3001번 포트에서 실행되고 있다. 여기서 express 서버와 react 개발 서버와 통신하기 위해 index.js를 다음과 같이 바꿔보자. 버튼을 만들어서 3001번 포트(express 서버)에 get방식으로 request를 보내는 것이다. 이러면 <code class=\"language-text\">CORS</code> 에러(한 서버프로그램에서 다른 서버 프로그램으로 데이터가 전송되지 않도록 브라우저 단에서 막는 정책)가 발생하게 된다.</p>\n<p>우리가 여기서 해줄 수 있는 방법은 두가지이다.</p>\n<ol>\n<li>\n<p><code class=\"language-text\">CORS</code> 처리를 해준다.</p>\n<p>express 서버에서 Acess Control Allow Origin설정을 해주어 3000번 포트(리액트 서버)에서 오는 요청을 받도록 header에 설정해주면 된다.</p>\n</li>\n<li>\n<p>proxy 처리를 해준다.</p>\n<p><code class=\"language-text\">package.json</code>에서 proxy 속성을 추가하여 리액트 개발서버에서 처리하지 못하는 api 요청에 대하여 3001번 포트의 express 서버로 모두 넘기도록 한다. 예를 들어, <code class=\"language-text\">axios.get('/api/get-data')</code>와 같은 요청에 대하여 react에서 라우팅이 처리되어 있지 않으므로 express서버로 넘겨서 처리하도록 하는 것으로 생각하면 된다.</p>\n</li>\n</ol>\n<p>2번 방식이 더 효율적인데, 이유는 express 서버의 포트가 바뀌는 것에 대하여 URI를 신경쓰지 않아도 되며 이후 쿠키(Cookie)등의 사용에서 권한 처리를 해주지 않아도 된다. 이는 생활코딩님의 <a href=\"https://www.youtube.com/watch?v=VaAWIAxvj0A\">강의</a>를 참고하였다.</p>\n<p>우리는 <strong>단지 package.json에 다음을 추가하면 된다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">//in package.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"proxy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:3001\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>참고: <a href=\"https://ljh86029926.gitbook.io/coding-apple-react/undefined-1/cra\">상황에 따라 여러 서버를 이용해야 한다면?</a></p>\n<h2 id=\"express와-cra를-연동-2-coding--test\" style=\"position:relative;\"><a href=\"#express%EC%99%80-cra%EB%A5%BC-%EC%97%B0%EB%8F%99-2-coding--test\" aria-label=\"express와 cra를 연동 2 coding  test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Express와 CRA를 연동 (2) coding &#x26; test</h2>\n<p>AJAX 통신 예제를 통하여 실제 데이터를 주고받아보자. App.js에 다음과 같이 작성해주었다. 버튼을 누르면 서버에 저장된 count 변수를 1씩 plus해주도록 하기 위해 다음과 같이 작성하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//App.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span> value<span class=\"token operator\">=</span><span class=\"token string\">\"plus\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/plus'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">//서버의 응답을 json형태로 받아 출력</span>\n          res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> margin<span class=\"token operator\">:</span> <span class=\"token string\">'10rem'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code class=\"language-text\">/api/plus</code> 요청은 react 개발서버에서 처리할 수 없으므로 package.json에 저장된 프록시 주소로 요청이 넘어갈 것이다. 따라서 express 서버에서는 이를 처리해주면 된다. 다음 코드를 추가해주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//plus버튼을 누르면 count 1씩 더해서 리턴</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/plus'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    count <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>이제 react와 express 서버 모두 실행시킨 상태에서 <code class=\"language-text\">localhost:3000</code>로 브라우저 콘솔창을 열어 작동하는지 확인해보자!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABAUlEQVQoz7WQW26DMBREvRNediAthKfBhKr7XwFKwc4C+OIbBFPhKG2IIlWkraWjkcfj0dUl+OND/q1wnucvvXLrPzXh/eetZbpwmibcMo4j+r7HMAy68P79Jx7usOu653fYNC2apkHbSkipUNe1vp9OH1DqrP2rLu/fnkIrF09CnRevhVQKRIgjOBfgeYmqegdjLhzKQJmLQrwhilLkxRFxwpFlAoWoEMWZzidpjjQtIMpLjvMSJAwTHfaDGL4fIjjEcPc+bGcHy2YrtR32wFvniOu9IuUCQZDBoR4M01mFt0LY7gV+EMHbH+BQF5ZNdeFFt0MMi8EwbT3ZgmnRX/EJZaC2Oy/A3+AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"react-express\"\n        title=\"react-express\"\n        src=\"/static/57b3f29795b58d2eeadf6cdebb852332/37523/react-express.png\"\n        srcset=\"/static/57b3f29795b58d2eeadf6cdebb852332/e9ff0/react-express.png 180w,\n/static/57b3f29795b58d2eeadf6cdebb852332/f21e7/react-express.png 360w,\n/static/57b3f29795b58d2eeadf6cdebb852332/37523/react-express.png 720w,\n/static/57b3f29795b58d2eeadf6cdebb852332/302a4/react-express.png 1080w,\n/static/57b3f29795b58d2eeadf6cdebb852332/081d5/react-express.png 1264w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>잘 작동한다~! 이제 웹서버와 리액트를 연동시킨 것을 확인하였으니 MySQL을 서버에 연결시켜보자.</p>\n<h2 id=\"db-연동\" style=\"position:relative;\"><a href=\"#db-%EC%97%B0%EB%8F%99\" aria-label=\"db 연동 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DB 연동</h2>\n<p>우선, mysql 서버가 실행되고 있어야한다. <code class=\"language-text\">mysql.server start</code>로 실행한 후 새로운 테이블을 만들어주었다. 나는 아직 SQL이 익숙하지 않아 GUI 기반의 <code class=\"language-text\">Sequel Pro</code> 프로그램을 이용하여 테이블을 만들어주었다. (이 과정에서 접속 오류가 있었는데 <a href=\"https://velog.io/@deannn/macOS-Sequel-Pro-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\">이 글을 보고</a> 해결하였다)</p>\n<p>MySQL이 로컬 컴퓨터에 설치 및 실행된 상태에서, npm을 통해 mysql 드라이버를 설치하여 DB와 js파일을 연동시켜주도록 하자. <code class=\"language-text\">mysql2</code>패키지는 데이터베이스와 자바스크립트가 연결되도록 api를 제공해준다. 비슷한 <code class=\"language-text\">mysql</code>패키지도 있지만, 이는 비동기적으로만 실행되므로 헷갈리므로 동기적 실행을 가능하게 하는 mysql2를 사용하였다. <code class=\"language-text\">npm install mysql2 --save</code>를 통해 설치하였다.</p>\n<p>위의 예시에서는 서버 파일이 실행될때 count가 0으로 초기화되었지만, count값을 db에서 가져오는 것으로 확장해보려고 한다.</p>\n<h3 id=\"db-연결-확인\" style=\"position:relative;\"><a href=\"#db-%EC%97%B0%EA%B2%B0-%ED%99%95%EC%9D%B8\" aria-label=\"db 연결 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DB 연결 확인</h3>\n<p>table명은 express이며, 정수형 field인 count를 만들어주고, 한 row만 만들어 해당 줄의 count를 0으로 초기화한 상태이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACcklEQVQ4y6WSy07bQBSGB7HrokJCzjOxtVBbZYcEAVXNhabdVn2ItupjsKuqXgWBhJKbSWKHxG48voIdkaAQ4no841NNIqC0gi5YfPrPSKNP55wZ9GHj3bxW+7rUNuRlx3JFjLFoW1i0bVusVKri7l5JLBZLYnGvKG5v74iSJImWZYmGYUwxTVN0XXcZY3Ppzdv38+jFenpR68iDI/UI1K4KGOtwKO1DXe5CVVKgVpdAbhTh2/cv0Gq1QNM0wBiDrutXlMtl+Pzp4yCbebqIVlPPEg3p0KtXJWhILdqWO0ztmcx2XOZ53jQNy2Gu67DBYMD6/f6U4XDITk5OmG3b1HEcUNWul8mkE2gjlRa6bdXrqQbomsXwTysOgiCmlMaURjGJaByENGaMxVHEz9E0I0qnNSGEsTiGySTwnufzAkqtpgSti30LH4Op28zEDlxcTCAkBH6FIYQcEl7X/8IIITA6P/dzuZyAUmvrgtbRfVN3wOjZjCcX8kvh7ZKbwiiC8yvh6kxoYfd+wvHYz21uXndo6dfCIAiAX+Jjk//DoiiajpzlHa790aGpO8zUbbBsF3zfh36/D8OzMxgOh3fBXxwMw/BXVlYElM2kBaWp+u2WCkeyyoyeDaenA76TG4xGo9tqNh6Pec52+PrVS6F60D7eL9ZAbrQjQ3foZDKhJCI0DEMakr/ysr4kDCMyG/l4KsxvZhPdtj7WOhj4X3QtD8KQAP9bjLFZ3gVjEAPwvY/z+XwCPX70ZGG3sLe1X/xRKh9UdmqVeqEuSQVJkgotWS4oilKQ70KWdxRFKTWbza1kMrmAEEJzCKEHCKGH94Q75n4DJJ97raGjqIwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20211215011607452\"\n        title=\"image-20211215011607452\"\n        src=\"/static/33685dd5cdc95b3587117d8aa533ad0a/37523/db.png\"\n        srcset=\"/static/33685dd5cdc95b3587117d8aa533ad0a/e9ff0/db.png 180w,\n/static/33685dd5cdc95b3587117d8aa533ad0a/f21e7/db.png 360w,\n/static/33685dd5cdc95b3587117d8aa533ad0a/37523/db.png 720w,\n/static/33685dd5cdc95b3587117d8aa533ad0a/302a4/db.png 1080w,\n/static/33685dd5cdc95b3587117d8aa533ad0a/07a9c/db.png 1440w,\n/static/33685dd5cdc95b3587117d8aa533ad0a/7da7d/db.png 2120w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span><code class=\"language-text\">server.js</code>에 다음을 추가해주었다. 우선 같은 파일 디렉토리에 비밀번호를 포함한 기본 정보를 담은 json파일을 분리해주었다(<code class=\"language-text\">.gitignore</code>에도 추가하여 비밀번호 깃허브 공유를 방지)</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">//db-config.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"host\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yourpassword\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"express\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 require문으로 접속 정보를 불러와 <code class=\"language-text\">connectPool()</code>로 연결해주었다. 여기서 createConnection과 createPool의 차이는 <a href=\"https://velog.io/@leitmotif/createConnection-vs-createPool\">여기에</a> 잘 정리되어 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> mysql <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mysql'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> db_config <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./db-config.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> connection <span class=\"token operator\">=</span> mysql<span class=\"token punctuation\">.</span><span class=\"token function\">createConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    host<span class=\"token operator\">:</span> db_config<span class=\"token punctuation\">.</span>host<span class=\"token punctuation\">,</span>\n    user<span class=\"token operator\">:</span> db_config<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span>\n    password<span class=\"token operator\">:</span> db_config<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">,</span>\n    database<span class=\"token operator\">:</span> db_config<span class=\"token punctuation\">.</span>database\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconnection<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconnection<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SELECT count from express'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> rows</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> error<span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rows<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//[ RowDataPacket { count: 0 } ]</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rows<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//0</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>성공적으로 연결되었다면 콘솔에 주석과 같이 찍히게 된다. 이것으로 react 개발 서버, express 서버, sql 서버가 모두 연결이 된 것을 확인할 수 있다.</p>\n<h3 id=\"plus-api-수정\" style=\"position:relative;\"><a href=\"#plus-api-%EC%88%98%EC%A0%95\" aria-label=\"plus api 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>plus API 수정</h3>\n<p>위에서 버튼을 누르면 서버에 저장된 count 변수를 +1해주는 api를 작성했었다. 이를 DB의 count를 가져와 더해주는 것으로 간단하게 수정해보자!</p>\n<p>우선 DB에서 count 값을 가져와서 보여주려고 한다. react의 <code class=\"language-text\">useEffect</code> hook을 사용하여 렌더링될 때, DB에서 data값을 가져오도록 하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//App.js</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/get\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>AJAX로 get해주고 이에 대한 get api를 아래의 <code class=\"language-text\">server.js</code>에서 처리해주도록 하였다. DB의 express 테이블에서 count를 가져와서 리턴해주는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//in server.js</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/get\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>row<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> pool<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT count from express\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> row<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그러고 count를 버튼 옆에다가 보여주도록 하면 아래와 같이 DB table에서 count를 가져와서 보여주는 것을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAa0lEQVQoz7VRQQoAIQj0/4/yK56EroKdIl0KggirSzsgkc0MjYKZeUM7R833GdHbyoFIEBFXwx0Hot+cBKcE3XA0U0qOiE5E18g5584PI4+Gqjozu4hcDWutXkrZz3AnjHCbM/y65Rd4bvgBLnjKT9/NhE0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"db_connection_success\"\n        title=\"db_connection_success\"\n        src=\"/static/decfc20f6692b37b48e016897311ab11/37523/db_connection_success.png\"\n        srcset=\"/static/decfc20f6692b37b48e016897311ab11/e9ff0/db_connection_success.png 180w,\n/static/decfc20f6692b37b48e016897311ab11/f21e7/db_connection_success.png 360w,\n/static/decfc20f6692b37b48e016897311ab11/37523/db_connection_success.png 720w,\n/static/decfc20f6692b37b48e016897311ab11/cecac/db_connection_success.png 728w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이제, 더해주는 것을 반영해주기만 하면 된다.<code class=\"language-text\">server.js</code>에서 plus를 눌렀을 때 DB 값을 처리해주자.</p>\n<p>우선 브라우저에서 plus 버튼이 눌리면 server에 함수를 호출하여 수정된 count값을 받아온다고 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//App.js\t</span>\n<span class=\"token operator\">&lt;</span>input\n        type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span>\n        value<span class=\"token operator\">=</span><span class=\"token string\">\"plus\"</span>\n        onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/plus\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//서버의 응답을 json형태로 받아 출력</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n              <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> margin<span class=\"token operator\">:</span> <span class=\"token string\">\"10rem\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>이제 api/plus를 server.js에서 처리해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/plus\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>row<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> pool<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT count from express\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> row<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"current count : \"</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    count <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"modified count : \"</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> pool<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">UPDATE express SET count=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>express 테이블에서 값을 가져와서 count를 1 더해주고, UPDATE해주었다. 그러고 이를 브라우저에서도 보여줘야 하므로 count를  <code class=\"language-text\">response</code>해주면 된다. 여기서 async~await를 사용한 이유는 mysql 패키지에서 query문을 비동기적으로 실행하는데, 우리는 값을 가져와서→count 값을 1 더해주고 →테이블에 update 해주는 과정이 <strong>동기적으로 일어나야 하기 때문이다</strong>.</p>\n<p>count는 리액트에서 state로 관리해주기 때문에 서버에서 응답이 오면 바로 count도 바뀌는 것을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB5UlEQVQoz5WOW08TURSF5xdoCMRaEDlz6dzPmdO59D6lJBiJiT4REpW2lItAor+cZ14I7Wc61Vh9MLCSlW/vffZZ2cZiseC35/M59/f3Fdfnj4+Pf/X/s8Galh/v7u6qwHU9PDzwVBmwoPJivmKlxT/102lMz2+ZzG64uPrB8cmYj5+OOfk85fzqO1/Gl9Xb6eQb09kt48kls4ubimeza04nF1W/5HR2zdfxOcYg36HbrNNNt2nrOm1doxlskEWb6GCDNNoij7dIo01kuE0iBSp+i4zeVNSJSaIEWglktItxNKzxYbTDYf8Vh/0a78vXHA3rHO3Xq1mZv+Sgs0GZv6Ds7LDft9nvW5RdUXE0cDgoHUZ9m2HPxAjjlLw1QCUFri5oqAwv1Ni6wNI5IskQWRuR5Nh+TBAqgrCJ52V4gSTwMzxf47oa2/EwYqXplQekaYGbpDgywfMjLN3ETjPsooXT62G32riRQqomUuZEYYtYJci4TRRnRGFOrAoM2w1Qg3eotEssUyzHRZgOwmr8sf2LpoNpNTDNZb3qxVptWi6GsF38pEMQFfheUi3v7VkrC/vZNoTl4reGBJ0RVtxk13IQDQ/heNVVy6XVJU+zYTk+MusQtrvIThfdG2ApjRnJKvS5gT8B+R0FHPRwAlkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"db_plus_success\"\n        title=\"db_plus_success\"\n        src=\"/static/55f28c19ef00adda1392f23c72db27aa/37523/db_plus_success.png\"\n        srcset=\"/static/55f28c19ef00adda1392f23c72db27aa/e9ff0/db_plus_success.png 180w,\n/static/55f28c19ef00adda1392f23c72db27aa/f21e7/db_plus_success.png 360w,\n/static/55f28c19ef00adda1392f23c72db27aa/37523/db_plus_success.png 720w,\n/static/55f28c19ef00adda1392f23c72db27aa/302a4/db_plus_success.png 1080w,\n/static/55f28c19ef00adda1392f23c72db27aa/07a9c/db_plus_success.png 1440w,\n/static/55f28c19ef00adda1392f23c72db27aa/e405b/db_plus_success.png 1566w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>plus 버튼을 누르면 DB의 count가 update되는 것을 확인할 수 있다. 전체 코드는 <a href=\"https://github.com/choieastsea/full-stack-in-js\">깃허브</a>에 올려놓았다.</p>\n<p>이제서야 혼자 웹 서비스를 간단하게 한 사이클 만들어보았다!</p>\n<p>참고) <a href=\"https://www.youtube.com/watch?v=VaAWIAxvj0A\">생활코딩</a>, <a href=\"https://codingapple.com/unit/nodejs-react-integration/\">코딩애플</a></p>","frontmatter":{"date":"February 17, 2022","title":"(WEB) 자바스크립트로 풀스택 환경 구축하기(feat mysql2)","categories":"WEB","author":"choieastsea","emoji":"🙄"},"fields":{"slug":"/full-stack-in-js/"}},"prev":{"id":"1e1e8a77-f2ae-56b5-afae-ff002c7c40ae","html":"<p>본 글은 본인이 ‘데이터 분석 준전문가’ 필기 시험을 준비하면서 개인적으로 작성하는 글이라 일부 이해가 되지 않고 부정확할 수 있음을 밝힙니다. 모두 화이팅^^</p>\n<h1 id=\"데이터-마이닝\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A7%88%EC%9D%B4%EB%8B%9D\" aria-label=\"데이터 마이닝 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 마이닝</h1>\n<blockquote>\n<p>데이터 마이닝의 기초 개념들을 학습한다.</p>\n<p>분석모형 구축과 테스트를 위한 데이터 분할에 대해 학습한다.</p>\n</blockquote>\n<h2 id=\"데이터-마이닝-개요\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A7%88%EC%9D%B4%EB%8B%9D-%EA%B0%9C%EC%9A%94\" aria-label=\"데이터 마이닝 개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 마이닝 개요</h2>\n<p>데이터마이닝(Data Mining)은 방대한 양의 데이터 속에서 숨겨진 규칙, 패턴 등을 찾아내어 예측하거나 의사결정에 활용하는 것을 목적으로 한다. 가설과 검정의 과정이 선택적이라는 점에서 통계분석과 구분된다.</p>\n<h3 id=\"데이터-마이닝의-종류\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A7%88%EC%9D%B4%EB%8B%9D%EC%9D%98-%EC%A2%85%EB%A5%98\" aria-label=\"데이터 마이닝의 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 마이닝의 종류</h3>\n<ul>\n<li>\n<p>데이터 마이닝 방법에 따라… 지도학습 vs 비지도학습</p>\n<p>정답지가 주어지냐에 따라 나뉜다. 독립변수에 따라 종속변수가 있다면 지도학습으로 볼 수 있다.</p>\n<table>\n<thead>\n<tr>\n<th>지도학습</th>\n<th>비지도학습</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>회귀(연속형) : 선형회귀분석, 의사결정나무, SVR, 신경망 모형, 릿지, 라쏘</td>\n<td>군집 : K-means, SOM, DBSCAN, 병합 군집, 계층 군집<br />연관 : Apriori</td>\n</tr>\n<tr>\n<td>분류(범주형) : 로지스틱 회귀분석, 신경망 모형, 의사결정나무(분류트리모형), k-NN, 앙상블, SVM, 나이브 베이즈 분류</td>\n<td>차원축소 : PCA, LDA, SVD, MDS</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>데이터 마이닝 분석 목적에 따라… 분류분석 vs 군집분석 vs 연관분석</p>\n<ul>\n<li>분류(Classification) 분석 : 지도학습 중 하나로 데이터가 <u>어느 그룹에 속하는지</u> 판별하고자 하는 기법</li>\n<li>군집(Clustering) 분석 : 비지도 학습 중 하나로 데이터간 유사성을 측정하여 <u>하나의 그룹으로 묶는 기법</u></li>\n<li>연관(Association) 분석 : 비지도학습 중 하나로 장바구니 분석. 데이터간 연관성을 파악하는 분석</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"데이터-마이닝의-프로세스\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A7%88%EC%9D%B4%EB%8B%9D%EC%9D%98-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\" aria-label=\"데이터 마이닝의 프로세스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 마이닝의 프로세스</h3>\n<p>목적 정의 → 데이터준비 → 데이터가공 → 데이터 마이닝 기법 적용 → 검증</p>\n<h2 id=\"데이터-분할\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B6%84%ED%95%A0\" aria-label=\"데이터 분할 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 분할</h2>\n<p>데이터를 훈련(train), 검정(validation), 평가용(test) 등의 데이터로 분할한다.</p>\n<h3 id=\"과적합과-과소적합\" style=\"position:relative;\"><a href=\"#%EA%B3%BC%EC%A0%81%ED%95%A9%EA%B3%BC-%EA%B3%BC%EC%86%8C%EC%A0%81%ED%95%A9\" aria-label=\"과적합과 과소적합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>과적합과 과소적합</h3>\n<p>데이터가 훈련용 데이터에 의해 너무 많이 설명되면 모델이 복잡해지고 설명이 어려워지며 예측이 힘들어짐→과적합</p>\n<p>데이터 부족 문제 등으로 인하여 모델이 너무 단순하여 데이터를 충분히 설명하지 못하게 됨 → 과소적합</p>\n<h3 id=\"데이터-분할을-통한-검증\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B6%84%ED%95%A0%EC%9D%84-%ED%86%B5%ED%95%9C-%EA%B2%80%EC%A6%9D\" aria-label=\"데이터 분할을 통한 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 분할을 통한 검증(!)</h3>\n<ol>\n<li>\n<p>홀드아웃</p>\n<p>전체 데이터를 <em>랜덤</em>하게 추출해 학습 데이터와 테스트 데이터로 분리하는 방식.</p>\n<p>보통 학습 데이터는 80%, 테스트 데이터는 20% 혹은 학습 60, 검증 20, 테스트 20으로 분할한다. 검증세트에서 만족할 만한 성능이 나온 하이퍼파라미터를 이용하여 테스트 세트에서 모델의 일반화 성능을 추정한다.</p>\n</li>\n<li>\n<p>k-Fold 교차검증</p>\n<p>전체 데이터셋을 k개의 집단으로 구분한 뒤 <u>k-1개를 훈련용 데이터로, 나머지 1개를 평가용 데이터</u>로 사용하여 이를 종합하여 최종 모델을 구축하는 방법이다.</p>\n<p><strong>과소적합 방지</strong>하나, k번의 모델 구축으로 많은 시간 소요</p>\n</li>\n<li>\n<p>붓스트랩(bootstrap)</p>\n<p>신뢰도를 높여 성능을 개선하기 위해 표본을 다시 추출하는 방법의 일종. <u>중복과 복원추출</u>을 허용한다.</p>\n<p>데이터셋의 분포가 고르지 않은 경우에 사용되며 <strong>과적합을 줄이는데</strong> 도움이 됨</p>\n</li>\n<li>\n<p>계층별 k-겹 교차 검증(Stratified k-fold cross validation)</p>\n<p>불균형 데이터를 분류하는 문제에서 사용됨. k-fold와 비슷하지만, 각 폴드가 갖는 레이블의 분포가 유사하도록 폴드를 추출하여 교차검증을 실시한다.</p>\n</li>\n</ol>\n<h1 id=\"분류분석\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EB%A5%98%EB%B6%84%EC%84%9D\" aria-label=\"분류분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>분류분석</h1>\n<blockquote>\n<p>분류분석을 통한 예측모형을 수립하는 방법을 학습한다.</p>\n<p>다양한 분류분석 방법을 익히고 예측력이 높은 모형으로 개선하는 방법을 학습한다.</p>\n</blockquote>\n<p>분류분석은 회귀분석과 더불어 대표적인 지도학습이다!</p>\n<h2 id=\"로지스틱-회귀-분석\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EC%A7%80%EC%8A%A4%ED%8B%B1-%ED%9A%8C%EA%B7%80-%EB%B6%84%EC%84%9D\" aria-label=\"로지스틱 회귀 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로지스틱 회귀 분석</h2>\n<p>회귀분석을 분류에 이용한 방법으로, 독립변수의 선형결합을 이용해 사건의 발생 가능성을 예측하는 분석방법.</p>\n<p>ex) 고객을 재구매 고객과 처음 구매한 고객으로 분류</p>\n<p>종속변수가 **범주형 변수(명목, 순위)**일 때 사용한다. 종속변수가 보통 두가지의 경우만 되는 이항변수이다.</p>\n<h3 id=\"오즈odds\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EC%A6%88odds\" aria-label=\"오즈odds permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오즈(Odds)</h3>\n<p>성공할 확률을 P라고 했을 때, <strong>성공할 확률이 실패할 확률의 몇배인지</strong>를 나타내는 값 :  <code class=\"language-text\">P/(1-P)</code></p>\n<h3 id=\"로짓-변환\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EC%A7%93-%EB%B3%80%ED%99%98\" aria-label=\"로짓 변환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로짓 변환</h3>\n<p>오즈를 로그 씌워서 <u>정규분포에 비슷한 모양으로 맞추는 변환</u>과정. 이를 통하여 확률 등의 분석이 용이해진다. 이를 종속변수로 하여 선형회귀모형을 만든 것이 로지스틱 회귀분석이다.</p>\n<h3 id=\"시그모이드-함수\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EA%B7%B8%EB%AA%A8%EC%9D%B4%EB%93%9C-%ED%95%A8%EC%88%98\" aria-label=\"시그모이드 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시그모이드 함수</h3>\n<p>로짓함수와 역함수 관계로, 로지스틱 회귀분석과 인공신경망 분석에서 활성화 함수로 활용된다.</p>\n<h3 id=\"로지스틱-회귀분석-실습--glm함수\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EC%A7%80%EC%8A%A4%ED%8B%B1-%ED%9A%8C%EA%B7%80%EB%B6%84%EC%84%9D-%EC%8B%A4%EC%8A%B5--glm%ED%95%A8%EC%88%98\" aria-label=\"로지스틱 회귀분석 실습  glm함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로지스틱 회귀분석 실습 : glm()함수</h3>\n<p>mtcars dataset을 이용하여 로지스틱 회귀분석을 해보자. 데이터의 열 중 <code class=\"language-text\">vs</code> 엔진의 종류를 의미하는 0(자동)과 1(수동)의 두가지로 이루어져 있는 범주형 변수이다. 따라서 vs를 종속변수로 하는 로지스틱 회귀분석을 해줄 수 있다. 독립변수는 mpg(연비), am(변속기)로 해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> glm_vs <span class=\"token operator\">&lt;-</span> glm<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>mtcars<span class=\"token punctuation\">,</span> vs<span class=\"token operator\">~</span>mpg<span class=\"token operator\">+</span>am<span class=\"token punctuation\">,</span> family<span class=\"token operator\">=</span>binomial<span class=\"token punctuation\">)</span>\t<span class=\"token comment\">#binomial 해줘야 로지스틱 회귀분석</span>\n<span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>glm_vs<span class=\"token punctuation\">)</span>\n\nCall<span class=\"token operator\">:</span>\nglm<span class=\"token punctuation\">(</span>formula <span class=\"token operator\">=</span> vs <span class=\"token operator\">~</span> mpg <span class=\"token operator\">+</span> am<span class=\"token punctuation\">,</span> family <span class=\"token operator\">=</span> binomial<span class=\"token punctuation\">,</span> data <span class=\"token operator\">=</span> mtcars<span class=\"token punctuation\">)</span>\n\nDeviance Residuals<span class=\"token operator\">:</span> \n     Min        <span class=\"token number\">1</span>Q    Median        <span class=\"token number\">3</span>Q       Max  \n<span class=\"token operator\">-</span><span class=\"token number\">2.05888</span>  <span class=\"token operator\">-</span><span class=\"token number\">0.44544</span>  <span class=\"token operator\">-</span><span class=\"token number\">0.08765</span>   <span class=\"token number\">0.33335</span>   <span class=\"token number\">1.68405</span>  \n\nCoefficients<span class=\"token operator\">:</span>\n            Estimate Std. Error z value Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>z<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>   \n<span class=\"token punctuation\">(</span>Intercept<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token number\">12.7051</span>     <span class=\"token number\">4.6252</span>  <span class=\"token operator\">-</span><span class=\"token number\">2.747</span>  <span class=\"token number\">0.00602</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>\nmpg           <span class=\"token number\">0.6809</span>     <span class=\"token number\">0.2524</span>   <span class=\"token number\">2.698</span>  <span class=\"token number\">0.00697</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>\t<span class=\"token comment\">#회귀계수 유의함 ->귀무가설(회귀계수가 0이다) 기각</span>\nam           <span class=\"token operator\">-</span><span class=\"token number\">3.0073</span>     <span class=\"token number\">1.5995</span>  <span class=\"token operator\">-</span><span class=\"token number\">1.880</span>  <span class=\"token number\">0.06009</span> . \t<span class=\"token comment\">#회귀계수 p값이 0.05내는 아님</span>\n<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>\nSignif. codes<span class=\"token operator\">:</span>  <span class=\"token number\">0</span> ‘<span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>’ <span class=\"token number\">0.001</span> ‘<span class=\"token operator\">*</span><span class=\"token operator\">*</span>’ <span class=\"token number\">0.01</span> ‘<span class=\"token operator\">*</span>’ <span class=\"token number\">0.05</span> ‘.’ <span class=\"token number\">0.1</span> ‘ ’ <span class=\"token number\">1</span>\n\n<span class=\"token punctuation\">(</span>Dispersion parameter <span class=\"token keyword\">for</span> binomial family taken to be <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n    Null deviance<span class=\"token operator\">:</span> <span class=\"token number\">43.860</span>  on <span class=\"token number\">31</span>  degrees of freedom\t<span class=\"token comment\">#절편만 포함한 모형의 완전모형으로의 이탈도(작을수록 모형에 가깝다)</span>\nResidual deviance<span class=\"token operator\">:</span> <span class=\"token number\">20.646</span>  on <span class=\"token number\">29</span>  degrees of freedom\t<span class=\"token comment\">#독립변수들이 추가된 모형의 이탈도</span>\nAIC<span class=\"token operator\">:</span> <span class=\"token number\">26.646</span>\n\nNumber of Fisher Scoring iterations<span class=\"token operator\">:</span> <span class=\"token number\">6</span>\n \n <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token operator\">-</span>pchisq<span class=\"token punctuation\">(</span><span class=\"token number\">43.860</span><span class=\"token punctuation\">,</span> df<span class=\"token operator\">=</span> <span class=\"token number\">31</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\">#절편만 있는 경우 -> 기각 불가. 완전모형에 가깝다.</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">0.06273542</span>\n<span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token operator\">-</span>pchisq<span class=\"token punctuation\">(</span><span class=\"token number\">20.646</span><span class=\"token punctuation\">,</span> df<span class=\"token operator\">=</span><span class=\"token number\">29</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\">#독립변수 포함된 경우 -> 기각 불가. 완전모형에 가깝다.</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">0.8717172</span></code></pre></div>\n<p>만약 독립변수에 의해 종속변수가 완전하게 분리가 가능하다면, 경고문구가 나올 것이다. 이는 분석이 무의미하므로 독립변수를 조정해주도록 하자.</p>\n<p>mpg의 회귀계수가 0.6809이므로 mpg가 1 증가하면 vs가 0에서 1일 확률이  exp(0.6809) ≒1.98배(98%) 증가한다고 볼 수 있다. 마찬가지로 am의 회기계수를 통하여 am이 1 증가하면 vs=1일 오즈가 exp(-3.0073) ≒ 0.05배, 즉 95% 감소함(0일때에 비해 1이, 자동일때에 비해 수동이)을 확인할 수 있다.</p>\n<p><u>즉, 회귀계수를 통하여 범주형 종속변수가 변할 때 <code class=\"language-text\">exp(회기계수)</code>만큼 변한다는 것을 알 수 있다!!</u></p>\n<h2 id=\"의사결정나무\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EC%82%AC%EA%B2%B0%EC%A0%95%EB%82%98%EB%AC%B4\" aria-label=\"의사결정나무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>의사결정나무</h2>\n<p>자료에서 특정 분리 규칙을 찾아내고, 그에 따라 몇 개의 소집단으로 분류하는 분석방법이다.  올바른 분류를 위해서는 상위 노드에서 하위노드로 갈수록 집단 내에 동질성이 커지고, 집단 간 이질성이 커져야한다.</p>\n<p>의사결정나무는 종속변수가 <strong>연속형인 회귀트리</strong>, 종속변수가 <strong>이산형인 분류트리</strong>로 구분된다.</p>\n<h3 id=\"의사결정나무-특징\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EC%82%AC%EA%B2%B0%EC%A0%95%EB%82%98%EB%AC%B4-%ED%8A%B9%EC%A7%95\" aria-label=\"의사결정나무 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>의사결정나무 특징(!)</h3>\n<table>\n<thead>\n<tr>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>- 모델이 직관적이고 해석이 용이<br />- 데이터 정규화 및 단위 변환이 불필요<br />- 전처리 작업 용이<br />- 이산형, 연속형 변수 모두 적용 가능<br />- 데이터의 선형성, 정규성 등의 가정이 불필요<br />- <strong>이상값에 민감하지 않음</strong></td>\n<td>- 독립변수들 사이의 중요도 판단하기 어려움<br />- 분류 <strong>경계선 근처의 자료에 대해 오차</strong>가 큼<br />- <strong>과적합 발생 가능성</strong>이 높음<br />- 분산이 큼→랜덤포레스트는 극복</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"분석-과정\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EC%84%9D-%EA%B3%BC%EC%A0%95\" aria-label=\"분석 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>분석 과정</h3>\n<ol>\n<li>\n<p>성장 : 분리기준과 정지 규칙을 설정하여 트리 성장</p>\n<ul>\n<li>\n<p>분리기준 : 한 그룹 안에 범주가 얼마나 섞여 있는지 나타내는 측도인 불순도를 사용하여 데이터를 분류한다. 다양한 범주의 데이터로 구성되어 있을수록 불순도는 커진다.</p>\n</li>\n<li>\n<p>지니지수는 불순도를 나타내는 값, 엔트로피 지수는 순수도를 나타내는 값. 순수할수록 좋다.</p>\n<p>지니지수 : $1-\\sum{_{i=1}^{n}{p_i}^2}$ : 모든 확률의 제곱의 합의 나머지 확률</p>\n<p>엔트로피지수 : $-\\sum_i^c{p_ilog_2p_i}$</p>\n</li>\n<li>\n<p>정지규칙 : 너무 많은 분리 기준을 갖으면 해석상의 어려움이 발생하므로, 정지규칙을 정하여 <u>더 이상 분리가 일어나지 않도록</u> 정지시킨다.</p>\n</li>\n<li>\n<p>분리기준은 자료의 종류(범주, 연속)과 방법에 따라 달라진다.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>가지치기 : 모형 복잡하면 과적합하므로 적당히 제거함</p>\n</li>\n<li>\n<p>타당성 평가</p>\n<p>형성된 의사결정트리를 검증용 데이터 등으로 예측 정확도를 평가한다.</p>\n</li>\n<li>\n<p>해석 및 예측</p>\n</li>\n</ol>\n<h3 id=\"의사결정나무-실습--rpart함수로-분류\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EC%82%AC%EA%B2%B0%EC%A0%95%EB%82%98%EB%AC%B4-%EC%8B%A4%EC%8A%B5--rpart%ED%95%A8%EC%88%98%EB%A1%9C-%EB%B6%84%EB%A5%98\" aria-label=\"의사결정나무 실습  rpart함수로 분류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>의사결정나무 실습 : rpart()함수로 분류</h3>\n<p>iris 데이터셋에서 비율을 정한 복원추출을 하여 의사결정나무를 만든 다음, 이를 통하여 실제 데이터값과의 오차를 분석해보자.</p>\n<p>train 데이터를 70%, test 데이터를 30%의 비율로 iris에서 추출하고, train 데이터로 의사결정나무를 만든다. 그리고 만들어진 의사결정나무로  test값을 넣어보면서 의사결정나무의 적합성을 평가해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> index <span class=\"token operator\">&lt;-</span> sample<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> nrow<span class=\"token punctuation\">(</span>iris<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> replace<span class=\"token operator\">=</span>T<span class=\"token punctuation\">,</span> prob<span class=\"token operator\">=</span>c<span class=\"token punctuation\">(</span><span class=\"token number\">0.7</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> index\t<span class=\"token comment\">#70%만큼 추출하여 train에 사용하고, 나머지는 검증할 때 사용할 test에 저장한다.</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span>\n <span class=\"token punctuation\">[</span><span class=\"token number\">48</span><span class=\"token punctuation\">]</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span>\n <span class=\"token punctuation\">[</span><span class=\"token number\">95</span><span class=\"token punctuation\">]</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">142</span><span class=\"token punctuation\">]</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span>\n<span class=\"token operator\">></span> train <span class=\"token operator\">&lt;-</span> iris<span class=\"token punctuation\">[</span>index<span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> iris<span class=\"token punctuation\">[</span>index<span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span>\n<span class=\"token operator\">></span> result <span class=\"token operator\">&lt;-</span> rpart<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>train<span class=\"token punctuation\">,</span> Species <span class=\"token operator\">~</span>.<span class=\"token punctuation\">)</span>\t<span class=\"token comment\">#Species를 종속변수로 의사결정나무를 생성한다.</span>\n<span class=\"token operator\">></span> plot<span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> margin<span class=\"token operator\">=</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> text<span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABD0lEQVQoz31T2aqFMAz0/7/MB0XEB0XF5d193+eSQrxxO4HS0iSTyaTVAOA4DkhblgVFUWAYBrXqusY0Teos7Z5HpvEl7V3Xoe97ZFkG0zThui4Mw4BlWUiSBGEYKj8VWNf1FfQEnOdZBd9t3/fHHTElxgwoSV0AuSUOkoGSCYExw3v7JyAFjOP4AJSgTdOomKqqkOf5qeu2bf8M+VCWpQr8AiQ5PM+D4zhq6bqONE2VrpR7AaSqvu8jjmM1YdkC78SOC7CuvNMwSbJLy296SB8lfRm1zUS0X5pJX9u2jzjp46lrX1UZkCqTHKRfEARna+yn92nbNqIoUoP9CchJpBWvt2ckz5+AX9/rDnSX5g8MTqz53agOKAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"decisiontree\" title=\"decisiontree\" src=\"/static/4a79e337606f63b13e53985830c2db74/37523/decisiontree.png\" srcset=\"/static/4a79e337606f63b13e53985830c2db74/e9ff0/decisiontree.png 180w,\n/static/4a79e337606f63b13e53985830c2db74/f21e7/decisiontree.png 360w,\n/static/4a79e337606f63b13e53985830c2db74/37523/decisiontree.png 720w,\n/static/4a79e337606f63b13e53985830c2db74/47ff6/decisiontree.png 852w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>연습 데이터로 만들어진 의사결정트리는 위와 같이 나온다. 이제 미리 추출해놓은 test값으로 의사결정나무를 평가해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> pred <span class=\"token operator\">&lt;-</span> predict<span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> newdata<span class=\"token operator\">=</span>test<span class=\"token punctuation\">,</span> type<span class=\"token operator\">=</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> table<span class=\"token punctuation\">(</span>condition<span class=\"token operator\">=</span>test<span class=\"token operator\">$</span>Species<span class=\"token punctuation\">,</span> pred<span class=\"token punctuation\">)</span>\n            pred\ncondition    setosa versicolor virginica\n  setosa         <span class=\"token number\">13</span>          <span class=\"token number\">0</span>         <span class=\"token number\">0</span>\n  versicolor      <span class=\"token number\">0</span>         <span class=\"token number\">16</span>         <span class=\"token number\">2</span>\n  virginica       <span class=\"token number\">0</span>          <span class=\"token number\">2</span>        <span class=\"token number\">19</span></code></pre></div>\n<p>위의 의사결정트리로 예측하였을 때, 실제 virginica 종을 versicolor로 잘못 예측한 케이스가 2건 발생함을 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> result\nn<span class=\"token operator\">=</span> <span class=\"token number\">98</span> \n\nnode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> split<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">,</span> loss<span class=\"token punctuation\">,</span> yval<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>yprob<span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">*</span> denotes terminal node\n\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> root <span class=\"token number\">98</span> <span class=\"token number\">61</span> setosa <span class=\"token punctuation\">(</span><span class=\"token number\">0.37755102</span> <span class=\"token number\">0.32653061</span> <span class=\"token number\">0.29591837</span><span class=\"token punctuation\">)</span>  \n  <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> Petal.Length<span class=\"token operator\">&lt;</span> <span class=\"token number\">2.6</span> <span class=\"token number\">37</span>  <span class=\"token number\">0</span> setosa <span class=\"token punctuation\">(</span><span class=\"token number\">1.00000000</span> <span class=\"token number\">0.00000000</span> <span class=\"token number\">0.00000000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span>\n  <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> Petal.Length<span class=\"token operator\">>=</span><span class=\"token number\">2.6</span> <span class=\"token number\">61</span> <span class=\"token number\">29</span> versicolor <span class=\"token punctuation\">(</span><span class=\"token number\">0.00000000</span> <span class=\"token number\">0.52459016</span> <span class=\"token number\">0.47540984</span><span class=\"token punctuation\">)</span>  \n    <span class=\"token number\">6</span><span class=\"token punctuation\">)</span> Petal.Length<span class=\"token operator\">&lt;</span> <span class=\"token number\">4.9</span> <span class=\"token number\">31</span>  <span class=\"token number\">1</span> versicolor <span class=\"token punctuation\">(</span><span class=\"token number\">0.00000000</span> <span class=\"token number\">0.96774194</span> <span class=\"token number\">0.03225806</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span>\n    <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> Petal.Length<span class=\"token operator\">>=</span><span class=\"token number\">4.9</span> <span class=\"token number\">30</span>  <span class=\"token number\">2</span> virginica <span class=\"token punctuation\">(</span><span class=\"token number\">0.00000000</span> <span class=\"token number\">0.06666667</span> <span class=\"token number\">0.93333333</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span></code></pre></div>\n<p>98개(65%)의 train 데이터셋을 위의 기준 노드로 나눠지도록 만든 것을 확인할 수 있다. *가 있는 것은 leaf node라는 뜻이다. 2번 노드를 보면 37개 중 0개가 잘못 분류되었다라는 뜻이다. 3번은 61개중 29개의 versicolor가 잘못 들어왔다는 말이다. 괄호안의 숫자는 각 노드에 해당하는 종속변수(Species)의 비율을 나타낸다.</p>\n<h2 id=\"앙상블분석\" style=\"position:relative;\"><a href=\"#%EC%95%99%EC%83%81%EB%B8%94%EB%B6%84%EC%84%9D\" aria-label=\"앙상블분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>앙상블분석</h2>\n<p><em>여러 개의 모형을 생성 및 조합</em>하여 예측력이 높은 모형을 만드는 것을 의미한다. 예측력을 높이기 위해 여러 번의 데이터 분할을 통하여 구축된 다수의 모형으로 새로운 모형을 만드는 방법이다.</p>\n<p>결과가 수치형 데이터인 경우에는 값들의 평균을 통해 결과를 예측하고, 범주형 데이터인 경우에는 다수결 방식으로 최종 결과를 예측한다.</p>\n<h3 id=\"앙상블분석-종류\" style=\"position:relative;\"><a href=\"#%EC%95%99%EC%83%81%EB%B8%94%EB%B6%84%EC%84%9D-%EC%A2%85%EB%A5%98\" aria-label=\"앙상블분석 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>앙상블분석 종류</h3>\n<ol>\n<li>\n<p>배깅(Bootstrap Aggregating)</p>\n<p>여러개의 부트스트랩(<strong>원본 데이터와 같은 크기의 표본을 랜덤복원추출</strong>한 훈련용 샘플 데이터)을 집계하는 알고리즘이다. <code class=\"language-text\">bagging()</code>함수를 이용한다.</p>\n</li>\n<li>\n<p>부스팅(Boosting)</p>\n<p>이전 모델을 구축한 뒤 다음 모델을 구축할 때 이전 분류기에 의해 잘못 분류된 데이터에 더 큰 <strong>가중치</strong>를 주어 붓스트랩을 구성한다. 여러개의 모델을 구축한다는 점에서 배깅과 유사하지만, <u>배깅은 각 모델이 독립적인데 반해 부스팅은 독립적이지 않다</u>.</p>\n<p>붓스트랩을 재구성하는 과정에서 가중치를 다르게 주어 훈련오차를 빠르게 줄일 수 있어 성능이 배깅보다 뛰어나다고 볼 수 있다.</p>\n<p><code class=\"language-text\">boosting()</code>함수를 이용한다.</p>\n</li>\n<li>\n<p>랜덤포레스트(Random Forest )</p>\n<p>서로 상관성이 없는 트리들의 선형결합으로 이루어진 <code class=\"language-text\">숲</code>을 의미한다. 배깅과 유사하나 <strong>배깅에 많은 무작위성을 주는 기법</strong>이다. 붓스트랩을 여러개 복원추출한 뒤, 트리의 모든 마디가 불순도가 제일 적어지는 최적의 분할을 실시한다. 큰 분산을 갖는 의사결정나무의 단점을 보완하여 <u>분산을 감소하고 일반화의 성능을 향상</u>시킬 수 있다. 의사결정나무의 장점인 이상값에 민감하지 않다는 장점도 있다.</p>\n<p><code class=\"language-text\">randomForest()</code>함수를 이용한다.</p>\n</li>\n</ol>\n<h2 id=\"인공신경망-분석\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EA%B3%B5%EC%8B%A0%EA%B2%BD%EB%A7%9D-%EB%B6%84%EC%84%9D\" aria-label=\"인공신경망 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인공신경망 분석</h2>\n<p>인간의 뇌를 모방하여 만들어진 학습 및 추론 모형이다.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>내용</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>장점</td>\n<td>잡음에 민감하게 반응하지 않는다<br />비선형적인 문제를 분석하는데 유용하다<br />패턴인식, 분류, 예측 등의 문제에 효과적이다<br />스스로 가중치를 학습하므로 다양하고 많은 데이터에 효과적이다</td>\n</tr>\n<tr>\n<td>단점</td>\n<td>모형이 복잡할 경우 학습에 오랜 시간이 소요된다<br />초기 가중치에 따라 전역해가 아닌 지역해로 수렴할 수 있다<br />추정한 가중치의 신뢰도가 낮다<br />결과에 대한 해석이 쉽지 않다<br />은닉층의 수와 은닉 노드의 수를 결정하기가 어렵다</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"인공신경망-알고리즘\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EA%B3%B5%EC%8B%A0%EA%B2%BD%EB%A7%9D-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\" aria-label=\"인공신경망 알고리즘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인공신경망 알고리즘</h3>\n<ol>\n<li>\n<p>활성함수 : 노드에 입력되는 값을 바로 다음 함수로 전달하지 않고 <u>비선형 함수인 활성함수</u>에 통과시킨 후 전달한다.</p>\n<table>\n<thead>\n<tr>\n<th>함수명</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Step</td>\n<td>기본적인 활성함수로, 0 또는 1을 반환한다.<br />$S(x)=\\begin{Bmatrix} 0, &#x26; x&#x3C;0 \\ 1, &#x26; x\\ge0 \\end{Bmatrix}$</td>\n</tr>\n<tr>\n<td>Sigmoid</td>\n<td>로지스틱 회귀분석에서의 계산식과 유사하며, 0과1사이의 값을 반환한다.</td>\n</tr>\n<tr>\n<td>Sign</td>\n<td>기본적인 활성함수로 -1 또는 1을 반환한다.<br />$S(x)=\\begin{Bmatrix} -1, &#x26; x&#x3C;0 \\ 1, &#x26; x\\ge0 \\end{Bmatrix}$</td>\n</tr>\n<tr>\n<td>tanh</td>\n<td>확장된 시그모이드 함수로, 중심값은 0이며 -1~1 사이의 값을 출력한다.</td>\n</tr>\n<tr>\n<td>ReLU</td>\n<td>입력값과 0중에서 큰 값을 반환한다. 최근 딥러닝에서 많이 사용된다.<br />$S(x)=\\begin{Bmatrix} 0, &#x26; x&#x3C;0 \\ x, &#x26; x\\ge0 \\end{Bmatrix}$</td>\n</tr>\n<tr>\n<td>Softmax</td>\n<td>출력값이 다범주인 경우에 사용하며 범주에 속할 확률을 반환한다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수의 출력값을 묻는 문제가 출제될 수 있으니, 간단하게 알아두도록 하자.</p>\n</li>\n<li>\n<p>인경신경망의 계층 구조</p>\n<p>데이터를 입력하는 <strong>입력층</strong></p>\n<p>데이터를 출력하는 출력층을 갖고 있는 단층신경망</p>\n<p>입력층과 출력층 사이에 보이지 않는 <em>다수의 은닉충</em>을 갖을 수 있는 <strong>다층신경망</strong></p>\n<p>은닉층은 입력층으로부터 값을 전달받아 가중치를 계산한 후 활성함수에 적용하여 결과를 산출하고 출력층으로 보낸다.</p>\n</li>\n<li>\n<p>인공신경망 학습(역전파 알고리즘)</p>\n<p>인공신경망은 여러 퍼셉트론(신경망)으로 구성, 각 퍼셉트론이 보유한 여러개의 가중치 값의 결정이 중요하다.</p>\n<ol>\n<li>\n<p>순전파 알고리즘 : 입력층에서 출력층으로 가중치 값을 찾아감 (오차 발생)</p>\n</li>\n<li>\n<p>역전파 알고리즘 : 오차를 줄이고자 출력층에서 입력층 방향으로 거꾸로 찾아 가중치를 새롭게 조정함</p>\n<p>train용 데이터의 자료들에 따라 가중치가 새롭게 조정되는 것을 인공신경망이 학습한다고 표현한다. 한번의 사이클을 1 epoch라하면 특정 epoch에 도달할 때까지 위 작업을 반복한다.</p>\n</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"인공신경망-종류\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EA%B3%B5%EC%8B%A0%EA%B2%BD%EB%A7%9D-%EC%A2%85%EB%A5%98\" aria-label=\"인공신경망 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인공신경망 종류</h3>\n<ol>\n<li>\n<p>단층 퍼셉트론(단층 신경망)</p>\n<p>은닉층을 거치지 않고 바로 출력층과 연결된다. 다수의 입력값을 받아 하나의 출력을 하는데, 이 출력값이 임계값을 넘지 못했을 때 0을, 넘었을 경우 1을 출력한다.</p>\n</li>\n<li>\n<p>다층 퍼셉트론(다층 신경망)</p>\n<p>단층은 한계가 존재하여 주로 다층 퍼셉트론을 이용한다. 은닉층의 노드가 너무 많으면 과적합, 적으면 과소적합 문제가 발생하므로 적절한 노드의 수를 찾는 것이 중요하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 620px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAD7UlEQVQ4y1VTfUxbVRT/3ff6WtpX+vreK7S00E4Y40uG2XQZoibMTcM+2OZAk0UEZzDbUEBMxdCOlS/boUyi24zJUDNgDHBsGJhOzDY+pEAmAdzwD5ZoohlLjB9R0Y3NXXMf8Icnubn35p7zu79zzu+gos2Phu5KFNYVgd59DHTChR6fNfLOiDoz36fsoHQVKl82GCiluD2iXPrrklpCv1FB52M49FOgephD3VWC4DSw0weUtx7i67sq04rqXzQA4AFeiCBEnjst579bYk4GYEj28CIAy2yrvKsvKGUwv+It4HDiFhAIA7UTQPP3BImPAtWdPvfbna/9cLBx3wZoZhafyTS4746q18ZbpL0AdBnJnI09LI4qg7f6lQoA5Iks1UwAgprwBtROpOPoDSA1m0dw+Ljg+7g8d/W6xAQAkSBctACi/n3RlhMoNKUBUKKsRAUg3TyrPh0+Zk1hbCWnXQalgH+wHTVjDfiUArLTAf+ZKndTd/lsfmnuJhYMCPZXtpsc/46p07Md1nwWvNrDOdnb7a+Vod8HlDKWclycGKP57z+Vg9DMWhy7CazL5RHoDwm+Vu+O+Iz4NQAeAMfZAVh/OWfb/n6JORFAtNlIVgFwzJ1Stk59KCex9I2SJVYD9F/pQM34MkOXHb6OKvfR7vLr+WW52QDcgBC97ymj6/64OjXVKj3HguNiNEDpTli5ssyQOBxGD4BYHGzbjOD0g/hoAUjbpEPgwpFlhglrNAdCtJ9/PW/bdrhAZDV0mgxg3VZ+7lG3XD0hJy8xjFxheAa14w3ooIASG41DnVXupq7y2b3ePY+zVAHB8Xx2ROy9sDo91y3vASDbbYSBqIth5fJvA0opAMHjEbXSoPjkkwjNpOAcBdbv5FF9oVGobn09NzUzlaUgAVyUnhD7n5/btjUdEBmQSxKJi+0/ditbB5utjLVkcUQpOiab6pGzqBlrQtt9QI2zr+jwxv5Q0SOsNoAo7so0uO+NqjNDH0gFACIeSuGYbKIWhpTh+T5Nh7qs9WYzAA7+QQXBmUi88N6SjL3tfuGtLm9W8ZGXRM0Bgt7EE2XutPxsoMi0lgEmubVJkSZbrHlfNC5NijePcJoOfZeB0LdAQTO0e0tvGd45/ybqewMY+CSNUJqAljKL5Z8h9bufepXdlMajtEAfwT5fGFJG/vhKeZXOCuj/crdOY5RXR7TFTG8Egl1vgA3+kgnYnC5oJxq2baTTUaaehkjtfvywEXTS9jC9FuusPFkCHJhcCjFZ8T8LdXmD6RuTWEPcvI63qxZtzMzX2+XoxUEb66hVr4PHoIcTcBlZWfiqizmo+KyQiR6izBqmrqz/AIshNn79hQGRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"출처:코딩의 시작, TCP School\"\n        title=\"출처:코딩의 시작, TCP School\"\n        src=\"/static/4b1b322e98d041f19c982c27d237c4f6/2a195/neural_network.png\"\n        srcset=\"/static/4b1b322e98d041f19c982c27d237c4f6/e9ff0/neural_network.png 180w,\n/static/4b1b322e98d041f19c982c27d237c4f6/f21e7/neural_network.png 360w,\n/static/4b1b322e98d041f19c982c27d237c4f6/2a195/neural_network.png 620w\"\n        sizes=\"(max-width: 620px) 100vw, 620px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ol>\n<h3 id=\"인공신경망-실습neuralnet-neuralnetpredict-이용\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EA%B3%B5%EC%8B%A0%EA%B2%BD%EB%A7%9D-%EC%8B%A4%EC%8A%B5neuralnet-neuralnetpredict-%EC%9D%B4%EC%9A%A9\" aria-label=\"인공신경망 실습neuralnet neuralnetpredict 이용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인공신경망 실습(neuralnet:: neuralnet&#x26;predict 이용)</h3>\n<p>iris 데이터셋을 이용하여 인공신경망을 구현해보자. <code class=\"language-text\">neuralnet</code> 패키지를 이용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> library<span class=\"token punctuation\">(</span>neuralnet<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> index <span class=\"token operator\">&lt;-</span> sample<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> nrow<span class=\"token punctuation\">(</span>iris<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> replace<span class=\"token operator\">=</span>T<span class=\"token punctuation\">,</span> prob<span class=\"token operator\">=</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">0.7</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\">#7:3의 비율로 iris에서 데이터를 복원추출하여 연습과 검증용으로 사용할 것이다.</span>\n<span class=\"token operator\">></span> train <span class=\"token operator\">&lt;-</span> iris<span class=\"token punctuation\">[</span>index<span class=\"token operator\">==</span><span class=\"token number\">1</span> <span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> iris<span class=\"token punctuation\">[</span>index<span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># hidden = c(4,4) : hidden layer 4개가 각각 hidden node 4개를 가짐</span>\n<span class=\"token comment\"># stepmax : 훈련 수행 최대 횟수</span>\n<span class=\"token operator\">></span> result <span class=\"token operator\">&lt;-</span> neuralnet<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>train<span class=\"token punctuation\">,</span> Species <span class=\"token operator\">~</span>. <span class=\"token punctuation\">,</span> hidden<span class=\"token operator\">=</span>c<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> stepmax<span class=\"token operator\">=</span><span class=\"token number\">1e7</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> pred <span class=\"token operator\">&lt;-</span> predict<span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> newdata <span class=\"token operator\">=</span> test<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> plot<span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpUlEQVQ4y4VT7XLDIAzL+z/kbr+6piV8GggEop1N02Vbd/OdAk5AyDKZ9n3HAWDHWnaUOuaMWse7I9+2r/y898CEH7E1wBNQ6sh7BwIBeQXkTAAxjXWvYkopobWGWiu01gghgGJHoAKlFCIRYurwoUBrgxgJeW2IaUfKHa1t6L2LOh4nfjA47vc7rLWgWGFdxu12g1J3pNygTYIxDtYaKdv7DOccYowiZts2GaeDncFqvXcIIUEtSVQyARHnEYEqKHjkvMK6JCS/Ss45S8n8kRXO8wznAoyNkl8uFzjnoQ3BOSu2sCompMhltkdDH4Rndllo7YBfpWyjteTasMIGogAigvMRxniZr+v67MM3hewZw3sP6yIuHwrX64d4ZS1hnvXDAhIbWhve90dDnk05PGRyViNehohSKowxSCkiBEIpm5DxOl7Din95eCYcfjnUWhAo4e39imVRUkoIEdfZStN4D5Mu2slBtZSvko/6Symijn3kDfxeqUUUcdS6wRgrOdvT+yhzzE/38NVtP5rGBzEBX3YGd/S/mF79jwN4KjhwtucvfAJ2pvdodCMVngAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"neuralnet_plot\"\n        title=\"neuralnet_plot\"\n        src=\"/static/3eb1d27df0529ffc06ca543eabbf49e1/37523/neuralnet_plot.png\"\n        srcset=\"/static/3eb1d27df0529ffc06ca543eabbf49e1/e9ff0/neuralnet_plot.png 180w,\n/static/3eb1d27df0529ffc06ca543eabbf49e1/f21e7/neuralnet_plot.png 360w,\n/static/3eb1d27df0529ffc06ca543eabbf49e1/37523/neuralnet_plot.png 720w,\n/static/3eb1d27df0529ffc06ca543eabbf49e1/302a4/neuralnet_plot.png 1080w,\n/static/3eb1d27df0529ffc06ca543eabbf49e1/07a9c/neuralnet_plot.png 1440w,\n/static/3eb1d27df0529ffc06ca543eabbf49e1/d9ed5/neuralnet_plot.png 2880w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위와같이 나오는 것을 알 수 있다. 4개의 은닉노드를 갖는 4개의 은닉층을 거쳐 출력변수인 Species에게 가는 인공신경망이다.</p>\n<p>이제 이 결과가 맞나 검증해보도록 하자. 우선 pred를 출력해보고, 이를 test에 맞게 바꿔주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> head<span class=\"token punctuation\">(</span>pred<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>          <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>         <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">6</span>  <span class=\"token number\">0.9999899</span> <span class=\"token operator\">-</span><span class=\"token number\">3.155724e-05</span> <span class=\"token number\">1.319032e-05</span>\n<span class=\"token number\">7</span>  <span class=\"token number\">0.9999899</span> <span class=\"token operator\">-</span><span class=\"token number\">3.155724e-05</span> <span class=\"token number\">1.319032e-05</span>\n<span class=\"token number\">9</span>  <span class=\"token number\">0.9999899</span> <span class=\"token operator\">-</span><span class=\"token number\">3.155724e-05</span> <span class=\"token number\">1.319032e-05</span>\n<span class=\"token number\">12</span> <span class=\"token number\">0.9999899</span> <span class=\"token operator\">-</span><span class=\"token number\">3.155724e-05</span> <span class=\"token number\">1.319032e-05</span>\n<span class=\"token number\">14</span> <span class=\"token number\">0.9999899</span> <span class=\"token operator\">-</span><span class=\"token number\">3.155724e-05</span> <span class=\"token number\">1.319032e-05</span>\n<span class=\"token comment\"># predict 결과, 제일 높은 값의 열로 활성화 될 것이다.</span>\n<span class=\"token comment\"># 1열, 2열, 3열은 각각 setosa, versicolor, virginica 이므로 이에 맞게 라벨링을 해주자.</span>\n<span class=\"token operator\">></span> predicted_class <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 가장 큰 열의 Species를 이름으로 바꿔준다.</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span> nrow<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">></span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span> nrow<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token operator\">+</span> loc <span class=\"token operator\">&lt;-</span> which.max<span class=\"token punctuation\">(</span>pred<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">+</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>loc <span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token operator\">+</span>     predicted_class <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span>predicted_class<span class=\"token punctuation\">,</span> <span class=\"token string\">'setosa'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">+</span> <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>loc <span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token operator\">+</span>     predicted_class <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span>predicted_class<span class=\"token punctuation\">,</span> <span class=\"token string\">'versicolor'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">+</span> <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n<span class=\"token operator\">+</span>     predicted_class <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span>predicted_class<span class=\"token punctuation\">,</span> <span class=\"token string\">'virginica'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">+</span> <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">+</span> <span class=\"token punctuation\">}</span>\n<span class=\"token comment\"># test의 Species와 predict된 결과를 비교</span>\n<span class=\"token operator\">></span> table<span class=\"token punctuation\">(</span>condition<span class=\"token operator\">=</span>test<span class=\"token operator\">$</span>Species<span class=\"token punctuation\">,</span> predicted_class<span class=\"token punctuation\">)</span>\n            predicted_class\ncondition    setosa versicolor virginica\n  setosa         <span class=\"token number\">13</span>          <span class=\"token number\">0</span>         <span class=\"token number\">0</span>\n  versicolor      <span class=\"token number\">0</span>         <span class=\"token number\">16</span>         <span class=\"token number\">1</span>\n  virginica       <span class=\"token number\">0</span>          <span class=\"token number\">2</span>        <span class=\"token number\">16</span></code></pre></div>\n<p>오차가 3개 있긴 하지만, 대체적으로 잘 나오는 것을 확인할 수 있다.</p>\n<h2 id=\"나이브베이즈-분류\" style=\"position:relative;\"><a href=\"#%EB%82%98%EC%9D%B4%EB%B8%8C%EB%B2%A0%EC%9D%B4%EC%A6%88-%EB%B6%84%EB%A5%98\" aria-label=\"나이브베이즈 분류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>나이브베이즈 분류</h2>\n<h3 id=\"베이즈-이론bayes-theorem\" style=\"position:relative;\"><a href=\"#%EB%B2%A0%EC%9D%B4%EC%A6%88-%EC%9D%B4%EB%A1%A0bayes-theorem\" aria-label=\"베이즈 이론bayes theorem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>베이즈 이론(Bayes Theorem)</h3>\n<p>통계학에서 확률은 크게 <strong>빈도 확률</strong>과 <strong>베이지안 확률</strong>로 구분된다. 빈도확률은 객관적으로 베이지안은 주관적으로 확률을 해석한다.</p>\n<p>베이즈 정리에서 확률은 ‘주장 혹은 믿음의 신뢰도’로 나타난다. 베이즈 이론을 ‘두 확률변수의 사전확률과 사후 확률 사이의 관계를 나타내는 정리’라고도 한다.</p>\n<h3 id=\"나이브-베이즈-분류\" style=\"position:relative;\"><a href=\"#%EB%82%98%EC%9D%B4%EB%B8%8C-%EB%B2%A0%EC%9D%B4%EC%A6%88-%EB%B6%84%EB%A5%98\" aria-label=\"나이브 베이즈 분류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>나이브 베이즈 분류</h3>\n<p>베이즈 정리를 기반으로 한 <u>지도학습</u> 모델로 스팸 메일 필터링, 텍스트 분류 등에 사용할 수 있다.</p>\n<h2 id=\"k-nnk-nearest-neighbor-알고리즘\" style=\"position:relative;\"><a href=\"#k-nnk-nearest-neighbor-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\" aria-label=\"k nnk nearest neighbor 알고리즘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>k-NN(k-Nearest Neighbor) 알고리즘</h2>\n<p>분류분석에 속하지만 군집의 특성도 있어 준 지도학습으로 분류하기도 한다.</p>\n<p>k-nn은 정답 라벨이 없는 새로운 데이터를 입력 받았을 때 그 데이터로부터 가장 가까이에 있는 데이터의 정답 라벨을 확인하여 새로운 데이터의 정답 라벨을 결정한다. k는 주변 데이터의 수를 의미하는데, 최적의 k를 찾는 것이 관건이다. 보통 총 데이터들의 제곱근 값을 k로 한다.</p>\n<h2 id=\"svmsupport-vector-machine-서포트벡터머신\" style=\"position:relative;\"><a href=\"#svmsupport-vector-machine-%EC%84%9C%ED%8F%AC%ED%8A%B8%EB%B2%A1%ED%84%B0%EB%A8%B8%EC%8B%A0\" aria-label=\"svmsupport vector machine 서포트벡터머신 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SVM(Support Vector Machine, 서포트벡터머신)</h2>\n<p>지도학습에 주로 이용되며 분류 성능이 뛰어 분류분석에 활용도가 높다. 가장 높은 마진을 가져가는 방향으로 분류한다. 마진이 클수록 학습에 사용하지 않는 새로운 데이터가 들어오더라도 분류를 잘 할 가능성이 높기 때문이다. SVM은 초평면을 이용하여 카테고리를 나누어 비확률적 이진 선형모델을 만든다.</p>\n<h2 id=\"분류-모형-성과-평가\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EB%A5%98-%EB%AA%A8%ED%98%95-%EC%84%B1%EA%B3%BC-%ED%8F%89%EA%B0%80\" aria-label=\"분류 모형 성과 평가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>분류 모형 성과 평가(!)</h2>\n<p>여러 분류 기법을 적용해보고 가장 예측력이 좋은 모델을 최종 모델로 선정하기 위해 평가 기준이 필요하다.</p>\n<h3 id=\"오분류표와-평가지표--계산할-줄-알아야함\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%B6%84%EB%A5%98%ED%91%9C%EC%99%80-%ED%8F%89%EA%B0%80%EC%A7%80%ED%91%9C--%EA%B3%84%EC%82%B0%ED%95%A0-%EC%A4%84-%EC%95%8C%EC%95%84%EC%95%BC%ED%95%A8\" aria-label=\"오분류표와 평가지표  계산할 줄 알아야함 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오분류표와 평가지표 : 계산할 줄 알아야함</h3>\n<p>실제값과 예측치의 값에 대한 옳고 그름을 오분류표에 나타낸다. 실제집단은 test 데이터에서 얻고, 예측집단은 train 데이터에서 얻는 것이라고 생각할 수 있다.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Positive 예측</th>\n<th>Negative 예측</th>\n<th>합계</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Positive 실제</td>\n<td>TP</td>\n<td>FN</td>\n<td>민감도(재현율)<br />TP/(TP+FN)</td>\n</tr>\n<tr>\n<td>Negative 실제</td>\n<td>FP</td>\n<td>TN</td>\n<td>특이도<br />TN/(FP+TN)</td>\n</tr>\n<tr>\n<td>오분류율<br />(FN+FP)/(TP+FN_FP+TN)</td>\n<td>정밀도<br />TP/(TP+FP)</td>\n<td></td>\n<td>정분류율<br />(TP+TN)/(TP+FN+FP+TN)</td>\n</tr>\n</tbody>\n</table>\n<p>셀의 값이 AB라고 했을때 의미하는 것은 다음과 같다.</p>\n<p>A: 정답 여부(실제값과 일치하는지의 여부) → T/F로 표현함</p>\n<p>B: 예측값(<strong>예측집단의 값</strong>) → P/N으로 표현함</p>\n<ul>\n<li>\n<p>평가지표(주관식으로 나올 수 있음!)</p>\n<ul>\n<li>\n<p>정분류율 = <strong>정확도</strong>(Accuracy) : 전체 관측지 중 올바르게(T) 예측한 비율</p>\n</li>\n<li>\n<p><strong>오분류율</strong>(Error rate) : 전체 관측지 중 잘못(F) 예측한 비율</p>\n</li>\n<li>\n<p><strong>민감도 = 재현율</strong>(Sensitivity) : 실제 T중 올바르게 T를 찾은 비율 → 모형의 완정성을 평가하는 지표</p>\n</li>\n<li>\n<p><strong>특이도</strong>(Specificity) : 실제 F 중 올바르게 F를 찾은 비율</p>\n</li>\n<li>\n<p><strong>정밀도</strong>(Precision) : 예측 T중 올바르게 T를 찾은 비율</p>\n</li>\n<li>\n<p><strong>F1 Score</strong> : 정밀도와 재현율의 조화평균 값 → 값이 높을수록 좋다</p>\n<p>$F1 score = \\frac{2<em>Precision</em>Recall}{Precision+Recall}$</p>\n</li>\n<li>\n<p><strong>거짓 긍정률</strong>(FPR : False Positive Rate) : 실제 N인 값 중 P로 잘못 분류한 비율</p>\n<p>$1-\\frac{TN}{FP+TN} = \\frac{FP}{FP+TN}$</p>\n</li>\n</ul>\n<p>정확도~오분류율/ 민감도(재현율)~특이도/ 정밀도/F1 Score/ 거짓긍정률 을 짝지어서 알고 있도록 하자.</p>\n</li>\n</ul>\n<h3 id=\"rocreceiver-operating-characteristic-curve-커브\" style=\"position:relative;\"><a href=\"#rocreceiver-operating-characteristic-curve-%EC%BB%A4%EB%B8%8C\" aria-label=\"rocreceiver operating characteristic curve 커브 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ROC(Receiver Operating Characteristic Curve) 커브</h3>\n<p>분류분석모형의 평가를 쉽게 비교할 수 있도록 시각화한 그래프이다.</p>\n<p>x축은 <u>FPR(1-특이도)</u>값을, y축은 <u>TPR(민감도)</u> 값을 갖는 그래프이다. 이진분류(0/1)모형의 성능을 평가하기 위해 사용된다. 축은 모두 0~1 사이에 존재할 것이다.</p>\n<p>ROC 커브의 아래 면적을 나타내는 AUROC(Area Under ROC)값이 1에 가까울수록 모형의 성능이 우수하며, 0.5에 가까울수록 랜덤에 가까운 좋지 못한 모형이다.</p>\n<h3 id=\"이익도표lift-chart\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%9D%B5%EB%8F%84%ED%91%9Clift-chart\" aria-label=\"이익도표lift chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이익도표(Lift Chart)</h3>\n<p>역시 모델의 성능을 판단하기 위해 작성한 표이다. 이득곡선(Gain Curve),혹은 이득도표(Gain Chart)라고도 한다.</p>\n<p>목표범주에 속할 확률을 내림차순으로 정렬하여 몇 개의 구간으로 나누어 각 구간에서의 성능을 판단하고 랜덤 모델보다 얼마나 더 뛰어난 성능을 보이는지를 판단한다. 0부터 1까지의 값을 갖고, 0.5이하는 cut-off하며 1이 가장 좋다.</p>\n<h3 id=\"향상도-곡선lift-curve\" style=\"position:relative;\"><a href=\"#%ED%96%A5%EC%83%81%EB%8F%84-%EA%B3%A1%EC%84%A0lift-curve\" aria-label=\"향상도 곡선lift curve permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>향상도 곡선(Lift Curve)</h3>\n<p>랜덤모델과 비교하여 해당 모델의 성과가 얼마나 향상되었는지 구간별로 파악하기 위한 그래프이다. 좋은 모델일수록 큰 값에서 시작하여 급격히 감소한다.</p>\n<p>지도학습에 속하는 분류분석의 종류에 대하여 파악하고 각 분석 방법의 장단점과 특이점을 파악하도록 하자. 그리고 모형의 성능을 평가하는 척도 또한 계산하는 것까지 공부하도록 하자.</p>","frontmatter":{"date":"February 20, 2022","title":"(ADsP) 3과목(데이터 분석) 3장. 정형 데이터 마이닝 (上)","categories":"ADsP","author":"choieastsea","emoji":"🚀"},"fields":{"slug":"/ADsP-3-(3)-1/"}},"site":{"siteMetadata":{"siteUrl":"https://choieastsea.github.io","comments":{"utterances":{"repo":"choieastsea/choieastsea.github.io"}}}}},"pageContext":{"slug":"/Alg-BOJ-11279/","nextSlug":"/full-stack-in-js/","prevSlug":"/ADsP-3-(3)-1/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}