{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/WEB-jwt(3)/",
    "result": {"data":{"cur":{"id":"2197d178-4869-524d-92fd-c5d919db41c0","html":"<p>ì €ë²ˆê¹Œì§€ëŠ” <code class=\"language-text\">fastapi</code>ë¥¼ ì´ìš©í•˜ì—¬ ì„œë²„ì‚¬ì´ë“œì˜ jwt í† í° ë¡œì§ì„ êµ¬í˜„í•´ë³´ì•˜ë‹¤. ë¡œì§ ìì²´ë¥¼ ì´í•´í•œë‹¤ë©´ <code class=\"language-text\">flask</code>ë‚˜ ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ì—ë„ ì°¸ê³ í•˜ì—¬ ì ìš©ì´ ê°€ëŠ¥í•  ê²ƒì´ë‹¤. ì˜¤ëŠ˜ì€ í”„ë¡ íŠ¸ì—ì„œ í•´ì¤˜ì•¼í•  ê²ƒë“¤ì„ ìœ„ì£¼ë¡œ êµ¬í˜„í•´ë³´ì.! <code class=\"language-text\">react js</code>ì˜ <code class=\"language-text\">CRA</code>ë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„í•  ì˜ˆì •ì´ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” access tokenì— ëŒ€í•œ íë¦„ì„ ìœ„ì£¼ë¡œ ìƒê°í•˜ë©´ ì¢‹ì„ ê²ƒì´ë‹¤.</p>\n<p>ì´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ul>\n<li>recoil : context valueë¥¼ ì €ì¥í•˜ê¸° ìœ„í•˜ì—¬ ì‚¬ìš©í•œë‹¤</li>\n<li>axios : fetch apië¥¼ ì´ìš©í•˜ê³  ì´ë¥¼ ëª¨ë“ˆí™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤</li>\n</ul>\n<h1 id=\"reactì—ì„œ-í•´ì¤˜ì•¼-í• -ê²ƒë“¤\" style=\"position:relative;\"><a href=\"#react%EC%97%90%EC%84%9C-%ED%95%B4%EC%A4%98%EC%95%BC-%ED%95%A0-%EA%B2%83%EB%93%A4\" aria-label=\"reactì—ì„œ í•´ì¤˜ì•¼ í•  ê²ƒë“¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>reactì—ì„œ í•´ì¤˜ì•¼ í•  ê²ƒë“¤</h1>\n<p>ëª‡ê°€ì§€ë§Œ ê¸°ì–µí•˜ì.</p>\n<ol>\n<li>ë¡œê·¸ì¸ ì„±ê³µì‹œ, access tokenì€ context ë³€ìˆ˜ë¡œ ê°–ê³  ìˆë„ë¡ í•œë‹¤.</li>\n<li><code class=\"language-text\">Authorization</code>ì´ í•„ìš”í•œ ìš”ì²­ì— ëŒ€í•˜ì—¬ access tokenì„ ì‹¤ì–´ì„œ ë³´ë‚¸ë‹¤.</li>\n<li>ë§Œì•½, access tokenì´ ë§Œë£Œë˜ê±°ë‚˜(401) ì—†ë‹¤ë©´ refresh tokenì„ ì´ìš©í•˜ì—¬ ì¬ë°œê¸‰ ë°›ëŠ”ë‹¤.</li>\n<li>access tokenì„ ì¬ë°œê¸‰ ë°›ì•˜ë‹¤ë©´ ê·¸ê²ƒì„ Bearerì— ì‹¤ì–´ì„œ ë‹¤ì‹œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</li>\n<li>refresh tokenì´ ë§Œë£Œë˜ê±°ë‚˜ ì—†ë‹¤ë©´(401) ë‹¤ì‹œ ë¡œê·¸ì¸ì„ í•˜ë„ë¡ í•œë‹¤.</li>\n</ol>\n<h3 id=\"proxy\" style=\"position:relative;\"><a href=\"#proxy\" aria-label=\"proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>proxy</h3>\n<p>api ì„œë²„ì™€ ì†Œí†µí•˜ê¸° ìœ„í•˜ì—¬ proxy ì„¤ì •ì„ í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ì¸ì¦ ì„œë²„ëŠ” 8000ë²ˆ, í´ë¼ì´ì–¸íŠ¸ ì„œë²„ëŠ” 3000ë²ˆì— ìœ„ì¹˜í•´ìˆê¸° ë•Œë¬¸ì— <code class=\"language-text\">origin</code>ì´ ë‹¤ë¥´ë‹¤. ë”°ë¼ì„œ, refresh tokenì´ <code class=\"language-text\">set-cookie</code>ë¡œ ì¸í•˜ì—¬ ì„¤ì •ë˜ì§€ ì•Šìœ¼ë‹ˆ <code class=\"language-text\">package.json</code>ìœ¼ë¡œ ê°€ì„œ <code class=\"language-text\">proxy</code> í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•˜ê³  ë¡œì»¬ ì„œë²„ì˜ urlì„ ì ì–´ì£¼ì. proxyë¥¼ í†µí•˜ì—¬ ë¸Œë¼ìš°ì €ê°€ <strong>ê°™ì€ í¬íŠ¸ì˜ ì„œë²„ì—ë‹¤ê°€ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒê³¼ ê°™ì€ ì°©ê°</strong>ì„ ì¤„ ìˆ˜ ìˆë‹¤!</p>\n<p>ë¬¼ë¡ , ì‹¤ì œ ë°°í¬ë¥¼ í•œë‹¤ë©´ ì´ë¥¼ í•´ê²°í•´ì£¼ê¸° ìœ„í•˜ì—¬ <code class=\"language-text\">https</code>ë¥¼ ë„ì…í•´ì•¼í•  ê²ƒì´ë‹¤. ê·¸ë˜ì•¼ cross-originì— ëŒ€í•œ <code class=\"language-text\">set-cookie</code>ê°€ ê°€ëŠ¥í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t...\n\t<span class=\"token property\">\"proxy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:8000/\"</span><span class=\"token punctuation\">,</span>\n\t...\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>í•µì‹¬ì€ access tokenë§Œ ë¦¬ì•¡íŠ¸ì—ì„œ ê´€ì‹¬ì„ ê°–ëŠ” ê²ƒì´ê³ , refresh tokenì€ ì„œë²„ì— ì˜ì¡´ì ì¸ ë¡œì§ì´ë¼ëŠ” ê²ƒì„ ìœ ë…í•˜ì. access tokenì€ recoil stateë¡œ ê´€ë¦¬ë˜ì–´, ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ í•˜ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// recoil.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> accessTokenState <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">atom</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    key<span class=\"token operator\">:</span> <span class=\"token string\">'accessTokenState'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// App.tsx</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>accessToken<span class=\"token punctuation\">,</span> setAccessToken<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilState</span><span class=\"token punctuation\">(</span>accessTokenState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">...</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLogined</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLogined</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>accessToken<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>access tokenì˜ ê°’ì´ <code class=\"language-text\">''</code>ê°€ ì•„ë‹ˆë¼ë©´ ë¡œê·¸ì¸ì´ ë˜ì–´ìˆë‹¤ê³  íŒë‹¨í•  ê²ƒì´ë‹¤.</p>\n<h2 id=\"ë¡œê·¸ì¸-ìš”ì²­\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%9A%94%EC%B2%AD\" aria-label=\"ë¡œê·¸ì¸ ìš”ì²­ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¡œê·¸ì¸ ìš”ì²­</h2>\n<p>ë¡œê·¸ì¸ì€ ì¸ì¦ì´ ì—†ì–´ë„ ë˜ëŠ” ìš”ì²­ì´ê³ , ì„±ê³µí•œë‹¤ë©´ <code class=\"language-text\">accessToken</code>ì„ set í•´ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleLogin</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> axiosConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/x-www-form-urlencoded\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'username'</span><span class=\"token operator\">:</span> email<span class=\"token punctuation\">,</span> <span class=\"token string\">'password'</span><span class=\"token operator\">:</span> pw <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> axiosConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ë¡œê·¸ì¸ ì„±ê³µ'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">?.</span>access_token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">AxiosError</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>response<span class=\"token operator\">?.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">401</span> <span class=\"token operator\">||</span> <span class=\"token number\">422</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ë¡œê·¸ì¸ ì‹¤íŒ¨'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"ë¡œê·¸ì•„ì›ƒ\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%95%84%EC%9B%83\" aria-label=\"ë¡œê·¸ì•„ì›ƒ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¡œê·¸ì•„ì›ƒ</h2>\n<p>ë¡œê·¸ì•„ì›ƒì˜ ê²½ìš°, serverì—ì„œ refresh tokenì„ ì§€ì›Œì¤„ ê²ƒì´ê³ , reactì—ì„œëŠ” access tokenë„ ì§€ì›Œì£¼ë©´ ë  ê²ƒì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleLogout</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'logout/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ë¡œê·¸ì•„ì›ƒ ì„±ê³µ'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"refresh-ë¡œì§\" style=\"position:relative;\"><a href=\"#refresh-%EB%A1%9C%EC%A7%81\" aria-label=\"refresh ë¡œì§ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>refresh ë¡œì§</h2>\n<p>ë§Œì•½, access tokenì´ ì—†ê±°ë‚˜, ìœ íš¨í•˜ì§€ ì•Šë‹¤ê³  í–ˆì„ ë•Œ <code class=\"language-text\">refresh</code>ë¥¼ í•´ì¤˜ì•¼í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">refresh</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** \n     *  refreshí•˜ê³ , access tokenì„ ë¦¬í„´\n     */</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'refresh/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> data<span class=\"token operator\">?.</span>access_token<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>refreshì˜ ê²½ìš°, access tokenë§Œì„ ë¦¬í„´í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. access tokenì„ setí•´ì£¼ëŠ” ë¡œì§ì€ ë”°ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">refreshAndSet</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> accessToken <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// refresh or logout</span>\n    <span class=\"token function\">refreshAndSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ì²˜ëŸ¼ ìƒˆë¡œê³ ì¹¨í•œ ê²½ìš° refreshë¥¼ í•´ì£¼ê³ , ë§Œì•½ refreshê°€ ì•ˆëœë‹¤ë©´ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ë¥¼ í•´ì£¼ë©´ ëœë‹¤.</p>\n<h2 id=\"ì¸ì¦ì´-í•„ìš”í•œ-ìš”ì²­-í•¨ìˆ˜\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%9C-%EC%9A%94%EC%B2%AD-%ED%95%A8%EC%88%98\" aria-label=\"ì¸ì¦ì´ í•„ìš”í•œ ìš”ì²­ í•¨ìˆ˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¸ì¦ì´ í•„ìš”í•œ ìš”ì²­ í•¨ìˆ˜</h2>\n<p>ì¸ì¦ì´ í•„ìš”í•œ ìš”ì²­ì— ëŒ€í•œ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë†“ê³  í•„ìš”í• ë•Œë§ˆë‹¤ ì“°ë©´ ì¢‹ì„ ê²ƒì´ë‹¤.</p>\n<p>ì¸ì¦ì´ í•„ìš”í•œ í•¨ìˆ˜ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ê²ƒì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ol>\n<li>\n<p>headerì— access tokenì„ ì‹¤ì–´ì„œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. ë§Œì•½ 401ì´ë¼ë©´, refreshë¥¼ ìˆ˜í–‰í•˜ì—¬ access tokenì„ ì—…ë°ì´íŠ¸í•œë‹¤.</p>\n</li>\n<li>\n<p>ë‹¤ì‹œ ì›ë˜ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">authGet</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>token<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> url<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * urlê³¼ tokenì´ ì£¼ì–´ì¡Œì„ ë•Œ, í•´ë‹¹ get í•¨ìˆ˜ë¥¼ ì‹¤í–‰\n     */</span>\n    <span class=\"token keyword\">const</span> config<span class=\"token operator\">:</span> AxiosRequestConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'Authorization'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>token<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">AxiosError</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>response<span class=\"token operator\">?.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">401</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// need refresh</span>\n          <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> newToken <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> newConfig<span class=\"token operator\">:</span> AxiosRequestConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n              headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">'Authorization'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token comment\">// original request</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> newConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> <span class=\"token string\">'ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë‹¨ìˆœí•˜ê²Œ dataë¥¼ ë¦¬í„´í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ëŠ”ë°, <code class=\"language-text\">react query</code>ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ë” í¸í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 422px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABc0lEQVQ4y5VTya6CQBDk3/0MPXDgTLx5EoMJGqMX0YNL1CAxaDRuuG/1Up03hEWfeZ00PUPP1BQ1hYbfeL1eUp/PJ87nMzabDcIwlPG7UOvToakmgRj1eh25XA66rqPdbqNQKEiWSiUYhoF8Po9msxkdngbW0uw8z8N0OsVut8PlcsF4PMZwOEQQBNLrdrtYLpcRS7VXVe0T9W8R3xcfC0PqREb7/V50Ox6PUvmOWm632yjVnD3m/X5PMuRjtVqhWq2iXC5LdRxHaqPRwOPx+Mjyer3icDhkAdfrNfr9vujFSs0GgwF6vZ5oN5/PM7lYLKSnXJAA5Oe1Wi1YlgXbtmGaJnzfj1gwb7ebVF4Uk3MlTwaQL2ezmdziZDLBaDQSFtSKm5jU7nQ6CSMmQeM+TQDSLjyReinNqGutVhNdK5UKOp2OHEygOGjmlj/Zhqe7rotisShSUNe/7JNgqAwaNyrtQNaqT/3S694a+z//6bceAX8AsajkOgwG5GUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"client\"\n        title=\"client\"\n        src=\"/static/5fa5a057a716e37cdfc96a9294620cf7/fa5c1/client.png\"\n        srcset=\"/static/5fa5a057a716e37cdfc96a9294620cf7/e9ff0/client.png 180w,\n/static/5fa5a057a716e37cdfc96a9294620cf7/f21e7/client.png 360w,\n/static/5fa5a057a716e37cdfc96a9294620cf7/fa5c1/client.png 422w\"\n        sizes=\"(max-width: 422px) 100vw, 422px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzElEQVQY04WPzWoCMRSF8y5uik8oSJ+qy7py1aWCxZZoGBw7OC5czEyTjPn5NFMGBJ164HDDTe6Xc4UxBq011lqapunOxli89yTFGHmmEEJX5x9LhFKK7Vax3/8g5YY8z5FSdvAhYN9LNYSI83/A1ZdClGVJcpZlFEVBVVV3g4/06E7rX0TbtiSn1Y21OOe6x7cphmAhRtaFY7E7833w1HWDePb7f8DaBF6mJaPJgfHrkeOpRvRpbt0PDa3c912IvH9a3haG2bqluia8AMZO0MPrHmdxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"needlogin\" title=\"needlogin\" src=\"/static/b3e7a723dd513ef0cead3c96b869fa1c/37523/needlogin.png\" srcset=\"/static/b3e7a723dd513ef0cead3c96b869fa1c/e9ff0/needlogin.png 180w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/f21e7/needlogin.png 360w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/37523/needlogin.png 720w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/4c42d/needlogin.png 896w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span></p>\n<p>ë¡œê·¸ì¸í•œë‹¤ë©´, logout ë²„íŠ¼ê³¼ <code class=\"language-text\">ìš”ì²­1</code> ë²„íŠ¼ì´ ë³´ì¼ ê²ƒì´ë‹¤. ìš”ì²­ì„ ëˆ„ë¥¸ë‹¤ë©´ ìƒí™©ì— ë”°ë¼</p>\n<ul>\n<li><code class=\"language-text\">authenticated</code> alertê°€ ë‚˜ì˜¤ê±°ë‚˜(ì¸ì¦ ì™„ë£Œ)</li>\n<li>refresh ì´í›„ <code class=\"language-text\">authenticated</code> alertê°€ ë‚˜ì˜¤ê±°ë‚˜ (refresh ì´í›„ ì¬ì‹¤í–‰)</li>\n<li><code class=\"language-text\">loginì´ í•„ìš”í•©ë‹ˆë‹¤.</code> ê°€ ë‚˜ì˜¬ ê²ƒì´ë‹¤.</li>\n</ul>\n<p>ì½”ë“œëŠ” <a href=\"https://github.com/choieastsea/jwt-fastapi-react/commit/05147a825f426e7ce55f47b6e5eef42172e6f5d4\">ê¹ƒí—ˆë¸Œ</a>ë¥¼ ì°¸ê³ í•˜ì.!</p>\n<h1 id=\"ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬</h1>\n<p>ì—¬íƒœê¹Œì§€ jwtì˜ ì›ë¦¬ì™€ ì´ë¥¼ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ êµ¬í˜„í•´ë³´ì•˜ë‹¤. ì‚¬ì‹¤ í† í°ì¸ì¦ì´ë¼ëŠ” ê²ƒì€ ë§¤ìš° ê°„ë‹¨í•œ ê°œë…ì¸ë°, ê·¸ë§Œí¼ ì·¨ì•½ì ì´ ë§ìœ¼ë‹ˆ ì´ë¥¼ ê°œì„ í•œ ë°©ë²• (<code class=\"language-text\">refresh token</code>, <code class=\"language-text\">RTR</code>ê³¼ ê°™ì€)ë“¤ì´ ë§ê³  ì´ë¡œ ì¸í•˜ì—¬ ì–´ë ¤ì›Œì§„ ëŠë‚Œì´ ìˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ, ì´ë ‡ê²Œ ì§ì ‘ êµ¬í˜„í•´ë´ì•¼ ëª¨ë‘ì˜ ìƒí™©ì„ ì•Œ ìˆ˜ ìˆê³  ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì´í•´ë„ë„ ì˜¬ë¼ê°ˆ ê²ƒì´ë‹¤!</p>\n<p>ì˜¤ëŠ˜ê¹Œì§€ì˜ ëª¨ë“  ì½”ë“œëŠ” <a href=\"https://github.com/choieastsea/jwt-fastapi-react\">ì—¬ê¸°</a>ì— ìˆìœ¼ë‹ˆ ì°¸ê³ í•œë‹¤.</p>","excerpt":"ì €ë²ˆê¹Œì§€ëŠ” ë¥¼ ì´ìš©í•˜ì—¬ ì„œë²„ì‚¬ì´ë“œì˜ jwt í† í° ë¡œì§ì„ êµ¬í˜„í•´ë³´ì•˜ë‹¤. ë¡œì§ ìì²´ë¥¼ ì´í•´í•œë‹¤ë©´ ë‚˜ ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ì—ë„ ì°¸ê³ í•˜ì—¬ ì ìš©ì´ ê°€ëŠ¥í•  ê²ƒì´ë‹¤. ì˜¤ëŠ˜ì€ í”„ë¡ íŠ¸ì—ì„œ í•´ì¤˜ì•¼í•  ê²ƒë“¤ì„ ìœ„ì£¼ë¡œ êµ¬í˜„í•´ë³´ì.! ì˜ ë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„í•  ì˜ˆì •ì´ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” access tokenì— ëŒ€í•œ íë¦„ì„ ìœ„ì£¼ë¡œ ìƒê°í•˜ë©´ ì¢‹ì„ ê²ƒì´ë‹¤. ì´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. recoil : context valueë¥¼ ì €ì¥í•˜ê¸° ìœ„í•˜ì—¬ ì‚¬ìš©í•œë‹¤ axios : fetch apië¥¼ ì´ìš©í•˜ê³  ì´ë¥¼ ëª¨ë“ˆí™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤ reactì—ì„œ í•´ì¤˜ì•¼ í•  ê²ƒë“¤ ëª‡ê°€ì§€ë§Œ ê¸°ì–µí•˜ì. ë¡œê·¸ì¸ ì„±ê³µì‹œ, access tokenì€ context ë³€ìˆ˜ë¡œ ê°–ê³  ìˆë„ë¡ í•œë‹¤. ì´ í•„ìš”í•œ ìš”ì²­ì— ëŒ€í•˜ì—¬ access tokenì„ ì‹¤ì–´ì„œ ë³´ë‚¸ë‹¤. ë§Œì•½, access tokenì´ ë§Œë£Œë˜ê±°ë‚˜(401) ì—†ë‹¤ë©´ refresh tokenì„ ì´ìš©í•˜ì—¬ ì¬ë°œê¸‰ ë°›ëŠ”ë‹¤. access tokenì„ ì¬ë°œê¸‰ ë°›ì•˜ë‹¤ë©´ ê·¸ê²ƒì„ Bearerì— ì‹¤ì–´ì„œ â€¦","frontmatter":{"date":"October 14, 2023","title":"(WEB) JWT token ì¸ì¦ ë„ì…í•˜ê¸° (3)","categories":"WEB","author":"choieastsea","emoji":"ğŸ’¨"},"fields":{"slug":"/WEB-jwt(3)/"}},"next":{"id":"7d785e68-c5ae-51f9-a8be-c5643fcfd740","html":"<h1 id=\"intuition\" style=\"position:relative;\"><a href=\"#intuition\" aria-label=\"intuition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intuition</h1>\n<p>ì—£ì§€ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, íŠ¸ë¦¬ê°€ ëª‡ê°œ ì¡´ì¬í•˜ëŠ”ì§€ ì¶œë ¥í•˜ëŠ” ë¬¸ì œì´ë‹¤. <a href=\"https://www.acmicpc.net/problem/4803\">ë§í¬</a></p>\n<p>ì…ë ¥ì´ ê·€ì°®ì§€ë§Œ, íŠ¸ë¦¬ì˜ ì¡°ê±´ì„ ì˜ ìƒê°í•˜ë©´ ì—£ì§€ë“¤ë¡œë§Œ íŠ¸ë¦¬ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.</p>\n<h1 id=\"approach\" style=\"position:relative;\"><a href=\"#approach\" aria-label=\"approach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Approach</h1>\n<ol>\n<li>\n<p>ì²˜ìŒ ë– ì˜¬ë¦° ë°©ë²•ì€ Union Findì´ë‹¤. edgeì— ë‚˜ì˜¤ëŠ” ë…¸ë“œë“¤ì„ union ì—°ì‚°ì„ í•´ì£¼ë©´ ëª‡ê°œì˜ setì´ ìƒê¸°ëŠ”ì§€ ì•Œ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì´í›„, cycleì´ ìƒê¸°ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ë©´ íŠ¸ë¦¬ì˜ ê°¯ìˆ˜ë¥¼ êµ¬í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì´ ë°©ë²•ì€ cycle checkì—ì„œ ë§ì€ ì‹œê°„ì´ ê±¸ë¦´ ê²ƒ ê°™ì•„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤.</p>\n</li>\n<li>\n<p>DFSë‚˜ BFSê°™ì€ íƒìƒ‰ì„ ì´ìš©í•´ë³¼ ìˆ˜ ìˆë‹¤. í•œ ë…¸ë“œì—ì„œ ì¶œë°œí•˜ì—¬ ì´ì–´ì§„ ê³³ì„ ë”°ë¼ ê·¸ë˜í”„ë¥¼ íƒìƒ‰í•˜ë©° íŠ¸ë¦¬ë¥¼ ë§Œë“¤ë„ë¡ í•œë‹¤. ì—¬ê¸°ì„œ í•œ ë…¸ë“œì˜ ë¶€ëª¨ ë…¸ë“œë„ ê¸°ì–µí•˜ë„ë¡ í•˜ì—¬ <strong>ë¶€ëª¨ ë…¸ë“œê°€ ì•„ë‹Œë° ì´ë¯¸ ë°©ë¬¸í•œ ë…¸ë“œì™€ ì—°ê²°ë˜ì–´ ìˆëŠ” ê²½ìš°</strong>ë¥¼ ì‚¬ì´í´ì´ë¼ê³  íŒë‹¨í•˜ì˜€ë‹¤. ì–‘ë°©í–¥ ê·¸ë˜í”„ì´ë¯€ë¡œ í•œ ë…¸ë“œì—ì„œ ì—°ê²°ëœ ë…¸ë“œë“¤ ì¤‘ì—ëŠ” ë¶€ëª¨ë…¸ë“œì™€ ê·¸ê²ƒì´ ì•„ë‹Œ ë…¸ë“œê°€ ìˆì„í…ë°, ë¶€ëª¨ ë…¸ë“œê°€ ì•„ë‹Œë° ì´ë¯¸ ë°©ë¬¸í•˜ì˜€ë‹¤ë©´ ì—­ë°©í–¥ìœ¼ë¡œ ì˜¬ë¼ê°€ëŠ” ì‚¬ì´í´ì´ ìƒì„±ë˜ê¸° ë•Œë¬¸ì´ë‹¤.!</p>\n</li>\n</ol>\n<h1 id=\"complexity\" style=\"position:relative;\"><a href=\"#complexity\" aria-label=\"complexity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Complexity</h1>\n<ul>\n<li>\n<p>Time complexity: O(m)</p>\n<p>ëª¨ë“  ì—£ì§€ë¥¼ íƒìƒ‰í•˜ë¯€ë¡œ ì—£ì§€ì˜ ê°¯ìˆ˜ì¸ mì— ë¹„ë¡€í•œ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°–ëŠ”ë‹¤.</p>\n</li>\n<li>\n<p>Space complexity: O(n)</p>\n<p>visitedì™€ stackì˜ ì‚¬ì´ì¦ˆëŠ” ë…¸ë“œì˜ ê°¯ìˆ˜ì— ë¹„ë¡€í•  ê²ƒì´ë‹¤.</p>\n</li>\n</ul>\n<h1 id=\"code\" style=\"position:relative;\"><a href=\"#code\" aria-label=\"code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code</h1>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sys <span class=\"token keyword\">import</span> stdin\n<span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> defaultdict\n\n<span class=\"token builtin\">input</span> <span class=\"token operator\">=</span> stdin<span class=\"token punctuation\">.</span>readline\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">findTrees</span><span class=\"token punctuation\">(</span>graph<span class=\"token punctuation\">:</span> defaultdict<span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    graphì˜ ì—£ì§€ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, treeì˜ ê°¯ìˆ˜ë¥¼ ë¦¬í„´í•œë‹¤ \n    \"\"\"</span>\n    cnt <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    visited <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">False</span> <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># nodeì—ì„œë¶€í„° dfs í•˜ì—¬ ì™„ë£Œëœë‹¤ë©´ 1 ë¦¬í„´</span>\n        <span class=\"token comment\"># ë˜ ë§ˆì£¼ì¹˜ëŠ” ê²½ìš° ìˆë‹¤ë©´(íŠ¸ë¦¬ ì•„ë‹ˆë¯€ë¡œ) 0 ë¦¬í„´í•œë‹¤!</span>\n        stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># node ë²ˆí˜¸, ì§ì „ parent</span>\n        visited<span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n        <span class=\"token keyword\">while</span> stack<span class=\"token punctuation\">:</span>\n            cur<span class=\"token punctuation\">,</span> parent <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">for</span> adj_node <span class=\"token keyword\">in</span> graph<span class=\"token punctuation\">[</span>cur<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> visited<span class=\"token punctuation\">[</span>adj_node<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># not visited</span>\n                    visited<span class=\"token punctuation\">[</span>adj_node<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n                    stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>adj_node<span class=\"token punctuation\">,</span>cur<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">elif</span> visited<span class=\"token punctuation\">[</span>adj_node<span class=\"token punctuation\">]</span> <span class=\"token keyword\">and</span> adj_node <span class=\"token operator\">!=</span> parent<span class=\"token punctuation\">:</span>  <span class=\"token comment\"># ì´ë¯¸ ë°©ë¬¸í•œ ê²½ìš°</span>\n                    <span class=\"token comment\"># cycle</span>\n                    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span>\n                <span class=\"token keyword\">elif</span> adj_node <span class=\"token operator\">==</span> cur<span class=\"token punctuation\">:</span>\n                    <span class=\"token comment\"># self cycle</span>\n                    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span>\n        <span class=\"token comment\"># í˜„ì¬ê¹Œì§€ íŠ¸ë¦¬ ë°©ë¬¸ì²˜ë¦¬í•˜ê³  1 ë¦¬í„´í•˜ë©´ ë¨(í•˜ë‚˜ì˜ íŠ¸ë¦¬ë¼ê³  ê°„ì£¼ ê°€ëŠ¥)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> visited<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n            <span class=\"token comment\"># iì—ì„œë¶€í„° dfs</span>\n            cnt <span class=\"token operator\">+=</span> dfs<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> cnt\n\ncase_num <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    n<span class=\"token punctuation\">,</span> m <span class=\"token operator\">=</span> <span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ì •ì  ê°¯ìˆ˜(&lt;=500), ì—£ì§€ ìˆ˜</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> m<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">break</span>\n    graph <span class=\"token operator\">=</span> defaultdict<span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> <span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        graph<span class=\"token punctuation\">[</span>a<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>b<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        graph<span class=\"token punctuation\">[</span>b<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>a<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    trees <span class=\"token operator\">=</span> findTrees<span class=\"token punctuation\">(</span>graph<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> trees <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n        comment <span class=\"token operator\">=</span> <span class=\"token string\">'No trees.'</span>\n    <span class=\"token keyword\">elif</span> trees <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n        comment <span class=\"token operator\">=</span> <span class=\"token string\">'There is one tree.'</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        comment <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'A forest of </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>trees<span class=\"token punctuation\">}</span></span><span class=\"token string\"> trees.'</span></span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'Case </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>case_num<span class=\"token punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>comment<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    case_num <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n</code></pre></div>\n<p>DFS í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¼ì„ í•œë‹¤.</p>\n<ul>\n<li>íƒìƒ‰í•˜ë©´ì„œ ë°©ë¬¸í•œ ë…¸ë“œë¥¼ ë°©ë¬¸ ì²˜ë¦¬í•œë‹¤.</li>\n<li>ë” ì´ìƒ ê°ˆ ìˆ˜ ì—†ë‹¤ë©´ 1ì„ ë¦¬í„´í•œë‹¤. ì—¬ê¸°ì„œ ë°©ë¬¸ ì²˜ë¦¬ëœ ë…¸ë“œë“¤ë¼ë¦¬ ê°™ì€ í•˜ë‚˜ì˜ íŠ¸ë¦¬ë¼ê³  ê°„ì£¼í•  ìˆ˜ ìˆë‹¤.</li>\n<li>ì‚¬ì´í´ì´ ìƒê¸´ë‹¤ë©´ 0ì„ ë¦¬í„´í•œë‹¤. (ë¶€ëª¨ê°€ ì•„ë‹Œ ë…¸ë“œë¥¼ ì¬ë°©ë¬¸ í•˜ê±°ë‚˜, í˜„ì¬ ë…¸ë“œê°€ self cycleì„ ê°–ëŠ” ê²½ìš°)</li>\n</ul>\n<p>ê·¸ë¦¬ê³ , ëª¨ë“  ë…¸ë“œì— ëŒ€í•˜ì—¬ ë°©ë¬¸í•˜ì§€ ì•Šì•˜ë‹¤ë©´ (ì–´ë– í•œ íŠ¸ë¦¬ì— ì†í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´) DFSë¥¼ ìˆ˜í–‰í•œë‹¤.</p>\n<p>BFSë¥¼ ì‚¬ìš©í• ìˆ˜ë„ ìˆì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œ ê³µê°„ë³µì¡ë„ê°€ ë” ë†’ìœ¼ë¯€ë¡œ ê°„ë‹¨í•˜ê²Œ DFSë¡œ êµ¬í˜„í•˜ì˜€ë‹¤.</p>","frontmatter":{"date":"October 12, 2023","title":"(Alg) BOJ 4803. íŠ¸ë¦¬ ê°¯ìˆ˜","categories":"Alg","author":"choieastsea","emoji":"ğŸ« "},"fields":{"slug":"/Alg-BOJ-4803/"}},"prev":{"id":"4816b4db-01ed-5807-a7d1-a04d66600126","html":"<p>ì €ë²ˆê¹Œì§€ ìš´ì˜ì²´ì œì˜ Schedulingì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ë‹¤. ì˜¤ëŠ˜ì€ í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹ ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ì.</p>\n<h1 id=\"inter-process-communicationipc\" style=\"position:relative;\"><a href=\"#inter-process-communicationipc\" aria-label=\"inter process communicationipc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inter Process Communication(IPC)</h1>\n<p>ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë“¤ì€ ë…ë¦½ì ì¸ ë©”ëª¨ë¦¬ ê³µê°„(memory space)ë¥¼ ê°–ê³  ìˆìœ¼ë¯€ë¡œ, ë©”ëª¨ë¦¬ë¥¼ ê³µìœ í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ, í”„ë¡œì„¸ìŠ¤ê°„ communicationì´ í•„ìš”í•œ ê²½ìš°ê°€ ë§ìœ¼ë©° ì„œë¡œ ë°ì´í„°ë¥¼ ê³µìœ í•  ìƒí™©ë„ ìƒê¸°ë¯€ë¡œ, ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ <code class=\"language-text\">IPC mechanism</code>ì— ëŒ€í•˜ì—¬ ì•Œ í•„ìš”ê°€ ìˆë‹¤.</p>\n<h1 id=\"shared-memory\" style=\"position:relative;\"><a href=\"#shared-memory\" aria-label=\"shared memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shared Memory</h1>\n<p>ê·¸ ì¤‘ ì²«ë²ˆì§¸ë¡œ <code class=\"language-text\">shared memory</code>ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì.</p>\n<p><code class=\"language-text\">shmget()</code> ì‹œìŠ¤í…œ ì½œì„ í†µí•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë“¤ì€ ê°™ì€ ì˜ì—­ì˜ ê³µìœ  ë©”ëª¨ë¦¬ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</p>\n<blockquote>\n<p>int shmget(key_t key, int size, int shmflg)</p>\n<p>ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ì—ì„œ ê°™ì€ keyë¥¼ í†µí•˜ì—¬ ê°™ì€ shared memoryì˜ì—­ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ëœë‹¤</p>\n</blockquote>\n<p>í•´ë‹¹ ì‹œìŠ¤í…œ ì½œì„ í†µí•˜ì—¬ ë‹¤ìˆ˜ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ê³µìœ ëœ ë©”ëª¨ë¦¬ ìì›ì— ì ‘ê·¼í•˜ì—¬ read/write ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ, ì£¼ì˜í•´ì•¼í•  ì ë„ ì¡´ì¬í•œë‹¤. shared memoryëŠ” ë‹¨ì§€ ë¹ˆ ë©”ëª¨ë¦¬ ì˜ì—­ì´ë¯€ë¡œ, ë™ì‹œì— í”„ë¡œì„¸ìŠ¤ë“¤ì´ ê°™ì€ ê³µê°„ì— writeí•˜ëŠ” ê²½ìš°(overwrite)ì— ëŒ€í•œ ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤.</p>\n<h1 id=\"signals\" style=\"position:relative;\"><a href=\"#signals\" aria-label=\"signals permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Signals</h1>\n<p>ë‹¤ìŒìœ¼ë¡œëŠ” OSì—ì„œ ì œê³µí•˜ëŠ” signalì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆì„ ê²ƒì´ë‹¤. ê°€ì¥ ë„ë¦¬ ì•Œë ¤ì§„ signalë¡œëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•˜ê¸° ìœ„í•´ ctrl+cë¥¼ ëˆŒëŸ¬ <code class=\"language-text\">kill -9 signal</code>ì„ ë°œìƒì‹œí‚¤ëŠ” ê²ƒ ë“±ì´ ìˆì„ ê²ƒì´ë‹¤. ë˜í•œ user-defined signalë„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆëŠ”ë°, ì–´ì¨Œë“  ì´ëŸ¬í•œ signalì„ í†µí•˜ì—¬ <strong>í•œ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¡œ ì–´ë– í•œ ê°’(ì‹ í˜¸)ì„ ì „ë‹¬</strong> í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.</p>\n<p>ëª¨ë“  í”„ë¡œì„¸ìŠ¤ëŠ” signalì„ ì „ë‹¬ë°›ìœ¼ë©´ <code class=\"language-text\">signal handler</code>ê°€ í˜¸ì¶œë˜ëŠ”ë°, ë°ì´í„°ë¥¼ ì „ë‹¬ ë°›ì€ í”„ë¡œì„¸ìŠ¤ì—ì„œ í•´ë‹¹ ì‹œê·¸ë„ì„ ì „ë‹¬ ë°›ì•˜ì„ ë•Œ ì²˜ë¦¬í•´ì•¼í•  ì¼ë“¤ì„ ì •ì˜í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ë¬¼ë¡  fixë˜ì–´ overwriteí•  ìˆ˜ ì—†ëŠ” signal handlerë„ ì¡´ì¬(SIGKILL, SIGSTOP)í•˜ë¯€ë¡œ ì°¸ê³ í•˜ì.</p>\n<h1 id=\"sockets\" style=\"position:relative;\"><a href=\"#sockets\" aria-label=\"sockets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sockets</h1>\n<p>í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹ ì€ í•­ìƒ ê°™ì€ ì»´í“¨í„°ì—ì„œë§Œ ì´ë£¨ì–´ì§€ì§€ëŠ” ì•Šì„ ê²ƒì´ë‹¤. ìš°ë¦¬ê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” <code class=\"language-text\">TCP/UDP</code> í†µì‹ ì€ ì™¸ë¶€ ê¸°ê¸°ì˜ í”„ë¡œì„¸ìŠ¤ì™€ì˜ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•´ì¤€ë‹¤. ë˜í•œ, ê°™ì€ ê¸°ê¸° ë‚´ì˜ í”„ë¡œì„¸ìŠ¤ê°„ì—ë„ <code class=\"language-text\">Unix Sockets</code>ì„ í†µí•˜ì—¬ ì†Œì¼“ í†µì‹ ì„ í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ì†Œì¼“ í†µì‹ ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ ë©”ì»¤ë‹ˆì¦˜ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ul>\n<li>ê° í”„ë¡œì„¸ìŠ¤ëŠ” ì‹œìŠ¤í…œì½œì„ í†µí•˜ì—¬ ì†Œì¼“ì„ ì—´ê³  í†µì‹ í•  í”„ë¡œì„¸ìŠ¤ì™€ ì—°ê²°í•œë‹¤.</li>\n<li>í•˜ë‚˜ì˜ ì†Œì¼“ì„ í†µí•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë“¤ì€ ë©”ì‹œì§€ë¥¼ read/writeí•œë‹¤.</li>\n<li>ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œì— ë”°ë¼ êµ¬ì²´ì ì¸ í†µì‹  ë°©ë²•ì€ ë‹¬ë¼ì§„ë‹¤.</li>\n<li>OSëŠ” ë°ì´í„°ë¥¼ socket bufferë¥¼ í†µí•˜ì—¬ ì „ì†¡í•˜ë©°, í”„ë¡œì„¸ìŠ¤ëŠ” í•´ë‹¹ ë²„í¼ì—ì„œë¶€í„° ë°ì´í„°ë¥¼ ì½ì–´ì˜¬ ê²ƒì´ë‹¤.</li>\n</ul>\n<h1 id=\"pipes\" style=\"position:relative;\"><a href=\"#pipes\" aria-label=\"pipes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pipes</h1>\n<p>pipeëŠ” ë³´í†µ í”„ë¡œì„¸ìŠ¤ê°„ ë°˜ì´ì¤‘ í†µì‹ , ì¦‰ <code class=\"language-text\">half duplex</code>ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ì‚¬ìš©ëœë‹¤. (ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ì†¡ìˆ˜ì‹ ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, í•œ íŒŒì´í”„ì—ì„œëŠ” ì˜¤ì§ ì†¡ì‹  ë˜ëŠ” ìˆ˜ì‹ ë§Œ ê°€ëŠ¥í•˜ë‹¤. ë¬´ì „ê¸°ì™€ ìœ ì‚¬)</p>\n<p>pipeë¥¼ ë§Œë“œëŠ” system callì„ í˜¸ì¶œ ì‹œ, ë°ì´í„°ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•œ file descriptorê°€ ë¦¬í„´ë˜ëŠ”ë°, ì´ë¥¼ í†µí•˜ì—¬ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆê³  ë³´í†µ READë¥¼ ìœ„í•œ file descriptorì™€ WRITEë¥¼ ìœ„í•œ file descriptorë¥¼ ì‚¬ìš©í•˜ì—¬ ë°˜ì´ì¤‘ í†µì‹ ì— ì‚¬ìš©ëœë‹¤.</p>\n<p>íŒŒì´í”„ëŠ” í¬ê²Œ ë‘ê°€ì§€ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>\n<p>ë¶€ëª¨ì™€ ìì‹ í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹ </p>\n<p>ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” fdë¥¼ ë§Œë“¤ê³ , forkí•˜ì—¬ ìì‹ í”„ë¡œì„¸ìŠ¤ì™€ ì´ë¥¼ ê³µìœ í•˜ì—¬ í†µì‹ í•˜ë„ë¡ í•œë‹¤.</p>\n</li>\n<li>\n<p>named pipes</p>\n<p>ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ íŒŒì´í”„ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ named pipeë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n</li>\n</ul>\n<p>pipeë¥¼ í†µí•œ í†µì‹  ì—­ì‹œ, socketê³¼ ìœ ì‚¬í•˜ê²Œ OSê°€ bufferë¥¼ í†µí•˜ì—¬ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.</p>\n<h1 id=\"message-queues\" style=\"position:relative;\"><a href=\"#message-queues\" aria-label=\"message queues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Message Queues</h1>\n<p>message queueëŠ” mailboxë¥¼ ì´ìš©í•œ indirect communicationë°©ì‹ì´ë¼ê³  ìƒê°í•˜ë©´ í¸í•  ê²ƒ ê°™ë‹¤.</p>\n<p>ProcessëŠ” íŠ¹ì • ìœ„ì¹˜ì˜ mailboxë¥¼ ì—´ê³ , ë©”ì‹œì§€ë¥¼ ì „ì†¡ë°›ê±°ë‚˜ ì „ì†¡í•  ìˆ˜ ìˆë‹¤. ì´ ë°©ë²• ì—­ì‹œ OSê°€ ë©”ì‹œì§€ë¥¼ bufferí•˜ì—¬ ì „ì†¡í•œë‹¤ê³  í•œë‹¤.</p>\n<h2 id=\"blocking-vs-non-blocking-communication\" style=\"position:relative;\"><a href=\"#blocking-vs-non-blocking-communication\" aria-label=\"blocking vs non blocking communication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Blocking vs Non-Blocking Communication</h2>\n<p>IPC ë©”ì»¤ë‹ˆì¦˜ë“¤ì€ í•´ë‹¹ ë°ì´í„° ì „ì†¡ê³¼ì •ì—ì„œ blocking ì—¬ë¶€ë¥¼ ê²°ì •í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤ê³  í•œë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´ ë©”ì‹œì§€ íê°€ ê°€ë“ì°¨ì„œ ë” ì´ìƒ ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ì—†ì„ ë•Œ, writing processëŠ” blockingë˜ì–´ ê¸°ë‹¤ë¦¬ê±°ë‚˜, errorì™€ í•¨ê»˜ ë¦¬í„´í•˜ëŠ” ê²ƒì„ ê³ ë¥¼ ìˆ˜ ìˆë‹¤. reading process ì—­ì‹œ ë©”ì‹œì§€ê°€ ì—†ëŠ” ê²½ìš° ê¸°ë‹¤ë¦¬ê±°ë‚˜, non blockingìœ¼ë¡œ ë°”ë¡œ ë¦¬í„´í•˜ê±°ë‚˜ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.</p>\n<p><a href=\"https://www.youtube.com/playlist?list=PLDW872573QAb4bj0URobvQTD41IV6gRkx\">ì°¸ê³  ê°•ì˜</a></p>\n<p><a href=\"https://pages.cs.wisc.edu/~remzi/OSTEP/\">ì°¸ê³  ì±…</a></p>","frontmatter":{"date":"October 28, 2023","title":"(OS) ìš´ì˜ì²´ì œ ë³µìŠµ [6. Inter Process Communication(IPC)]","categories":"OS","author":"choieastsea","emoji":"ğŸ™„"},"fields":{"slug":"/OS(6)-IPC/"}},"site":{"siteMetadata":{"siteUrl":"https://choieastsea.github.io","comments":{"utterances":{"repo":"choieastsea/choieastsea.github.io"}}}}},"pageContext":{"slug":"/WEB-jwt(3)/","nextSlug":"/Alg-BOJ-4803/","prevSlug":"/OS(6)-IPC/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}