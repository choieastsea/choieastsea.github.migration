{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/OS(6)-IPC/",
    "result": {"data":{"cur":{"id":"4816b4db-01ed-5807-a7d1-a04d66600126","html":"<p>저번까지 운영체제의 Scheduling에 대하여 알아보았다. 오늘은 프로세스간 통신에 대하여 알아보도록 하자.</p>\n<h1 id=\"inter-process-communicationipc\" style=\"position:relative;\"><a href=\"#inter-process-communicationipc\" aria-label=\"inter process communicationipc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inter Process Communication(IPC)</h1>\n<p>일반적으로 프로세스들은 독립적인 메모리 공간(memory space)를 갖고 있으므로, 메모리를 공유하지 않는다. 하지만, 프로세스간 communication이 필요한 경우가 많으며 서로 데이터를 공유할 상황도 생기므로, 이를 구현하기 위해 <code class=\"language-text\">IPC mechanism</code>에 대하여 알 필요가 있다.</p>\n<h1 id=\"shared-memory\" style=\"position:relative;\"><a href=\"#shared-memory\" aria-label=\"shared memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shared Memory</h1>\n<p>그 중 첫번째로 <code class=\"language-text\">shared memory</code>에 대하여 알아보자.</p>\n<p><code class=\"language-text\">shmget()</code> 시스템 콜을 통하여 프로세스들은 같은 영역의 공유 메모리 자원에 접근할 수 있다.</p>\n<blockquote>\n<p>int shmget(key_t key, int size, int shmflg)</p>\n<p>여러 프로세스에서 같은 key를 통하여 같은 shared memory영역에 접근할 수 있게 된다</p>\n</blockquote>\n<p>해당 시스템 콜을 통하여 다수의 프로세스는 공유된 메모리 자원에 접근하여 read/write 연산을 수행할 수 있다.</p>\n<p>하지만, 주의해야할 점도 존재한다. shared memory는 단지 빈 메모리 영역이므로, 동시에 프로세스들이 같은 공간에 write하는 경우(overwrite)에 대한 처리가 필요하다.</p>\n<h1 id=\"signals\" style=\"position:relative;\"><a href=\"#signals\" aria-label=\"signals permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Signals</h1>\n<p>다음으로는 OS에서 제공하는 signal을 이용하는 방법이 있을 것이다. 가장 널리 알려진 signal로는 프로세스를 종료하기 위해 ctrl+c를 눌러 <code class=\"language-text\">kill -9 signal</code>을 발생시키는 것 등이 있을 것이다. 또한 user-defined signal도 만들 수 있는 방법이 있는데, 어쨌든 이러한 signal을 통하여 <strong>한 프로세스에서 다른 프로세스로 어떠한 값(신호)을 전달</strong> 할 수 있는 것이다.</p>\n<p>모든 프로세스는 signal을 전달받으면 <code class=\"language-text\">signal handler</code>가 호출되는데, 데이터를 전달 받은 프로세스에서 해당 시그널을 전달 받았을 때 처리해야할 일들을 정의할 수 있을 것이다. 물론 fix되어 overwrite할 수 없는 signal handler도 존재(SIGKILL, SIGSTOP)하므로 참고하자.</p>\n<h1 id=\"sockets\" style=\"position:relative;\"><a href=\"#sockets\" aria-label=\"sockets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sockets</h1>\n<p>프로세스간 통신은 항상 같은 컴퓨터에서만 이루어지지는 않을 것이다. 우리가 자주 사용하는 <code class=\"language-text\">TCP/UDP</code> 통신은 외부 기기의 프로세스와의 통신을 가능하게 해준다. 또한, 같은 기기 내의 프로세스간에도 <code class=\"language-text\">Unix Sockets</code>을 통하여 소켓 통신을 할 수 있다.</p>\n<p>소켓 통신을 수행하기 위한 간단한 메커니즘은 다음과 같다.</p>\n<ul>\n<li>각 프로세스는 시스템콜을 통하여 소켓을 열고 통신할 프로세스와 연결한다.</li>\n<li>하나의 소켓을 통하여 프로세스들은 메시지를 read/write한다.</li>\n<li>네트워크 프로토콜에 따라 구체적인 통신 방법은 달라진다.</li>\n<li>OS는 데이터를 socket buffer를 통하여 전송하며, 프로세스는 해당 버퍼에서부터 데이터를 읽어올 것이다.</li>\n</ul>\n<h1 id=\"pipes\" style=\"position:relative;\"><a href=\"#pipes\" aria-label=\"pipes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pipes</h1>\n<p>pipe는 보통 프로세스간 반이중 통신, 즉 <code class=\"language-text\">half duplex</code>방식으로 데이터를 주고 받을 때 사용된다. (모든 프로세스가 송수신이 가능하지만, 한 파이프에서는 오직 송신 또는 수신만 가능하다. 무전기와 유사)</p>\n<p>pipe를 만드는 system call을 호출 시, 데이터를 공유하기 위한 file descriptor가 리턴되는데, 이를 통하여 데이터를 주고 받을 수 있고 보통 READ를 위한 file descriptor와 WRITE를 위한 file descriptor를 사용하여 반이중 통신에 사용된다.</p>\n<p>파이프는 크게 두가지로 사용될 수 있다.</p>\n<ul>\n<li>\n<p>부모와 자식 프로세스간 통신</p>\n<p>부모 프로세스는 fd를 만들고, fork하여 자식 프로세스와 이를 공유하여 통신하도록 한다.</p>\n</li>\n<li>\n<p>named pipes</p>\n<p>다른 프로세스에서 파이프를 공유하기 위해 named pipe를 사용할 수 있다.</p>\n</li>\n</ul>\n<p>pipe를 통한 통신 역시, socket과 유사하게 OS가 buffer를 통하여 데이터를 전송한다.</p>\n<h1 id=\"message-queues\" style=\"position:relative;\"><a href=\"#message-queues\" aria-label=\"message queues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Message Queues</h1>\n<p>message queue는 mailbox를 이용한 indirect communication방식이라고 생각하면 편할 것 같다.</p>\n<p>Process는 특정 위치의 mailbox를 열고, 메시지를 전송받거나 전송할 수 있다. 이 방법 역시 OS가 메시지를 buffer하여 전송한다고 한다.</p>\n<h2 id=\"blocking-vs-non-blocking-communication\" style=\"position:relative;\"><a href=\"#blocking-vs-non-blocking-communication\" aria-label=\"blocking vs non blocking communication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Blocking vs Non-Blocking Communication</h2>\n<p>IPC 메커니즘들은 해당 데이터 전송과정에서 blocking 여부를 결정할 수 있는 기능이 있다고 한다.</p>\n<p>예를 들어 메시지 큐가 가득차서 더 이상 데이터를 보낼 수 없을 때, writing process는 blocking되어 기다리거나, error와 함께 리턴하는 것을 고를 수 있다. reading process 역시 메시지가 없는 경우 기다리거나, non blocking으로 바로 리턴하거나를 선택할 수 있다고 한다.</p>\n<p><a href=\"https://www.youtube.com/playlist?list=PLDW872573QAb4bj0URobvQTD41IV6gRkx\">참고 강의</a></p>\n<p><a href=\"https://pages.cs.wisc.edu/~remzi/OSTEP/\">참고 책</a></p>","excerpt":"저번까지 운영체제의 Scheduling에 대하여 알아보았다. 오늘은 프로세스간 통신에 대하여 알아보도록 하자. Inter Process Communication(IPC) 일반적으로 프로세스들은 독립적인 메모리 공간(memory space)를 갖고 있으므로, 메모리를 공유하지 않는다. 하지만, 프로세스간 communication이 필요한 경우가 많으며 서로 데이터를 공유할 상황도 생기므로, 이를 구현하기 위해 에 대하여 알 필요가 있다. Shared Memory 그 중 첫번째로 에 대하여 알아보자.  시스템 콜을 통하여 프로세스들은 같은 영역의 공유 메모리 자원에 접근할 수 있다. int shmget(key_t key, int size, int shmflg) 여러 프로세스에서 같은 key를 통하여 같은 shared memory영역에 접근할 수 있게 된다 해당 시스템 콜을 통하여 다수의 프로세스는 공유된 메모리 자원에 접근하여 read/write 연산을 수행할 수 있다. 하지만, 주의…","frontmatter":{"date":"October 28, 2023","title":"(OS) 운영체제 복습 [6. Inter Process Communication(IPC)]","categories":"OS","author":"choieastsea","emoji":"🙄"},"fields":{"slug":"/OS(6)-IPC/"}},"next":{"id":"2197d178-4869-524d-92fd-c5d919db41c0","html":"<p>저번까지는 <code class=\"language-text\">fastapi</code>를 이용하여 서버사이드의 jwt 토큰 로직을 구현해보았다. 로직 자체를 이해한다면 <code class=\"language-text\">flask</code>나 다른 프레임워크에도 참고하여 적용이 가능할 것이다. 오늘은 프론트에서 해줘야할 것들을 위주로 구현해보자.! <code class=\"language-text\">react js</code>의 <code class=\"language-text\">CRA</code>를 이용하여 구현할 예정이고, 클라이언트에서는 access token에 대한 흐름을 위주로 생각하면 좋을 것이다.</p>\n<p>이 프로젝트에서 사용된 라이브러리는 다음과 같다.</p>\n<ul>\n<li>recoil : context value를 저장하기 위하여 사용한다</li>\n<li>axios : fetch api를 이용하고 이를 모듈화하기 위해 사용한다</li>\n</ul>\n<h1 id=\"react에서-해줘야-할-것들\" style=\"position:relative;\"><a href=\"#react%EC%97%90%EC%84%9C-%ED%95%B4%EC%A4%98%EC%95%BC-%ED%95%A0-%EA%B2%83%EB%93%A4\" aria-label=\"react에서 해줘야 할 것들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react에서 해줘야 할 것들</h1>\n<p>몇가지만 기억하자.</p>\n<ol>\n<li>로그인 성공시, access token은 context 변수로 갖고 있도록 한다.</li>\n<li><code class=\"language-text\">Authorization</code>이 필요한 요청에 대하여 access token을 실어서 보낸다.</li>\n<li>만약, access token이 만료되거나(401) 없다면 refresh token을 이용하여 재발급 받는다.</li>\n<li>access token을 재발급 받았다면 그것을 Bearer에 실어서 다시 요청을 보낸다.</li>\n<li>refresh token이 만료되거나 없다면(401) 다시 로그인을 하도록 한다.</li>\n</ol>\n<h3 id=\"proxy\" style=\"position:relative;\"><a href=\"#proxy\" aria-label=\"proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>proxy</h3>\n<p>api 서버와 소통하기 위하여 proxy 설정을 해줄 필요가 있다. 인증 서버는 8000번, 클라이언트 서버는 3000번에 위치해있기 때문에 <code class=\"language-text\">origin</code>이 다르다. 따라서, refresh token이 <code class=\"language-text\">set-cookie</code>로 인하여 설정되지 않으니 <code class=\"language-text\">package.json</code>으로 가서 <code class=\"language-text\">proxy</code> 프로퍼티를 추가하고 로컬 서버의 url을 적어주자. proxy를 통하여 브라우저가 <strong>같은 포트의 서버에다가 요청을 보내는 것과 같은 착각</strong>을 줄 수 있다!</p>\n<p>물론, 실제 배포를 한다면 이를 해결해주기 위하여 <code class=\"language-text\">https</code>를 도입해야할 것이다. 그래야 cross-origin에 대한 <code class=\"language-text\">set-cookie</code>가 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t...\n\t<span class=\"token property\">\"proxy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:8000/\"</span><span class=\"token punctuation\">,</span>\n\t...\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>핵심은 access token만 리액트에서 관심을 갖는 것이고, refresh token은 서버에 의존적인 로직이라는 것을 유념하자. access token은 recoil state로 관리되어, 모든 컴포넌트에서 접근 가능하도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// recoil.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> accessTokenState <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">atom</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    key<span class=\"token operator\">:</span> <span class=\"token string\">'accessTokenState'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// App.tsx</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>accessToken<span class=\"token punctuation\">,</span> setAccessToken<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilState</span><span class=\"token punctuation\">(</span>accessTokenState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">...</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLogined</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLogined</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>accessToken<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>access token의 값이 <code class=\"language-text\">''</code>가 아니라면 로그인이 되어있다고 판단할 것이다.</p>\n<h2 id=\"로그인-요청\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%9A%94%EC%B2%AD\" aria-label=\"로그인 요청 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그인 요청</h2>\n<p>로그인은 인증이 없어도 되는 요청이고, 성공한다면 <code class=\"language-text\">accessToken</code>을 set 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleLogin</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> axiosConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/x-www-form-urlencoded\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'username'</span><span class=\"token operator\">:</span> email<span class=\"token punctuation\">,</span> <span class=\"token string\">'password'</span><span class=\"token operator\">:</span> pw <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> axiosConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'로그인 성공'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">?.</span>access_token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">AxiosError</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>response<span class=\"token operator\">?.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">401</span> <span class=\"token operator\">||</span> <span class=\"token number\">422</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'로그인 실패'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"로그아웃\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%95%84%EC%9B%83\" aria-label=\"로그아웃 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그아웃</h2>\n<p>로그아웃의 경우, server에서 refresh token을 지워줄 것이고, react에서는 access token도 지워주면 될 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleLogout</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'logout/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'로그아웃 성공'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"refresh-로직\" style=\"position:relative;\"><a href=\"#refresh-%EB%A1%9C%EC%A7%81\" aria-label=\"refresh 로직 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>refresh 로직</h2>\n<p>만약, access token이 없거나, 유효하지 않다고 했을 때 <code class=\"language-text\">refresh</code>를 해줘야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">refresh</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** \n     *  refresh하고, access token을 리턴\n     */</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'refresh/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> data<span class=\"token operator\">?.</span>access_token<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>refresh의 경우, access token만을 리턴하도록 하는 것이 좋다. access token을 set해주는 로직은 따로 분리하는 것이 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">refreshAndSet</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> accessToken <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// refresh or logout</span>\n    <span class=\"token function\">refreshAndSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이처럼 새로고침한 경우 refresh를 해주고, 만약 refresh가 안된다면 로그아웃 처리를 해주면 된다.</p>\n<h2 id=\"인증이-필요한-요청-함수\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%9C-%EC%9A%94%EC%B2%AD-%ED%95%A8%EC%88%98\" aria-label=\"인증이 필요한 요청 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증이 필요한 요청 함수</h2>\n<p>인증이 필요한 요청에 대한 하나의 함수를 만들어놓고 필요할때마다 쓰면 좋을 것이다.</p>\n<p>인증이 필요한 함수에서 수행해야 하는 것은 다음과 같다.</p>\n<ol>\n<li>\n<p>header에 access token을 실어서 요청을 보낸다. 만약 401이라면, refresh를 수행하여 access token을 업데이트한다.</p>\n</li>\n<li>\n<p>다시 원래 요청을 보낸다.</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">authGet</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>token<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> url<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * url과 token이 주어졌을 때, 해당 get 함수를 실행\n     */</span>\n    <span class=\"token keyword\">const</span> config<span class=\"token operator\">:</span> AxiosRequestConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'Authorization'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>token<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">AxiosError</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>response<span class=\"token operator\">?.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">401</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// need refresh</span>\n          <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> newToken <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> newConfig<span class=\"token operator\">:</span> AxiosRequestConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n              headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">'Authorization'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token comment\">// original request</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> newConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> <span class=\"token string\">'로그인이 필요합니다'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>단순하게 data를 리턴하도록 구현하였는데, <code class=\"language-text\">react query</code>와 같은 라이브러리를 사용한다면 더 편하게 구현할 수도 있을 것 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 422px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABc0lEQVQ4y5VTya6CQBDk3/0MPXDgTLx5EoMJGqMX0YNL1CAxaDRuuG/1Up03hEWfeZ00PUPP1BQ1hYbfeL1eUp/PJ87nMzabDcIwlPG7UOvToakmgRj1eh25XA66rqPdbqNQKEiWSiUYhoF8Po9msxkdngbW0uw8z8N0OsVut8PlcsF4PMZwOEQQBNLrdrtYLpcRS7VXVe0T9W8R3xcfC0PqREb7/V50Ox6PUvmOWm632yjVnD3m/X5PMuRjtVqhWq2iXC5LdRxHaqPRwOPx+Mjyer3icDhkAdfrNfr9vujFSs0GgwF6vZ5oN5/PM7lYLKSnXJAA5Oe1Wi1YlgXbtmGaJnzfj1gwb7ebVF4Uk3MlTwaQL2ezmdziZDLBaDQSFtSKm5jU7nQ6CSMmQeM+TQDSLjyReinNqGutVhNdK5UKOp2OHEygOGjmlj/Zhqe7rotisShSUNe/7JNgqAwaNyrtQNaqT/3S694a+z//6bceAX8AsajkOgwG5GUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"client\"\n        title=\"client\"\n        src=\"/static/5fa5a057a716e37cdfc96a9294620cf7/fa5c1/client.png\"\n        srcset=\"/static/5fa5a057a716e37cdfc96a9294620cf7/e9ff0/client.png 180w,\n/static/5fa5a057a716e37cdfc96a9294620cf7/f21e7/client.png 360w,\n/static/5fa5a057a716e37cdfc96a9294620cf7/fa5c1/client.png 422w\"\n        sizes=\"(max-width: 422px) 100vw, 422px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzElEQVQY04WPzWoCMRSF8y5uik8oSJ+qy7py1aWCxZZoGBw7OC5czEyTjPn5NFMGBJ164HDDTe6Xc4UxBq011lqapunOxli89yTFGHmmEEJX5x9LhFKK7Vax3/8g5YY8z5FSdvAhYN9LNYSI83/A1ZdClGVJcpZlFEVBVVV3g4/06E7rX0TbtiSn1Y21OOe6x7cphmAhRtaFY7E7833w1HWDePb7f8DaBF6mJaPJgfHrkeOpRvRpbt0PDa3c912IvH9a3haG2bqluia8AMZO0MPrHmdxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"needlogin\" title=\"needlogin\" src=\"/static/b3e7a723dd513ef0cead3c96b869fa1c/37523/needlogin.png\" srcset=\"/static/b3e7a723dd513ef0cead3c96b869fa1c/e9ff0/needlogin.png 180w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/f21e7/needlogin.png 360w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/37523/needlogin.png 720w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/4c42d/needlogin.png 896w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span></p>\n<p>로그인한다면, logout 버튼과 <code class=\"language-text\">요청1</code> 버튼이 보일 것이다. 요청을 누른다면 상황에 따라</p>\n<ul>\n<li><code class=\"language-text\">authenticated</code> alert가 나오거나(인증 완료)</li>\n<li>refresh 이후 <code class=\"language-text\">authenticated</code> alert가 나오거나 (refresh 이후 재실행)</li>\n<li><code class=\"language-text\">login이 필요합니다.</code> 가 나올 것이다.</li>\n</ul>\n<p>코드는 <a href=\"https://github.com/choieastsea/jwt-fastapi-react/commit/05147a825f426e7ce55f47b6e5eef42172e6f5d4\">깃허브</a>를 참고하자.!</p>\n<h1 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h1>\n<p>여태까지 jwt의 원리와 이를 서버와 클라이언트에서 직접 구현해보았다. 사실 토큰인증이라는 것은 매우 간단한 개념인데, 그만큼 취약점이 많으니 이를 개선한 방법 (<code class=\"language-text\">refresh token</code>, <code class=\"language-text\">RTR</code>과 같은)들이 많고 이로 인하여 어려워진 느낌이 있다.</p>\n<p>하지만, 이렇게 직접 구현해봐야 모두의 상황을 알 수 있고 서비스에 대한 이해도도 올라갈 것이다!</p>\n<p>오늘까지의 모든 코드는 <a href=\"https://github.com/choieastsea/jwt-fastapi-react\">여기</a>에 있으니 참고한다.</p>","frontmatter":{"date":"October 14, 2023","title":"(WEB) JWT token 인증 도입하기 (3)","categories":"WEB","author":"choieastsea","emoji":"💨"},"fields":{"slug":"/WEB-jwt(3)/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://choieastsea.github.io","comments":{"utterances":{"repo":"choieastsea/choieastsea.github.io"}}}}},"pageContext":{"slug":"/OS(6)-IPC/","nextSlug":"/WEB-jwt(3)/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}