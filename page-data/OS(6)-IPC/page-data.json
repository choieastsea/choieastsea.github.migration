{"componentChunkName":"component---src-templates-blog-template-js","path":"/OS(6)-IPC/","result":{"data":{"cur":{"id":"4816b4db-01ed-5807-a7d1-a04d66600126","html":"<p>저번까지 운영체제의 Scheduling에 대하여 알아보았다. 오늘은 프로세스간 통신에 대하여 알아보도록 하자.</p>\n<h1 id=\"inter-process-communicationipc\" style=\"position:relative;\"><a href=\"#inter-process-communicationipc\" aria-label=\"inter process communicationipc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inter Process Communication(IPC)</h1>\n<p>일반적으로 프로세스들은 독립적인 메모리 공간(memory space)를 갖고 있으므로, 메모리를 공유하지 않는다. 하지만, 프로세스간 communication이 필요한 경우가 많으며 서로 데이터를 공유할 상황도 생기므로, 이를 구현하기 위해 <code class=\"language-text\">IPC mechanism</code>에 대하여 알 필요가 있다.</p>\n<h1 id=\"shared-memory\" style=\"position:relative;\"><a href=\"#shared-memory\" aria-label=\"shared memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shared Memory</h1>\n<p>그 중 첫번째로 <code class=\"language-text\">shared memory</code>에 대하여 알아보자.</p>\n<p><code class=\"language-text\">shmget()</code> 시스템 콜을 통하여 프로세스들은 같은 영역의 공유 메모리 자원에 접근할 수 있다.</p>\n<blockquote>\n<p>int shmget(key_t key, int size, int shmflg)</p>\n<p>여러 프로세스에서 같은 key를 통하여 같은 shared memory영역에 접근할 수 있게 된다</p>\n</blockquote>\n<p>해당 시스템 콜을 통하여 다수의 프로세스는 공유된 메모리 자원에 접근하여 read/write 연산을 수행할 수 있다.</p>\n<p>하지만, 주의해야할 점도 존재한다. shared memory는 단지 빈 메모리 영역이므로, 동시에 프로세스들이 같은 공간에 write하는 경우(overwrite)에 대한 처리가 필요하다.</p>\n<h1 id=\"signals\" style=\"position:relative;\"><a href=\"#signals\" aria-label=\"signals permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Signals</h1>\n<p>다음으로는 OS에서 제공하는 signal을 이용하는 방법이 있을 것이다. 가장 널리 알려진 signal로는 프로세스를 종료하기 위해 ctrl+c를 눌러 <code class=\"language-text\">kill -9 signal</code>을 발생시키는 것 등이 있을 것이다. 또한 user-defined signal도 만들 수 있는 방법이 있는데, 어쨌든 이러한 signal을 통하여 <strong>한 프로세스에서 다른 프로세스로 어떠한 값(신호)을 전달</strong> 할 수 있는 것이다.</p>\n<p>모든 프로세스는 signal을 전달받으면 <code class=\"language-text\">signal handler</code>가 호출되는데, 데이터를 전달 받은 프로세스에서 해당 시그널을 전달 받았을 때 처리해야할 일들을 정의할 수 있을 것이다. 물론 fix되어 overwrite할 수 없는 signal handler도 존재(SIGKILL, SIGSTOP)하므로 참고하자.</p>\n<h1 id=\"sockets\" style=\"position:relative;\"><a href=\"#sockets\" aria-label=\"sockets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sockets</h1>\n<p>프로세스간 통신은 항상 같은 컴퓨터에서만 이루어지지는 않을 것이다. 우리가 자주 사용하는 <code class=\"language-text\">TCP/UDP</code> 통신은 외부 기기의 프로세스와의 통신을 가능하게 해준다. 또한, 같은 기기 내의 프로세스간에도 <code class=\"language-text\">Unix Sockets</code>을 통하여 소켓 통신을 할 수 있다.</p>\n<p>소켓 통신을 수행하기 위한 간단한 메커니즘은 다음과 같다.</p>\n<ul>\n<li>각 프로세스는 시스템콜을 통하여 소켓을 열고 통신할 프로세스와 연결한다.</li>\n<li>하나의 소켓을 통하여 프로세스들은 메시지를 read/write한다.</li>\n<li>네트워크 프로토콜에 따라 구체적인 통신 방법은 달라진다.</li>\n<li>OS는 데이터를 socket buffer를 통하여 전송하며, 프로세스는 해당 버퍼에서부터 데이터를 읽어올 것이다.</li>\n</ul>\n<h1 id=\"pipes\" style=\"position:relative;\"><a href=\"#pipes\" aria-label=\"pipes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pipes</h1>\n<p>pipe는 보통 프로세스간 반이중 통신, 즉 <code class=\"language-text\">half duplex</code>방식으로 데이터를 주고 받을 때 사용된다. (모든 프로세스가 송수신이 가능하지만, 한 파이프에서는 오직 송신 또는 수신만 가능하다. 무전기와 유사)</p>\n<p>pipe를 만드는 system call을 호출 시, 데이터를 공유하기 위한 file descriptor가 리턴되는데, 이를 통하여 데이터를 주고 받을 수 있고 보통 READ를 위한 file descriptor와 WRITE를 위한 file descriptor를 사용하여 반이중 통신에 사용된다.</p>\n<p>파이프는 크게 두가지로 사용될 수 있다.</p>\n<ul>\n<li>\n<p>부모와 자식 프로세스간 통신</p>\n<p>부모 프로세스는 fd를 만들고, fork하여 자식 프로세스와 이를 공유하여 통신하도록 한다.</p>\n</li>\n<li>\n<p>named pipes</p>\n<p>다른 프로세스에서 파이프를 공유하기 위해 named pipe를 사용할 수 있다.</p>\n</li>\n</ul>\n<p>pipe를 통한 통신 역시, socket과 유사하게 OS가 buffer를 통하여 데이터를 전송한다.</p>\n<h1 id=\"message-queues\" style=\"position:relative;\"><a href=\"#message-queues\" aria-label=\"message queues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Message Queues</h1>\n<p>message queue는 mailbox를 이용한 indirect communication방식이라고 생각하면 편할 것 같다.</p>\n<p>Process는 특정 위치의 mailbox를 열고, 메시지를 전송받거나 전송할 수 있다. 이 방법 역시 OS가 메시지를 buffer하여 전송한다고 한다.</p>\n<h2 id=\"blocking-vs-non-blocking-communication\" style=\"position:relative;\"><a href=\"#blocking-vs-non-blocking-communication\" aria-label=\"blocking vs non blocking communication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Blocking vs Non-Blocking Communication</h2>\n<p>IPC 메커니즘들은 해당 데이터 전송과정에서 blocking 여부를 결정할 수 있는 기능이 있다고 한다.</p>\n<p>예를 들어 메시지 큐가 가득차서 더 이상 데이터를 보낼 수 없을 때, writing process는 blocking되어 기다리거나, error와 함께 리턴하는 것을 고를 수 있다. reading process 역시 메시지가 없는 경우 기다리거나, non blocking으로 바로 리턴하거나를 선택할 수 있다고 한다.</p>\n<p><a href=\"https://www.youtube.com/playlist?list=PLDW872573QAb4bj0URobvQTD41IV6gRkx\">참고 강의</a></p>\n<p><a href=\"https://pages.cs.wisc.edu/~remzi/OSTEP/\">참고 책</a></p>","excerpt":"저번까지 운영체제의 Scheduling에 대하여 알아보았다. 오늘은 프로세스간 통신에 대하여 알아보도록 하자. Inter Process Communication(IPC) 일반적으로 프로세스들은 독립적인 메모리 공간(memory space)를 갖고 있으므로, 메모리를 공유하지 않는다. 하지만, 프로세스간 communication이 필요한 경우가 많으며 서로 데이터를 공유할 상황도 생기므로, 이를 구현하기 위해 에 대하여 알 필요가 있다. Shared Memory 그 중 첫번째로 에 대하여 알아보자.  시스템 콜을 통하여 프로세스들은 같은 영역의 공유 메모리 자원에 접근할 수 있다. int shmget(key_t key, int size, int shmflg) 여러 프로세스에서 같은 key를 통하여 같은 shared memory영역에 접근할 수 있게 된다 해당 시스템 콜을 통하여 다수의 프로세스는 공유된 메모리 자원에 접근하여 read/write 연산을 수행할 수 있다. 하지만, 주의…","frontmatter":{"date":"October 28, 2023","title":"(OS) 운영체제 복습 [6. Inter Process Communication(IPC)]","categories":"OS","author":"choieastsea","emoji":"🙄"},"fields":{"slug":"/OS(6)-IPC/"}},"next":{"id":"2197d178-4869-524d-92fd-c5d919db41c0","html":"<p>저번까지는 <code class=\"language-text\">fastapi</code>를 이용하여 서버사이드의 jwt 토큰 로직을 구현해보았다. 로직 자체를 이해한다면 <code class=\"language-text\">flask</code>나 다른 프레임워크에도 참고하여 적용이 가능할 것이다. 오늘은 프론트에서 해줘야할 것들을 위주로 구현해보자.! <code class=\"language-text\">react js</code>의 <code class=\"language-text\">CRA</code>를 이용하여 구현할 예정이고, 클라이언트에서는 access token에 대한 흐름을 위주로 생각하면 좋을 것이다.</p>\n<p>이 프로젝트에서 사용된 라이브러리는 다음과 같다.</p>\n<ul>\n<li>recoil : context value를 저장하기 위하여 사용한다</li>\n<li>axios : fetch api를 이용하고 이를 모듈화하기 위해 사용한다</li>\n</ul>\n<h1 id=\"react에서-해줘야-할-것들\" style=\"position:relative;\"><a href=\"#react%EC%97%90%EC%84%9C-%ED%95%B4%EC%A4%98%EC%95%BC-%ED%95%A0-%EA%B2%83%EB%93%A4\" aria-label=\"react에서 해줘야 할 것들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react에서 해줘야 할 것들</h1>\n<p>몇가지만 기억하자.</p>\n<ol>\n<li>로그인 성공시, access token은 context 변수로 갖고 있도록 한다.</li>\n<li><code class=\"language-text\">Authorization</code>이 필요한 요청에 대하여 access token을 실어서 보낸다.</li>\n<li>만약, access token이 만료되거나(401) 없다면 refresh token을 이용하여 재발급 받는다.</li>\n<li>access token을 재발급 받았다면 그것을 Bearer에 실어서 다시 요청을 보낸다.</li>\n<li>refresh token이 만료되거나 없다면(401) 다시 로그인을 하도록 한다.</li>\n</ol>\n<h3 id=\"proxy\" style=\"position:relative;\"><a href=\"#proxy\" aria-label=\"proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>proxy</h3>\n<p>api 서버와 소통하기 위하여 proxy 설정을 해줄 필요가 있다. 인증 서버는 8000번, 클라이언트 서버는 3000번에 위치해있기 때문에 <code class=\"language-text\">origin</code>이 다르다. 따라서, refresh token이 <code class=\"language-text\">set-cookie</code>로 인하여 설정되지 않으니 <code class=\"language-text\">package.json</code>으로 가서 <code class=\"language-text\">proxy</code> 프로퍼티를 추가하고 로컬 서버의 url을 적어주자. proxy를 통하여 브라우저가 <strong>같은 포트의 서버에다가 요청을 보내는 것과 같은 착각</strong>을 줄 수 있다!</p>\n<p>물론, 실제 배포를 한다면 이를 해결해주기 위하여 <code class=\"language-text\">https</code>를 도입해야할 것이다. 그래야 cross-origin에 대한 <code class=\"language-text\">set-cookie</code>가 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t...\n\t<span class=\"token property\">\"proxy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:8000/\"</span><span class=\"token punctuation\">,</span>\n\t...\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>핵심은 access token만 리액트에서 관심을 갖는 것이고, refresh token은 서버에 의존적인 로직이라는 것을 유념하자. access token은 recoil state로 관리되어, 모든 컴포넌트에서 접근 가능하도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// recoil.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> accessTokenState <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">atom</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    key<span class=\"token operator\">:</span> <span class=\"token string\">'accessTokenState'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// App.tsx</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>accessToken<span class=\"token punctuation\">,</span> setAccessToken<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilState</span><span class=\"token punctuation\">(</span>accessTokenState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">...</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLogined</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLogined</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>accessToken<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>access token의 값이 <code class=\"language-text\">''</code>가 아니라면 로그인이 되어있다고 판단할 것이다.</p>\n<h2 id=\"로그인-요청\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%9A%94%EC%B2%AD\" aria-label=\"로그인 요청 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그인 요청</h2>\n<p>로그인은 인증이 없어도 되는 요청이고, 성공한다면 <code class=\"language-text\">accessToken</code>을 set 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleLogin</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> axiosConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string-property property\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/x-www-form-urlencoded\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token string-property property\">'username'</span><span class=\"token operator\">:</span> email<span class=\"token punctuation\">,</span> <span class=\"token string-property property\">'password'</span><span class=\"token operator\">:</span> pw <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> axiosConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'로그인 성공'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">?.</span>access_token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">AxiosError</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>response<span class=\"token operator\">?.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">401</span> <span class=\"token operator\">||</span> <span class=\"token number\">422</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'로그인 실패'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"로그아웃\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%95%84%EC%9B%83\" aria-label=\"로그아웃 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그아웃</h2>\n<p>로그아웃의 경우, server에서 refresh token을 지워줄 것이고, react에서는 access token도 지워주면 될 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleLogout</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'logout/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'로그아웃 성공'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"refresh-로직\" style=\"position:relative;\"><a href=\"#refresh-%EB%A1%9C%EC%A7%81\" aria-label=\"refresh 로직 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>refresh 로직</h2>\n<p>만약, access token이 없거나, 유효하지 않다고 했을 때 <code class=\"language-text\">refresh</code>를 해줘야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">refresh</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** \n     *  refresh하고, access token을 리턴\n     */</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'refresh/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> data<span class=\"token operator\">?.</span>access_token<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>refresh의 경우, access token만을 리턴하도록 하는 것이 좋다. access token을 set해주는 로직은 따로 분리하는 것이 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">refreshAndSet</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> accessToken <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// refresh or logout</span>\n    <span class=\"token function\">refreshAndSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이처럼 새로고침한 경우 refresh를 해주고, 만약 refresh가 안된다면 로그아웃 처리를 해주면 된다.</p>\n<h2 id=\"인증이-필요한-요청-함수\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%9C-%EC%9A%94%EC%B2%AD-%ED%95%A8%EC%88%98\" aria-label=\"인증이 필요한 요청 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증이 필요한 요청 함수</h2>\n<p>인증이 필요한 요청에 대한 하나의 함수를 만들어놓고 필요할때마다 쓰면 좋을 것이다.</p>\n<p>인증이 필요한 함수에서 수행해야 하는 것은 다음과 같다.</p>\n<ol>\n<li>\n<p>header에 access token을 실어서 요청을 보낸다. 만약 401이라면, refresh를 수행하여 access token을 업데이트한다.</p>\n</li>\n<li>\n<p>다시 원래 요청을 보낸다.</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">authGet</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>token<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> url<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * url과 token이 주어졌을 때, 해당 get 함수를 실행\n     */</span>\n    <span class=\"token keyword\">const</span> config<span class=\"token operator\">:</span> AxiosRequestConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'Authorization'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>token<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">AxiosError</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>response<span class=\"token operator\">?.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">401</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// need refresh</span>\n          <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> newToken <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> newConfig<span class=\"token operator\">:</span> AxiosRequestConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n              headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">'Authorization'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newToken<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token comment\">// original request</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> newConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> <span class=\"token string\">'로그인이 필요합니다'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> e<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>단순하게 data를 리턴하도록 구현하였는데, <code class=\"language-text\">react query</code>와 같은 라이브러리를 사용한다면 더 편하게 구현할 수도 있을 것 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 422px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABc0lEQVQ4y5VTya6CQBDk3/0MPXDgTLx5EoMJGqMX0YNL1CAxaDRuuG/1Up03hEWfeZ00PUPP1BQ1hYbfeL1eUp/PJ87nMzabDcIwlPG7UOvToakmgRj1eh25XA66rqPdbqNQKEiWSiUYhoF8Po9msxkdngbW0uw8z8N0OsVut8PlcsF4PMZwOEQQBNLrdrtYLpcRS7VXVe0T9W8R3xcfC0PqREb7/V50Ox6PUvmOWm632yjVnD3m/X5PMuRjtVqhWq2iXC5LdRxHaqPRwOPx+Mjyer3icDhkAdfrNfr9vujFSs0GgwF6vZ5oN5/PM7lYLKSnXJAA5Oe1Wi1YlgXbtmGaJnzfj1gwb7ebVF4Uk3MlTwaQL2ezmdziZDLBaDQSFtSKm5jU7nQ6CSMmQeM+TQDSLjyReinNqGutVhNdK5UKOp2OHEygOGjmlj/Zhqe7rotisShSUNe/7JNgqAwaNyrtQNaqT/3S694a+z//6bceAX8AsajkOgwG5GUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"client\"\n        title=\"client\"\n        src=\"/static/5fa5a057a716e37cdfc96a9294620cf7/fa5c1/client.png\"\n        srcset=\"/static/5fa5a057a716e37cdfc96a9294620cf7/e9ff0/client.png 180w,\n/static/5fa5a057a716e37cdfc96a9294620cf7/f21e7/client.png 360w,\n/static/5fa5a057a716e37cdfc96a9294620cf7/fa5c1/client.png 422w\"\n        sizes=\"(max-width: 422px) 100vw, 422px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 28.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzElEQVQY04WPzWoCMRSF8y5uik8oSJ+qy7py1aWCxZZoGBw7OC5czEyTjPn5NFMGBJ164HDDTe6Xc4UxBq011lqapunOxli89yTFGHmmEEJX5x9LhFKK7Vax3/8g5YY8z5FSdvAhYN9LNYSI83/A1ZdClGVJcpZlFEVBVVV3g4/06E7rX0TbtiSn1Y21OOe6x7cphmAhRtaFY7E7833w1HWDePb7f8DaBF6mJaPJgfHrkeOpRvRpbt0PDa3c912IvH9a3haG2bqluia8AMZO0MPrHmdxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"needlogin\" title=\"needlogin\" src=\"/static/b3e7a723dd513ef0cead3c96b869fa1c/37523/needlogin.png\" srcset=\"/static/b3e7a723dd513ef0cead3c96b869fa1c/e9ff0/needlogin.png 180w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/f21e7/needlogin.png 360w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/37523/needlogin.png 720w,\n/static/b3e7a723dd513ef0cead3c96b869fa1c/4c42d/needlogin.png 896w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span></p>\n<p>로그인한다면, logout 버튼과 <code class=\"language-text\">요청1</code> 버튼이 보일 것이다. 요청을 누른다면 상황에 따라</p>\n<ul>\n<li><code class=\"language-text\">authenticated</code> alert가 나오거나(인증 완료)</li>\n<li>refresh 이후 <code class=\"language-text\">authenticated</code> alert가 나오거나 (refresh 이후 재실행)</li>\n<li><code class=\"language-text\">login이 필요합니다.</code> 가 나올 것이다.</li>\n</ul>\n<p>코드는 <a href=\"https://github.com/choieastsea/jwt-fastapi-react/commit/05147a825f426e7ce55f47b6e5eef42172e6f5d4\">깃허브</a>를 참고하자.!</p>\n<h1 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h1>\n<p>여태까지 jwt의 원리와 이를 서버와 클라이언트에서 직접 구현해보았다. 사실 토큰인증이라는 것은 매우 간단한 개념인데, 그만큼 취약점이 많으니 이를 개선한 방법 (<code class=\"language-text\">refresh token</code>, <code class=\"language-text\">RTR</code>과 같은)들이 많고 이로 인하여 어려워진 느낌이 있다.</p>\n<p>하지만, 이렇게 직접 구현해봐야 모두의 상황을 알 수 있고 서비스에 대한 이해도도 올라갈 것이다!</p>\n<p>오늘까지의 모든 코드는 <a href=\"https://github.com/choieastsea/jwt-fastapi-react\">여기</a>에 있으니 참고한다.</p>","frontmatter":{"date":"October 14, 2023","title":"(WEB) JWT token 인증 도입하기 (3)","categories":"WEB","author":"choieastsea","emoji":"💨"},"fields":{"slug":"/WEB-jwt(3)/"}},"prev":{"id":"1c4f24f1-992b-5749-bee9-e2d91a87e79d","html":"<p>저번까지 Part1에 해당하는 Process와 CPU 가상화에 대하여 중점적으로 배웠다. OS는 process에게 독립성을 보장해주기 위하여 하나의 자원을 오롯이 제공하는 것처럼 느끼게 해주는데, 이번에는 그 중 메모리 자원에 대한 OS의 정책을 공부해보는 시간을 갖도록 하자.</p>\n<h1 id=\"why-virtual-memory\" style=\"position:relative;\"><a href=\"#why-virtual-memory\" aria-label=\"why virtual memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why Virtual Memory?</h1>\n<p>당연히 현대의 컴퓨터는 하나의 메모리에 한 프로세스만을 제공하지 않는다. 전체 메모리 공간을 여러 프로세스들이 적절히 나눠서 사용하고 있는데, 한정된 메모리 공간을 적절하게 분배해야하며, <strong>프로세스의 메모리 공간은 항상 연속적이지 않을 것이다</strong>. (왜냐면, 연속공간에 모든 프로세스들을 할당한다고 했을 때, 내부 단편화가 발생하여 메모리 공간을 효율적으로 사용하지 못할 수 있으므로)</p>\n<p>하지만 운영체제의 메모리 가상화 덕분에, <strong>개발자들은 파편화된 메모리 공간들을 관리하지 않고, 메모리를 연속되고 고정된 공간으로 간주</strong>할 수 있다!</p>\n<h1 id=\"abstraction--virtual-address-space\" style=\"position:relative;\"><a href=\"#abstraction--virtual-address-space\" aria-label=\"abstraction  virtual address space permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Abstraction : (Virtual) Address Space</h1>\n<p>운영체제는 모든 프로세스에게 **<u>0에서 MAX에 해당하는 연속적인 주소를 제공하는 것처럼 가상화</u>**한다. (실제는 연속적인 물리 주소를 할당하는 것은 아니라는 말과 같다) 모든 프로세스들은 아래의 그림과 같은 address space를 제공받고, 프로그래머는 보통 그 위에서 생각한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACD0lEQVQ4y4WU56orMQyE9/2fKn9CAum9J6T33qsun2CWPZxyDcK7tjSekWQHy+XS2u22nU4nu1wudj6f7Xa7ud3vd7fr9WrH49HXGPpm3u12ttls7PF4+F7ABiAEYe/32waDgY3HY+t2u/7NPgHySaVSTqJer1utVrN8Pm+j0cg+n48FOPf7fTscDm6whLVssVg4E+1tt1urVqs2HA6d3Wq1cr/5fO6HBq/Xy+Vysmgzns+nB2jAHEAG/sgEZDKZ2Gw2C/2C/X7vp8EAJzFdr9dfmMMEpshCJiyZS6WSZbNZB3ZATiUY6eRhOp26cUgsFgtZkEvkdzodBymXy9Zqtfwf30Kh4DhBVCIsYAMTgJLJpB+ECtgTUKlUHFCFoXCNRsMymYz/B0hg0B4wUBtEjTUSz0z+UKBisEahmCESAlIQAWJiCjsB8v2/8Q2QIIJ7vZ5LIK+Aa08VJ+4n+xWQZDebzbADooC/gf0I+Jdk9aVi/pQcLQpJlqkoujF853I5bxn6FAWoIUW04Je2EQtYUclEIhGCqCgQILe0D+2CpdNp93fJemFwhgW9pmsVj8cdjDWuF2nAj0eBmwIwDIvFojc61zjAmUVuA2wA1wFIYo1DAWadb14Xbg4zTJHPNXRAioHhyAOhQQNzCKlQ0fQ46CFBKkwBYs8lo52kEkxhxBAH3kpmjAP0wGqwTky0yv8AgHpWlpvXaUsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"virtual_memory\"\n        title=\"virtual_memory\"\n        src=\"/static/5c2f1d30526470f7aa08ebf5f2cc62eb/37523/virtual_memory.png\"\n        srcset=\"/static/5c2f1d30526470f7aa08ebf5f2cc62eb/e9ff0/virtual_memory.png 180w,\n/static/5c2f1d30526470f7aa08ebf5f2cc62eb/f21e7/virtual_memory.png 360w,\n/static/5c2f1d30526470f7aa08ebf5f2cc62eb/37523/virtual_memory.png 720w,\n/static/5c2f1d30526470f7aa08ebf5f2cc62eb/c8e86/virtual_memory.png 758w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 프로세스에게 할당되는  <code class=\"language-text\">virtual address space</code>를 추상화한 그림이다. <code class=\"language-text\">code</code> 영역에는 static한 데이터와 instruction이 존재하며 컴파일 단계에서 고정된다. <code class=\"language-text\">heap</code>영역과 <code class=\"language-text\">stack</code>영역은 각각 런타임 환경에서 추가되는 동적 변수와 지역 변수, 함수 등이 들어갈 것이다.</p>\n<h3 id=\"memory-allocation-system-calls\" style=\"position:relative;\"><a href=\"#memory-allocation-system-calls\" aria-label=\"memory allocation system calls permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory allocation system calls</h3>\n<ul>\n<li><code class=\"language-text\">malloc</code> : heap 영역의 free space에 공간 할당 (힙은 스택과 다르게 순서대로 쌓이는 구조가 아님). 성공시 공간에 대한 포인터를 리턴하고, 반대의 역할을 수행하는 <code class=\"language-text\">free</code>가 있다. 하지만 <u>malloc은 시스템콜은 아니고, c library에서 제공하는 아래의 시스템 콜 기반의 함수</u>이다.</li>\n<li><code class=\"language-text\">brk/sbrk</code> : heap 영역을 늘리기 위해 c library에서 호출</li>\n<li><code class=\"language-text\">mmap</code> : page size의 메모리를 할당하기 위한 시스템 콜 -> OS에서 익명의 빈 페이지를 할당 받을 수 있음</li>\n</ul>\n<p>0KB부터 존재하는 주소 체계는 OS에 의하여 추상화된 메모리 구조이고, 실제 메모리의 물리적인 구조는 조각들로 나뉘어 곳곳에 위치한다. 이러한 것을 메모리 가상화(<code class=\"language-text\">memory virtualization</code>)라고 한다.</p>\n<p>실제로는 가상 주소(virtual address, VA)는 실제 물리 주소(physical address, PA)로 변환되는데, 이는 Memory Managemnet Unit(MMU)에서 주관한다. 따라서, <strong>CPU에서 특정 VA(ex. 100)에 접근하려고 하면 이는 MMU에 의하여 PA(ex. 1001)로 변환되어 실제 메모리 공간을 가리키게 된다</strong>.</p>\n<h1 id=\"paging\" style=\"position:relative;\"><a href=\"#paging\" aria-label=\"paging permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Paging</h1>\n<p>실제 메모리 공간은 연속적인 공간에 존재하지 않는다고 했다. 보통 <code class=\"language-text\">Page Frame</code>이라는 단위로 존재하고, 할당된 가상 주소를 <code class=\"language-text\">page</code> 나누어 Page와 Page Frame이 매칭되는 형식을 보인다. 모든 물리 주소 공간이 연속적이라면, 내부 단편화가 심해질 수 있고, 모두 산발적으로 존재한다면 주소를 매핑하는 과정에서 많은 overhead가 발생하므로, 적절한 단위인 Page로 나누어서 이를 관리하는 것이다.</p>\n<p>Page(VA)와 PageFrame(PA)는 서로 매핑되는데, 이러한 정보는 <code class=\"language-text\">MMU</code>의 <code class=\"language-text\">Page Table</code>에 존재한다. 이는 다음에 자세히 다루도록 하자.</p>\n<h1 id=\"memory-virtualization의-목표\" style=\"position:relative;\"><a href=\"#memory-virtualization%EC%9D%98-%EB%AA%A9%ED%91%9C\" aria-label=\"memory virtualization의 목표 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory Virtualization의 목표</h1>\n<p>메모리 가상화의 목표를 상기시키고, 이를 구현하는 구체적인 방법에 대하여 알아보자.</p>\n<ul>\n<li>\n<p><strong>Transparency</strong></p>\n<p>user program은 실제 메모리 공간의 복잡한 것들(곳곳에 흩어져 있는 실제 메모리 공간에 대한 정보와 그 매핑 정보들)을 알 필요가 없다.</p>\n<p>우리가 C 프로그래밍을 하면서 메모리 주소를 찍어본 경험이 있을텐데, 이는 모두 가상주소(VA)이다!!</p>\n</li>\n<li>\n<p><strong>Efficiency</strong></p>\n<p>실제 메모리 공간에 접근하기 위해 발생하는 overhead는 최소화 되어야 할 것이다.</p>\n</li>\n<li>\n<p><strong>Isolation and Protection</strong></p>\n<p>각 process는 독립적인 address space를 보장받아야 하며, 이 공간을 벗어나서는 안된다. (우리가 자주 접하는 <code class=\"language-text\">segmentation fault</code>가 이와 관련있음)</p>\n</li>\n</ul>\n<h2 id=\"-운영체제의-address-space\" style=\"position:relative;\"><a href=\"#-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EC%9D%98-address-space\" aria-label=\" 운영체제의 address space permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>+ 운영체제의 address space??</h2>\n<p>프로세스들은 고유의 가상화된 address space를 제공받는다. 하지만, system call, interrupt 등으로 인하여 OS의 코드가 실행되어야하는 경우는 어떻게 실행할 수 있을까? OS 역시 프로세스지만, 모든 프로세스의 실행 중에 개입이 가능하다. 이는 프로세스의 address space에 OS 코드와 매핑이 되는 공간이 있기 때문이라고 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.55555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAADTUlEQVQ4y41U/W/aSBD1/y9F+Quq3k8JSS9OmuTUXlsTATkCaQLGBEIwtgGbtQ3+gAQTcof9TjN8nE5qpa602vV65s17M7Mr2baNKIqxWCxgD22I0Qij0YhXWwiMTRNIEmQAkGXIMt79dEhJkmC1WjHIH5eXODw8xvHx7zjOHeHD+QVqp6fILIuNszTldTqdYjKZ7GYQBIiiCPP5HJLj2CCWNAuFAr58+Qrlm4JvtJauoX38iLRUwpbXbDaDaVkQQkDTmuj3+3h8fIQ/HiMMQ0ivr6+gSQbEcjweQ1UbME0Lk2mMQa2GvxWF5aZZxs5kt1wuEUUhbMdmZi8vL2vAIJjAME30BwO4rgtd16Fp2trRcdAXAst8nnTCdl34nsfyiARJJbt5kjAoAy4WCeeEmJH8arWKYrGEv8pldLtdeEGAf9ptvNXr6BgGyzYMA71ej9dKpcKyydb3fUhxHGI4HLLk5+dn3ut6lx0oyDiKkPo+RicnmM5mDGgPh+xMPnd3d8yU9lQgKY5j/knTcRzc39/j9vaWmT49PSEIQ4STCZyTE6oIF2e4SQ/l8ubmZqPOWQNSPjzfZ2amacKyLDQaDZYwGAz4rNXp4PX7d6DfZ4Zk63ked8bDw8OODAOGYQDX9diZDChqs9nk4lCSi4UC6s0mEMdIK5UdIBWHg2saRkL8J5nKzSw31VNVlQtCsimAKwTeVitgPkdGLGczDIWA57oMQikiyUSEAX1/zY4od3WdI2pNDQ2tAb3b5QAPxJBGvY7McfhKEgECocAEtANMNj002t5hjlpjcIpMuSTgnmliqetAu40BpYaAbZvbhsApDWQvua5AzzC4ualJO50O57DdbnOV6YzGfLmEXq0ivrpCv9XCgJreslBXVVZH+eQ+fHtbctfT4XZWq7fodJ44MlWZrhmPNIX49Am+qm4eiRi9noE0TfkVohaUPN/bNbHYVMvzXO4zscnV1oGfLtvGlSwjl8vhVJZxdnYGWZZxcHCAVqsFCb84GJA2QkCRZeSLReQOD7G/v4/z83MoisL9K20j/9Jcv1/48907XH7+jN/ev8fe3h6Ojo5wcXGBWq32f8Atkx/QY7Dtv1apBCWfx/X1NcrlMkr0rSjcfv8CNCRuDqvvZ58AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"address space\"\n        title=\"address space\"\n        src=\"/static/e0509d4937ae3e16bbb89fd080bcc257/37523/os_address_space.png\"\n        srcset=\"/static/e0509d4937ae3e16bbb89fd080bcc257/e9ff0/os_address_space.png 180w,\n/static/e0509d4937ae3e16bbb89fd080bcc257/f21e7/os_address_space.png 360w,\n/static/e0509d4937ae3e16bbb89fd080bcc257/37523/os_address_space.png 720w,\n/static/e0509d4937ae3e16bbb89fd080bcc257/f4281/os_address_space.png 1016w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>OS 코드도 역시 메모리의 특정 Page들에 존재한다. 다른 프로세스들 역시 고유의 address space를 갖는데, <strong>유일한 OS의 address space에 접근하기 위해 각 프로세스마다 OS의 주소를 매핑하는 공간을 갖고 있다</strong>고 보면 될 것 같다. 이를 통해 프로세스 실행 중에 OS가 개입할 수 있고, 시스템 콜을 호출할 수 있게 되는 것이다.</p>\n<p>다음에는 본격적으로 address space를 관리하는 방법에 대하여 알아보도록 하자.</p>\n<p><a href=\"https://www.youtube.com/watch?v=8ad4DzlZwgI&#x26;list=PLDW872573QAb4bj0URobvQTD41IV6gRkx&#x26;index=3\">참고 강의</a></p>\n<p><a href=\"https://pages.cs.wisc.edu/~remzi/OSTEP/\">참고 책</a></p>","frontmatter":{"date":"October 28, 2023","title":"(OS) 운영체제 복습 [7. Introduction to Virtual Memory]","categories":"OS","author":"choieastsea","emoji":"🙄"},"fields":{"slug":"/OS(7)-Introduction to Virtual Memory/"}},"site":{"siteMetadata":{"siteUrl":"https://choieastsea.github.io","comments":{"utterances":{"repo":"choieastsea/choieastsea.github.io"}}}}},"pageContext":{"slug":"/OS(6)-IPC/","nextSlug":"/WEB-jwt(3)/","prevSlug":"/OS(7)-Introduction to Virtual Memory/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}