{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/FE-NextJS-1/",
    "result": {"data":{"cur":{"id":"9a688842-eb40-50d7-b34e-347257440a0e","html":"<p>React로 웹사이트를 만드는 가장 대표적인 3가지 방법이 있는데, CRA, NextJS, Gatsby이다. 그중에서, Gatsby는 정적 페이지 생성에 대한 것이고, CRA는 가장 쉽고 입문하기 좋은 보일러 플레이트라고 알려져있다. 나도 CRA로만 리액트 공부를 했었는데, 라우팅, SSR, 코드 스플리팅 등의 세팅에 어려움이 있었다. 이에 반해, Next.JS는 리액트를 위한 프레임워크로 몇가지 규칙을 이해한다면 간편하게 기능을 이용할 수 있다. 또한 기본적으로 서버사이드렌더링(SSR)을 제공하여 이의 장점을 이용할 수도 있다. 이외에도 다양한 기능들이 제공되니 한번 시간 내서 배워보자!</p>\n<p>오늘은 넥스트로 간단한 정적인 페이지를 만드는 방법에 대하여 공부해보겠다.</p>\n<h1 id=\"nextjs-project-시작하기\" style=\"position:relative;\"><a href=\"#nextjs-project-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\"nextjs project 시작하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next.js Project 시작하기</h1>\n<p>우선, node js(12.22.0 이후)와 npm이 깔려 있어야 한다. 간단하게 <code class=\"language-text\">npx create-next-app@latest</code>만 해주면 된다! yarn의 경우, <code class=\"language-text\">yarn create next-app</code>을 해주면 된다. 프로젝트 기본 정보를 입력한 이후, <code class=\"language-text\">npm run dev</code> 또는 <code class=\"language-text\">yarn dev</code>로 간단하게 웹서버를 실행시킬 수 있다.</p>\n<h1 id=\"pages를-통한-라우팅\" style=\"position:relative;\"><a href=\"#pages%EB%A5%BC-%ED%86%B5%ED%95%9C-%EB%9D%BC%EC%9A%B0%ED%8C%85\" aria-label=\"pages를 통한 라우팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/pages를 통한 라우팅</h1>\n<p>처음 <code class=\"language-text\">npm run dev</code>를 해주면 아래와 같은 디렉토리가 나올것이다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 506px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 125.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAADPklEQVQ4y42VSY/TQBCF8yMQM1mcxGu7vdtxFjt7PBMmDGEWlhEghJA4IjgicQAJiQsH/vJDVUmGiJkkHErttq3Pr6pel0tNw4PptJDmBYJ0gM7gFJ3hHHF3gqg7Rto/QSuboWkFqDYEaqrcGyXDjuAnfUweXSHqFegXS5xdvGJQf3aO+fKG17ruotq0DwMr669W6gK+JyGEwJFiQVkDjhUTxzXjDmwXvEQPNBHCdGKcT9qIwgSaHcONcwi/A0VzUFNtBmzHBvovmIGUTk114HRCuO0Ylbq9AjFM8jUFvbd6d49CSlm3QzR0Hx++LfH64zUaegw/HbBKQyZw4hxu3Oe9nw6hiQiVHQ1ihfT1alPCsjxI4bOyuuGhafpoGN6tSspio3qvQsMOoYgYvx938HUaIi0ucXnzHufP3rJlqDHbNTtYw83XLduGadtQdB+GjKHbMRTtfrvsVygjqFoA/0eB5FOBLFugePIcyxfv4LcGKNfNg/67o7BcF5BZG17Wg2qG0GXMp+M+Q+8zOCvU7AiG5SJ48x3i6jN6/RlOnrzkU+IlOcp1a12W/wCyQt2FogporVM0ozF0EcDy2rC8FA3DZ+AmthtyL3DzsNwwkSdfIM0lgk7GCul8zxbPeFjQOj27Zl9W9gyJEvlvBRVQrSkULYW6VqhaAdeRQoZdCL99cEiwQkWVeKBY+LUY4jKJoYc5isU1BsUS3dEjnjaU/lHNOGyb2vrBcUNgLD04mg2nNUDUGaM9OGXbUFDjHlZ1VOrWTlPfKqSggn/7+QtXN28howz55DFDKaiG4/kFssmC4X8Pw12lt0Aq9Kt3H5CP5zDdlKe1G2cMoKFAE5wUm26L5yPFpjnbUE65ut4EFRWiZsBLB0h6UyTZjNcgHbIf6VyH7REHTXSq678dL/2th4RnuDA1yUp64zMGjOYXfE1Qut/KC95TGajrO4G0proDR5MQQZcVbdL1kj5k2IMTZTwwqNtHO1OmG+oqbV+VsFSJ3mSB4cnKMsX589uGZOMFw1eAPU3Z3DQljXqBuDtF3JuywrAz4joKrw2/1WezbyvbCww8F7oh+FdKqiimi2uMTp9yPWlPjSivvXifsf8APo3sMILOZpMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"next_1\" title=\"next_1\" src=\"/static/16cb16b361360b97b30b273ba33566b4/29f4e/next_1.png\" srcset=\"/static/16cb16b361360b97b30b273ba33566b4/e9ff0/next_1.png 180w,\n/static/16cb16b361360b97b30b273ba33566b4/f21e7/next_1.png 360w,\n/static/16cb16b361360b97b30b273ba33566b4/29f4e/next_1.png 506w\" sizes=\"(max-width: 506px) 100vw, 506px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>일단 pages 디렉토리 안을 지워주고 여기에 집중해보자.</p>\n<h2 id=\"pages-디렉토리\" style=\"position:relative;\"><a href=\"#pages-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC\" aria-label=\"pages 디렉토리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pages 디렉토리</h2>\n<p>Next.js에서, pages폴더 안의 파일은 리액트 컴포넌트를 export하고 각 파일의 이름으로 라우팅된다. 예를 들어, <code class=\"language-text\">pages/about.js</code>가 리액트 컴포넌트를 export한다면, 이는 하나의 페이지를 이루며 <code class=\"language-text\">localhost:3000/about</code>에서 볼 수 있을 것이다. 이것은 정말 편리한 기능이다. 예외가 몇가지 있는데 간단하게만 알아보자.</p>\n<ol>\n<li>index.js : root url과 매칭된다.</li>\n<li>_app.js : CRA에서 App.js와 비슷한 역할로, 최상위 컴포넌트와 같은 역할을 한다.</li>\n<li>dynamic url : 동적 url을 하기위해 형식이 좀 다르다.</li>\n</ol>\n<p>index.js와 about.js를 만들어보자. 파일은 default export로 최소 하나 이상의 리액트 컴포넌트를 내보내야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//index.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello Next JS!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//about.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">About</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">This is about page</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>파일명과 함수명은 같을 필요가 없으며, 파일명만 url에 반영된다.</p>\n<h2 id=\"link-tag\" style=\"position:relative;\"><a href=\"#link-tag\" aria-label=\"link tag permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Link tag</h2>\n<p>네비게이션바를 만들어, 페이지간 이동을 편하게 해보자. CRA와 마찬가지로 a 태그를 직접 사용하지 않고 <code class=\"language-text\">&lt;Link></code>태그를 사용하는데 살짝 다르다.</p>\n<p>pages/에 만들면 단독 페이지가 되므로, 자주 사용할 컴포넌트들은 따로 components/ 디렉토리에 만들어주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//components/Nav.js</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/link\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Nav</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nav</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/about<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nav</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>이걸 각 컴포넌트에 넣어주면, SPA와 같이 새로고침 없이 페이지 간 이동이 가능해진다. Link tag에는 href만 넣어주도록 하고, 절대 주소와 상대 주소 모두 가능하다. a태그를 안에 넣어주는 이유는 style, className등의 일반 컴포넌트들이 갖는 속성을 Link가 갖지 못하므로 a태그에다가 그런 것들을 넣어주면 된다. 추가적으로 url에 대한 정보는 <code class=\"language-text\">next/router</code> 안에 있는 <code class=\"language-text\">useRouter</code> hook을 사용해보자!</p>\n<p>근데, 네비게이션바를 일일이 복붙하기엔 우리에 시간이 너무 아깝다… 그래서 등장하는 App 컴포넌트~!</p>\n<h1 id=\"_appjs를-이용한-커스텀-app-컴포넌트\" style=\"position:relative;\"><a href=\"#_appjs%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%BB%A4%EC%8A%A4%ED%85%80-app-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8\" aria-label=\"_appjs를 이용한 커스텀 app 컴포넌트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>_app.js를 이용한 커스텀 app 컴포넌트</h1>\n<p>우리는 CRA에서 네비게이션바를 app 컴포넌트에 넣어두고, 나머지는 따로 렌더링되게 하였다. <code class=\"language-text\">Next.js</code>에서는 기본적으로 app 컴포넌트가 최상위로 존재하지만, <code class=\"language-text\">pages/_app.js</code>를 이용함으로써 이를 오버라이딩해줄 수 있다. 파일이름은 _app.js로 정해져있으니 유념하자.</p>\n<h2 id=\"component와-pageprops로-app-컴포넌트-구성하기\" style=\"position:relative;\"><a href=\"#component%EC%99%80-pageprops%EB%A1%9C-app-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B5%AC%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"component와 pageprops로 app 컴포넌트 구성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Component와 pageProps로 app 컴포넌트 구성하기</h2>\n<p>CRA에서 네비게이션 바를 app컴포넌트에 넣고, url에 따라 다른 내부 컨텐츠를 보여주도록 했었다. 여기서도 app 컴포넌트 안을 그렇게 구성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//pages/_app.js</span>\n<span class=\"token keyword\">import</span> Nav <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/Nav\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>Component<span class=\"token punctuation\">,</span> pageProps<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Nav</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>pageProps<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>주의해야할 점으로 App 컴포넌트는 props로 Component 와 pageProps를 받아와서 렌더링해준다는 것이다. Component로 들어오는 것들은 위에서 만들었던 다른 컴포넌트들(index.js나 about.js의 컴포넌트)일 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABwElEQVQoz6WOP2gTYRjGb3YoVChoQbSpaWulanvppUdbhNhWLSpCQRAtDgpODnHPHkgIWTNnCJka+u9oTA5ythoTQ0CIi5grtArGKxnyr+RCfnKHZrA69YMfz/s938vzPcL1u68YnH7C8PxzLsrPGPO8RLzv5cLMKq4Hr20dmXDjdstI0gyLi7dZXr7H0tIdPJ4FJElGlucQRQmHw4lwfvopZ0Yf0j/xiL7xFQYmHzMordJ3dQXH/AtbB4ZELl+ZYnhsCml2AZd8C5fsYVK6iWP0Bs5xkUvOa5w9N4SwncmTeldEyXxk522Bnd0Cm+kPbKk51pPv2VLzbKp5NpJ7NmtKhjVFs0komu2tJ3fZeLPHdjqL8DlzyMEnA73w4zcVTnOEgy8/Ofxq8F0/4lv5COvebBxjdjq022YP0+zQNk0ba7be/4Vwmjbdbvdkw0gkwr6+TywWI5VKU6vVUFUVRVHQdZ1yuUypVKJarRKPx0kkEuRyuV7Y36GC1+slHA5jqc/nIxqNUiwWCYVC+P1+AoEA1qfZbJZgMGjvaprWCzsR2Gw2qdfrNBoNrLnVavWW/viWV6lUMAwD0zRt738NfwHI0UAetlDn6AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220314131449702\"\n        title=\"image-20220314131449702\"\n        src=\"/static/9e15482d4c6319bd5e39b096d4973c3e/533c1/next_2.png\"\n        srcset=\"/static/9e15482d4c6319bd5e39b096d4973c3e/e9ff0/next_2.png 180w,\n/static/9e15482d4c6319bd5e39b096d4973c3e/f21e7/next_2.png 360w,\n/static/9e15482d4c6319bd5e39b096d4973c3e/533c1/next_2.png 576w\"\n        sizes=\"(max-width: 576px) 100vw, 576px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Nav는 url이 어떻든 항상 나오게 될 것이고, Component는 url에 따라 pages에 있는 것들이 나오게 될 것이다.(그리고 이것은 정말 간편하다!!) pageProps 속성은 해당 컴포넌트가 props를 갖고 있는 경우 받아오게 될 것이다.</p>\n<h2 id=\"추가-layout-component를-두는-pattern\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80-layout-component%EB%A5%BC-%EB%91%90%EB%8A%94-pattern\" aria-label=\"추가 layout component를 두는 pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(추가) layout component를 두는 pattern</h2>\n<p>이부분은 optional하여서 궁금하지 않다면 패스해도 된다. 대부분의 Next.js에서는 layout 컴포넌트를 둬서 그곳에 모든 레이아웃 구성요소를 넣는다. 핵심은 React Component의 Children props를 받아와 app의 하위 컴포넌트들을 렌더링한다는 것이다. <code class=\"language-text\">components/layout.js</code>를 만들고, 아래와 같이 해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//components/layout.js</span>\n<span class=\"token keyword\">import</span> Nav <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Nav\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Layout</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Nav</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>그리고, _app.js를 아래와 같이 바꿔준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> pageProps <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>pageProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 하면, 레이아웃에 관련된 것은 모두 layout.js에서 관리하는 것으로 역할을 나눠줄 수 있을것이다. (보이는 결과는 같으므로 굳이 하지 않아도 된다)</p>\n<h1 id=\"style-적용하기\" style=\"position:relative;\"><a href=\"#style-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"style 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Style 적용하기</h1>\n<p>스타일을 적용하는 방법에는 여러가지가 존재하는데, 가장 간단한 몇가지만 알아보자!</p>\n<h2 id=\"1-_appjs에서-css파일-임포트\" style=\"position:relative;\"><a href=\"#1-_appjs%EC%97%90%EC%84%9C-css%ED%8C%8C%EC%9D%BC-%EC%9E%84%ED%8F%AC%ED%8A%B8\" aria-label=\"1 _appjs에서 css파일 임포트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. _app.js에서 css파일 임포트</h2>\n<p>단순하게 app 컴포넌트에 css 파일을 하나만 임포트해줄 수 있다. <code class=\"language-text\">import '../styles.css'</code>와 같이 가져오면 된다. 모든 컴포넌트에 이 스타일이 적용되므로, 태그단위의 css 초기화 구문을 여기에 넣어주면 좋을 것 같다. (당연한 얘기지만, css파일은 pages 폴더 내에 있으면 안된다)</p>\n<p>node_modules 디렉토리에 존재하는 css 또한 임포트만으로 사용할 수 있다.</p>\n<h2 id=\"2-modulecss를-이용한-스타일\" style=\"position:relative;\"><a href=\"#2-modulecss%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%8A%A4%ED%83%80%EC%9D%BC\" aria-label=\"2 modulecss를 이용한 스타일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. module.css를 이용한 스타일</h2>\n<p>각 컴포넌트에 스타일을 적용시키고 싶다면, next에서 제공하는 module.css 확장자를 이용할 수 있다.</p>\n<p>위의 예시에서 네비게이션 바의 스타일을 적용시켜줘보자. 간단하게 색만 바꿔주도록 하자. 핵심은 <u>className을 문자열이 아닌 {표현식}으로 한다</u>는 것이다. 이게 왜 중요하냐면, module.css가 임포트되어 렌더링될때 Next는 className이 다른 모듈과 겹치지 않게 하기 위해 이름을 바꿔준다. 아래와 같이 말이다!</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/*styles/navbar.module.css*/</span>\n<span class=\"token selector\">.navbar</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.margin1</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 1rem<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//components/Nav.js</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/link\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> style <span class=\"token keyword\">from</span> <span class=\"token string\">\"../styles/navbar.module.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Nav</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nav</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>style<span class=\"token punctuation\">.</span>navbar<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>style<span class=\"token punctuation\">.</span>margin1<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">.</span>margin1<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/about<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">.</span>margin1<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nav</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre></div>\n<p>module.css 파일에서 클래스명에 따른 스타일을 정의하고, 컴포넌트에서는 이를 import하여 프로퍼티에 접근하는 형식으로 className을 정의할 수 있다. nav tag의 className 처럼 백틱 문자열을 이용하여 표현식으로 여러 클래스를 삽입하는 것 또한 가능하다. 이러고 결과를 보면 재미있다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABr0lEQVQoz52Qy27TQBiF/R40jW/xTDy+D07qNA1R+1KIRRYgQSsVWCB4A/ow2UZV707jvgBpWUC6+JBTKRAJcelIn875dUa/5owxenvE8/3PvDg4YvT6E4fvP7J/+IFXb94xennw3xjzL7fczb9zO//G17sF9/cLFosFjz3GyekJ5xdnnJ6dcHw8YTKZMB6PH7+wqiqurkouLy6ZTq+ZzSqq6oaynFJOf1Jn06VOl1k9L7OyXOWz6xsM3emRpBrHaSGkIggTwihd6YOvNVvNNVGcrd2LIk0adzBaKkVkBS2hsCyXpu3RMF02GhZPGiYbDZPGprXG5q++aa9lRprlPO3vsr0zZLgzYO/ZgL1+wXArZ7ffo9/rkel82SKKE6I4/SOGabl4oUamBa6fIaVPLAVxWxArhQpTLMej2bRpms5fMSxXLCvLICFUEdJPkIFGqRjfj5beTwpEoLHrb3E8TNOhfsjvMGxXIvU2ie7S6xZ08oJ0a0i3GNDROXGiSRKNkj6+kPhC4HsCVasQyJb34GUbWwQYjgzxki6OCHCVxlMZXq1hjttOMB2Babf+ufIPR6/ncDR2w88AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"next_3\" title=\"next_3\" src=\"/static/d511124ef73bafe2f0271324672b7b0b/37523/next_3.png\" srcset=\"/static/d511124ef73bafe2f0271324672b7b0b/e9ff0/next_3.png 180w,\n/static/d511124ef73bafe2f0271324672b7b0b/f21e7/next_3.png 360w,\n/static/d511124ef73bafe2f0271324672b7b0b/37523/next_3.png 720w,\n/static/d511124ef73bafe2f0271324672b7b0b/302a4/next_3.png 1080w,\n/static/d511124ef73bafe2f0271324672b7b0b/07a9c/next_3.png 1440w,\n/static/d511124ef73bafe2f0271324672b7b0b/fb937/next_3.png 1820w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>className을 보면 뒤에 이상한 것이 추가되어 있는 것을 볼 수 있다. 이것은 Next에서 css module을 이용한 클래스명에서 여러 파일 간 충돌이 일어나지 않도록 자동으로 클래스명을 바꿔주는 것이다. 따라서, 우리는 <strong>css모듈 내에서 다른 파일과 충돌할 고민할 필요가 없어지게 된다</strong>!!</p>\n<p>module.css는 파일을 따로 만들어야 하므로, 약간의 귀찮음(클래스명 때문에 왔다갔다 해야하는…)이 존재한다. js 파일 내에서 스타일링을 하는 방법도 있다.</p>\n<h2 id=\"3-styled-jsx를-이용한-스타일\" style=\"position:relative;\"><a href=\"#3-styled-jsx%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%8A%A4%ED%83%80%EC%9D%BC\" aria-label=\"3 styled jsx를 이용한 스타일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. styled jsx를 이용한 스타일</h2>\n<p>jsx에다가 style 객체를 프로퍼티로 넘겨주는 방법도 존재하지만, Next에만 있는 <code class=\"language-text\">styled.jsx</code> 역시 매우 편한 기능이다. 한 컴포넌트 파일안에서 스타일을 처리할 수 있기 때문이다. <u>단지 style 태그를 열고, jsx를 적어주면</u> 된다. 태그 안에는 백틱으로 문자열 표현식을 적어주면 되는 것이다! 이전 코드에서, 현재 선택된 페이지의 이름을 강조해보도록 하자. <code class=\"language-text\">useRouter()</code>로 pathname을 가져와 이에 따라 a tag를 강조하도록 하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//components/Nav.js</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/link\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/router\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> style <span class=\"token keyword\">from</span> <span class=\"token string\">\"../styles/navbar.module.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Nav</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nav</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>style<span class=\"token punctuation\">.</span>navbar<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>style<span class=\"token punctuation\">.</span>margin1<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span>\n          <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>style<span class=\"token punctuation\">.</span>margin1<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n            router<span class=\"token punctuation\">.</span>pathname <span class=\"token operator\">===</span> <span class=\"token string\">\"/\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"active\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n          <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Home\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/about<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span>\n          <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>style<span class=\"token punctuation\">.</span>margin1<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n            router<span class=\"token punctuation\">.</span>pathname <span class=\"token operator\">===</span> <span class=\"token string\">\"/about\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"active\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n          <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          About\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* styled jsx를 이용한 스타일 적용하기 */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">jsx</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        {`\n          .active {\n            color: red;\n            font-weight: bold;\n          }\n        `}\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nav</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>위와 같이 ${variables}의 변수 삽입 또한 가능하며, 이 역시 다른 파일의 스타일과 겹치지 않게 적용될 것이다. 핵심은 해당 컴포넌트에만 스타일이 적용된다는 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABgUlEQVQoz6XOy27TQBTGcT8CdZo0NBFtxh47Ho+n8SXXRlDY8iIljpNUKuqjggQtLFihNHSdi/4oriroDomRfvq+OYujY33//IlvX+74evuD+/slu92OzWbDdrv9J5vN87/1c7lk9WvFw8OK9XrN/z7r+uMNl5cfmOQF8/lVmXv5dPaYxZxJPis9zfaK4opiuiCfzFgsrpkWc/J8htV0FY0Tl0q1jl07xj6s88KucVA5wq7UsO0qB3b1sZezvxweUX/ZpNE84Xiv8QrLJD26owvenQ94/3rI20HGm17KRS9h3Ms4H40ZjsZoExNq81wYYZIuWX9IkvUJVIQllUGlQ1SgiZQmDDRaaXRoUGGHtk5phx2E69NyJMLx/hCStukQd/tEJqYlJJbUMSrukyUZZ8mATndMGmdEJiU0Gb4XIF0P6Ug8V5ZZdulx6vhIFeGZGOmrp4UJno4JdIKKMoKzHkGUIf0Qx/UQLQdHuOU1jpCIsrsIR3IqZLlQmph2aBCOz29grVxaUc5cQQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220314161044890\"\n        title=\"image-20220314161044890\"\n        src=\"/static/020f4f44a3f01b1c9f581cdad81f1129/37523/next_4.png\"\n        srcset=\"/static/020f4f44a3f01b1c9f581cdad81f1129/e9ff0/next_4.png 180w,\n/static/020f4f44a3f01b1c9f581cdad81f1129/f21e7/next_4.png 360w,\n/static/020f4f44a3f01b1c9f581cdad81f1129/37523/next_4.png 720w,\n/static/020f4f44a3f01b1c9f581cdad81f1129/302a4/next_4.png 1080w,\n/static/020f4f44a3f01b1c9f581cdad81f1129/07a9c/next_4.png 1440w,\n/static/020f4f44a3f01b1c9f581cdad81f1129/a3a74/next_4.png 2272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위와같이 acitve에는 이상한 문자열들이 붙어있는 것을 확인할 수 있다. 따라서, index.js에서 <code class=\"language-text\">className=\"active\"</code>를 해줘도 저 스타일은 적용되지 않는다는 것을 유추할 수 있다. 만약, 전역적으로 스타일을 주고 싶다면 <code class=\"language-text\">&lt;style jsx global></code>로 태그를 열면 된다.</p>\n<p>이외에도 다양한 스타일 적용 방법에 대하여는 <a href=\"https://nextjs.org/docs/basic-features/built-in-css-support\">공식문서</a>를 참고하도록 하자.</p>\n<h1 id=\"nexthead를-이용한-헤더-태그-다루기\" style=\"position:relative;\"><a href=\"#nexthead%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%97%A4%EB%8D%94-%ED%83%9C%EA%B7%B8-%EB%8B%A4%EB%A3%A8%EA%B8%B0\" aria-label=\"nexthead를 이용한 헤더 태그 다루기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>next/head를 이용한 헤더 태그 다루기</h1>\n<p>html의 head태그에는 웹사이트가 돌아가기 위한 기본적인 정보가 들어간다. next에서는 <code class=\"language-text\">&lt;Head></code>태그를 제공하여 이를 다룰 수 있도록 한다. 이는 검색 엔진 최적화(SEO, Search Engine Optimization) 측면에서 도움이 된다. 여기서는 페이지별로 title을 바꿔주도록 하자.</p>\n<p>component/SEO.js를 만들고, 아래와 같이 작성해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//components/SEO.js</span>\n<span class=\"token keyword\">import</span> Head <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/head\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token constant\">SEO</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> | Hello Next</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>그리고 pages에 해당하는 index.js와 about.js에 SEO 컴포넌트를 넣어준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//pages/index.js, about.js에도 넣어주면 된다.</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/SEO\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SEO</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>home<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>active<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello Next JS!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>페이지가 많아진다면 layout 컴포넌트에서 pathname에 따른 관리를 해주는 것도 방법일 것 같다. 아래와 같이 title이 바뀌는 것을 확인할 수 있다!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACdElEQVQoz62PS0hUARSG76bI0h6S73yMimMjzovReTjOSxsVdeEDUQtHwTKhjRRo2aqdbkxwI7jRhTM4ISmaG9Hauktyk02+0LmDCtrCxdwZv/AaVrQJ6oeP8x845+ccITbTQlyOk7hsBzEZpcQq7LK/lmWX/dUsGzdynX9wPcfJtXQjl5M0XEnREZOqlxFuF9Sg0N5D5fBQ3fEKc91TLPXPKGt9gbP5uUy6uZ1UYxt3TB7SjB6519X0EJfjIltbTpLSxqXE82AhUV1Hmr6BTNN98p0Pyba2k2VpI9fWgcLiIc/RSYq+iWRdI4maBhLU9SSo60gvbuGW0k18jpWbihL52rhME0KG2UN2aScJumaSDa2kFj9A6eoixdCK0tVNfH4lBWoDam0RJosdZ1mljN5gRqs3otGdU6gxoFRpEFTlXRS6u8mzd3LX1YWq/DHaqieoXI8w1PaQZ2mhqMSNqbQCV0Ud7upGKmubsLqqMVrdmGwVWBxVcjWYyxA2dkTO2AmG2AmKbO+JBLaCbOzuEwgesrl/TGDvgMCWyPrmHp83ztjly5ZIYDtEYFv84UW+bocQACISfFqF1Y8Q3OVcoggzb+HDewis87eSAyUpysGBRCgU4egoQuQ0inT8DWlzUyZ8eIgUiRKJRJAkifAZ4TDh8LmPRqMXCCcnJ/yrTk9Pf144PDzM4OAgQ0OvWVpaZnp6mvl386ysrPCyv583fj/j4+MsLCzg83pZXl7G6/UyMTHB1NQUfr//IvQMYW1tjZmZGcbGxuS6uLgoD87OzjIwMCAvj4yMMDk5ydzcHKOjozK9vb309fXh8/l+D+Q/6NeXvwOj0qMpZw81NwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220314162807706\"\n        title=\"image-20220314162807706\"\n        src=\"/static/6e3ff76dfb50400bcfc867703762fddf/a6d36/next_5.png\"\n        srcset=\"/static/6e3ff76dfb50400bcfc867703762fddf/e9ff0/next_5.png 180w,\n/static/6e3ff76dfb50400bcfc867703762fddf/f21e7/next_5.png 360w,\n/static/6e3ff76dfb50400bcfc867703762fddf/a6d36/next_5.png 650w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이정도하면 간단한 SPA정도는 무리없이 꾸밀 수 있을 것 같다. 여기까지 <a href=\"https://github.com/choieastsea/hello-next/commit/a3a5a3c5ce042e425063a796a51356d51db5b1c9#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5\">깃허브에 커밋해놓았으니</a>, 코드를 참고하면 된다. 이제, next.js가 제공하는 기능 이외에 개발하는 우리가 경험할 수 없었던 성능적인 측면에 대하여 알아보자.</p>\n<h1 id=\"ssrserver-side-rendering과-hydrate\" style=\"position:relative;\"><a href=\"#ssrserver-side-rendering%EA%B3%BC-hydrate\" aria-label=\"ssrserver side rendering과 hydrate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSR(Server Side Rendering)과 hydrate</h1>\n<p>react.js는 기본적으로 요청에 대하여 [복잡한 js파일과 간단한 index.html파일]을 사용자에게 전송하고, 사용자의 브라우저에서 이를 렌더링하는 Client-Side Rendering 방식을 채택하고 있다. 이는 서버가 간단한 작업만 수행하도록 할 수도 있지만, 사용자의 측면에서 좋지 않을 수 있는데 아래와 같다.</p>\n<h2 id=\"csr의-단점\" style=\"position:relative;\"><a href=\"#csr%EC%9D%98-%EB%8B%A8%EC%A0%90\" aria-label=\"csr의 단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSR의 단점</h2>\n<ol>\n<li>\n<p>네트워크가 느린 사용자는 흰 화면을 오래동안 지켜봐야 한다.</p>\n<p>브라우저에 js파일들이 로드되고 리액트에 의하여 root라는 id를 갖는 엘리먼트에 주입이 되어 초기 렌더링이 되기까지는 빈 화면이 보이게 된다. 이는 사용자의 이탈을 유도한다.</p>\n</li>\n<li>\n<p>SEO 측면에서 좋지 않다.</p>\n<p>구글, 네이버 등의 검색 엔진은 페이지의 개략적인 정보를 갖고 있다가 사용자의 검색에 최적의 결과를 보여주도록 설계가 되어있는데, CSR은 검색 엔진이 직접 사이트에 접근해서야 정보를 얻을 수 있으므로 검색엔진 최적화 측면에서 좋지 않다. 이는 곧 사이트의 유입량 감소로 이어질 것이다.</p>\n</li>\n<li>\n<p>js가 허용되지 않는 사용자는 초기 페이지도 보지 못한다.</p>\n<p>javascript가 꺼진 브라우저라면, 사용자는 페이지의 초기 상태도 볼 수 없게 된다.</p>\n</li>\n</ol>\n<p>이를 해결하기 위해 html로 초기 코드를 짜는 방법이 있겠지만, 이는 이중작업이므로 권장되지 않는다. 반면 <strong>Next.js에서는 개발자의 js코드로 초기화면을 html로 렌더링하여 사용자에게 보내는 서버사이드렌더링이 기본적으로 제공된다</strong>!!</p>\n<h2 id=\"hydrating을-이용한-성능-개선\" style=\"position:relative;\"><a href=\"#hydrating%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0\" aria-label=\"hydrating을 이용한 성능 개선 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hydrating을 이용한 성능 개선</h2>\n<p>서버에서 개발자의 js코드를 기반으로 html코드를 만들어서 사용자에게 보내는 것이 SSR이다. 하지만, react에서는 수많은 리렌더링이 일어나는데 이때마다 서버에서 렌더링하여 사용자에게 보낸다면 이는 매우 성능의 측면에서 좋지 않을 것이다. 따라서, Next.js는 초기 화면만 서버에서 html로 렌더링하여 사용자에게 보내고, react.js가 포함된 자바스크립트 코드를 보낸다. 이는 <u>초기 주도권은 정적 html로, (js파일이 로드가 완료된 시점부터의) 그 이후는 react가 주도권을 가져가도록 하는 것이며 이를 hydrate</u>라고 한다. 따라서, <strong>로딩 이후 리렌더링 등의 일들은 react가 기존의 방식대로 빠르게 처리하게 되는 것</strong>이다!!</p>\n<h2 id=\"cra와-비교하기\" style=\"position:relative;\"><a href=\"#cra%EC%99%80-%EB%B9%84%EA%B5%90%ED%95%98%EA%B8%B0\" aria-label=\"cra와 비교하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CRA와 비교하기</h2>\n<p>CRA로 만든 사이트의 소스코드를 보자.(Inspect가 아닌 view source code로 봐야함)</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>React App<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">defer</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/js/bundle.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>noscript</span><span class=\"token punctuation\">></span></span>You need to enable JavaScript to run this app.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>noscript</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>html의 내용은 하나도 없으므로 js가 로드되고 실행될때까지 빈 화면을 보여줄 것이다. 하지만, Next.js로 만든 사이트를 보면 초기페이지에 대한 정보가 모두 html에 들어있는 것을 확인할 수 있다. 아래는 위의 예시로 실행한 페이지의 소스코드를 일부 생략한 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">data-next-hide-fouc</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n      <span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>noscript</span> <span class=\"token attr-name\">data-next-hide-fouc</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n        <span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>noscript</span>\n    <span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>home | Hello Next<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>noscript</span> <span class=\"token attr-name\">data-n-css</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>noscript</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span>\n      <span class=\"token attr-name\">defer</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">nomodule</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/_next/static/chunks/polyfills.js?ts=1647246144551<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    ...\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>noscript</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>__next_css__DO_NOT_USE__<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>noscript</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>__jsx-205e0e976629c39e<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n      <span class=\"token selector\">.active.jsx-205e0e976629c39e</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> bold<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>__next<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-reactroot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nav</span>\n        <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jsx-205e0e976629c39e navbar_navbar__jP4A8 navbar_margin1__HuOO1<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jsx-205e0e976629c39e navbar_margin1__HuOO1 active<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token punctuation\">></span></span>Home<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span>\n        <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jsx-205e0e976629c39e navbar_margin1__HuOO1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/about<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token punctuation\">></span></span>About<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span>\n        <span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nav</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>active<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hello Next JS!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/_next/static/chunks/react-refresh.js?ts=1647246144551<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>초기상태의 컴포넌트들이 html로 렌더링되어 넘어오고, js파일은 여러개의 chunks들로 넘어오는 것을 확인할 수 있다. 이후 자바스크립트가 모두 로드가 되면, 리렌더링 등의 작업들은 브라우저의 리액트가 하는 것이다. 이러한 방법으로 Next.js는 성능을 개선하였다. 어디까지 서버 사이드에서 렌더링할건지, fetching data는 어느시점에서 받아올지, static generation의 구체적인 방법 등은 이제 자세히 알아보도록 하자.</p>\n<p>이렇게 간단하게 넥스트로 정적인 페이지를 만들어 보는 시간을 가졌다. 다음에는 동적 페이지를 만드는 방법과, 다양한 방식으로 성능을 향상시키는 방법에 대하여 공부해봐야겠다!</p>","excerpt":"React로 웹사이트를 만드는 가장 대표적인 3가지 방법이 있는데, CRA, NextJS, Gatsby이다. 그중에서, Gatsby는 정적 페이지 생성에 대한 것이고, CRA는 가장 쉽고 입문하기 좋은 보일러 플레이트라고 알려져있다. 나도 CRA로만 리액트 공부를 했었는데, 라우팅, SSR, 코드 스플리팅 등의 세팅에 어려움이 있었다. 이에 반해, Next.JS는 리액트를 위한 프레임워크로 몇가지 규칙을 이해한다면 간편하게 기능을 이용할 수 있다. 또한 기본적으로 서버사이드렌더링(SSR)을 제공하여 이의 장점을 이용할 수도 있다. 이외에도 다양한 기능들이 제공되니 한번 시간 내서 배워보자! 오늘은 넥스트로 간단한 정적인 페이지를 만드는 방법에 대하여 공부해보겠다. Next.js Project 시작하기 우선, node js(12.22.0 이후)와 npm이 깔려 있어야 한다. 간단하게 만 해주면 된다! yarn의 경우, 을 해주면 된다. 프로젝트 기본 정보를 입력한 이후,  또는 로 …","frontmatter":{"date":"March 10, 2022","title":"(React) NextJS 입문해보기 - (1)","categories":"FE","author":"choieastsea","emoji":"😃"},"fields":{"slug":"/FE-NextJS-1/"}},"next":{"id":"3140942d-5372-5876-9cee-3909ea6fb3a7","html":"<p>본 글은 본인이 ‘데이터 분석 준전문가’ 필기 시험을 준비하면서 개인적으로 작성하는 글이라 일부 이해가 되지 않고 부정확할 수 있음을 밝힙니다. 모두 화이팅^^</p>\n<h1 id=\"군집분석\" style=\"position:relative;\"><a href=\"#%EA%B5%B0%EC%A7%91%EB%B6%84%EC%84%9D\" aria-label=\"군집분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>군집분석</h1>\n<blockquote>\n<p>비지도학습인 군집분석에 대해 학습한다.</p>\n<p>군집분석을 통해 인사이트를 얻는 과정을 학습한다.</p>\n</blockquote>\n<h2 id=\"군집분석-1\" style=\"position:relative;\"><a href=\"#%EA%B5%B0%EC%A7%91%EB%B6%84%EC%84%9D-1\" aria-label=\"군집분석 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>군집분석</h2>\n<p>군집분석이란 여러 변수로 표현된 자료들 사이의 유사성을 측정하고 유사한 자료들끼리 몇 개의 군집(cluster)으로 묶고 다변량 분석(상관분석, 회귀분석, 주성분 분석 등)을 활용하여 각 군집에 대한 특징을 파악하는 기법이다. 생물학에서의 종의 분류, 마케팅에서의 시장 세분화, 금융에서 산업 분석 등에 활용되며 <code class=\"language-text\">협엽 필터링(Collaborative Filtering)</code>같은 추천 서비스가 등장하는 기반을 제공하였다.</p>\n<h3 id=\"거리측도\" style=\"position:relative;\"><a href=\"#%EA%B1%B0%EB%A6%AC%EC%B8%A1%EB%8F%84\" aria-label=\"거리측도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>거리측도</h3>\n<ol>\n<li>\n<p>변수가 연속형인 경우</p>\n<ul>\n<li>\n<p>유클라디안 거리(Euclidean)</p>\n<p>두 점 사이의 가장 짧은 거리를 계산. 통계적이지 않고 수학적인 거리로 변수들의 산포정도를 감안하지 않는다. == 좌표계에서 점과 점 사이의 거리</p>\n</li>\n<li>\n<p>맨하튼 거리(Manhattan)</p>\n<p>길을 따라 갔을 때의 거리. 시가 거리라고도 함. 가로지르지 않는 <strong>축들의 차이의 합</strong>이라고 볼 수 있다. x의 이동거리, y의 이동거리, z의 이동거리를 더한다.</p>\n</li>\n<li>\n<p>체비셰프 거리(Chebychev)</p>\n<p><strong>변수 간 거리 차이 중 최댓값</strong>을 데이터 간의 거리로 정의한다. x,y,z 축이 있을 때 각 축에서 최대와 최소값의 차이를 구하고, 그 중 최대를 의미한다.</p>\n</li>\n<li>\n<p>표준화 거리(Standardized)</p>\n<p>유클리드 거리에서 변수 간 단위의 차이로 생기는 문제를 표준편차로 나눔으로써 해결한 거리이다.</p>\n</li>\n<li>\n<p>마할라노비스 거리</p>\n<p>표준화 거리에서 변수 간 상관성까지 고려한 거리이다.</p>\n</li>\n<li>\n<p>민코프스키 거리</p>\n<p>유클리디안 거리와 맨하튼 거리를 한번에 표현한 거리로, m=1일때는 맨하튼 거리이며, m=2 일때는 유클리디안 거리가 된다.</p>\n</li>\n</ul>\n<p>유클라디안 거리, 맨하튼 거리, 체비셰프 거리를 비교해보자.</p>\n<p>A(1,2,3), B(2,6,-1)라고 했을 때, 각각의 거리를 구하면</p>\n<ol>\n<li>유클라디안 : $\\sqrt{(1-2)^2+(2-6)^2+(3+1)^2} = \\sqrt{33}$</li>\n<li>맨하튼 : $\\abs{1-2}+\\abs{2-6}+\\abs{3+1} = 9$</li>\n<li>체비셰프 : $max((1-2), (2-6), (3+1)) = 4$</li>\n</ol>\n</li>\n<li>\n<p>변수가 범주형인 경우 : 얼마나 공통된 요소를 갖고 있는지 판단 가능</p>\n<ul>\n<li>\n<p>단순 일치 계수(Simple Matching Coefficient, SMC) : 두 객체의 상이성을 <strong>불일치 비율</strong>로 계산한다. p는 총 변수의 개수, m은 일치한 수를 의미한다. 즉 전체 중에 일치하지 않은 비율을 의미.</p>\n<p>$d(i,j) = \\frac{p-m}{p}$</p>\n</li>\n<li>\n<p>자카드 지수 : 두 집합 사이의 유사도를 측정하는 지표로서 두 집합이 같으면 1, 완전 다르면 0이 된다. cap/cup으로 계산.</p>\n<p>$J(X,Y) = \\frac{n(A\\cap B)}{n(A\\cup B)}$</p>\n</li>\n<li>\n<p>자카드 거리 : 자카드 지수를 거리화하기 위해, 1에서 자카드 지수를 뺀 값(같으면 0, 다르면 1이 되도록)</p>\n</li>\n<li>\n<p>코사인 유사도 : 텍스트의 유사도를 측정하기 위한 지표로서 <strong>크기가 아닌 방향성을 측정</strong>하는 지표다. 완전 일치하면 1, 완전 다른 방향이면 -1의 값을 갖는다.</p>\n<p>$Cosine Similarity(X,Y) = \\frac{\\overrightarrow{X}\\cdot\\overrightarrow{Y}}{\\abs{X}\\abs{Y}}$ : <u>두 내적값을 두 벡터의 크기의 곱으로 나눈 값</u>이다. (내적은 단순하게 같은 좌표계끼리 곱해주면 됨)</p>\n</li>\n<li>\n<p>코사인 거리 : 코사인 유사도를 거리화하기 위해, 1에서 코사인 유사도를 뺀 값</p>\n</li>\n<li>\n<p>순위 상관 계수 : 순서척도인 두 데이터의 거리를 비교하기 위해 <code class=\"language-text\">스피어만 상관계수</code>를 이용</p>\n</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"계층적-군집분석\" style=\"position:relative;\"><a href=\"#%EA%B3%84%EC%B8%B5%EC%A0%81-%EA%B5%B0%EC%A7%91%EB%B6%84%EC%84%9D\" aria-label=\"계층적 군집분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>계층적 군집분석</h2>\n<p>개별 관측치 간의 거리를 계산하여 <strong>가장 가까운 관측지부터 결합해나가면서 계층적 트리 구조를 형성하고, 이를 통해 군집화를 수행</strong>하는 방법이다. 각 데이터를 하나의 군집으로 간주하고 가까운 데이터부터 순차적으로 병합하는 ‘병합적 방법’과 전체를 하나의 군집으로 간주하는 ‘분할적 방법’이 존재한다. ‘가깝다’라는 것은 어떻게 거리를 계산하냐에 따라 방법이 달라지게 된다.</p>\n<h3 id=\"군집-간의-거리\" style=\"position:relative;\"><a href=\"#%EA%B5%B0%EC%A7%91-%EA%B0%84%EC%9D%98-%EA%B1%B0%EB%A6%AC\" aria-label=\"군집 간의 거리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>군집 간의 거리</h3>\n<p>계층적 군집은 한 번 병합된 객체는 다시 분리되지 않고 사용되는 연결법에 따라 생성되는 군집이 달라진다. 따라서 여러 연결법을 통해 군집을 생성한 후, 유의미한 군집을 형성하는 방법을 적용하도록 한다.</p>\n<ul>\n<li>군집간의 연결법 → 각 연결법의 특징을 익히도록 하자.\n<ol>\n<li>단일연결법(최단연결법) : 군집안의 데이터들과 기존의 데이터들의 거리를 가장 가까운 것을 거리로 계산한다.</li>\n<li>완전연결법(최장연결법) : 군집안의 데이터들과 기존의 데이터들의 거리를 가장 먼 것을 거리로 병합한다.</li>\n<li>평균연결법 : 각 데이터끼리의 거리의 평균을 계산하는 방법이다. <em>계산량은 불필요하게 많아지나 이상치에 덜 민감</em>하다.</li>\n<li>중심연결법 : 각 군집의 중심점 사이의 거리를 이용한다. 평균연결법보다 계산량이 적다.</li>\n<li>와드연결법 : 생성된 군집과 기존의 데이터들의 거리를 <strong>군집 내 오차가 최소가 되는 데이터</strong>로 계산한다. 군집 내 <u>분산을 최소</u>로 하므로, 좀 더 조밀한 군집이 생성될 수 있다.</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"계층적-군집분석-실습--hclust-함수-이용\" style=\"position:relative;\"><a href=\"#%EA%B3%84%EC%B8%B5%EC%A0%81-%EA%B5%B0%EC%A7%91%EB%B6%84%EC%84%9D-%EC%8B%A4%EC%8A%B5--hclust-%ED%95%A8%EC%88%98-%EC%9D%B4%EC%9A%A9\" aria-label=\"계층적 군집분석 실습  hclust 함수 이용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>계층적 군집분석 실습 : hclust() 함수 이용</h3>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> x <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> y <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> data <span class=\"token operator\">=</span> data.frame<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> rownames<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'C'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'D'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'E'</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 행에 이름 할당</span>\n<span class=\"token operator\">></span> dist_data <span class=\"token operator\">&lt;-</span> dist<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> method<span class=\"token operator\">=</span><span class=\"token string\">\"euclidean\"</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 거리 행렬 데이터로 변환. default method : Euclidean</span>\n<span class=\"token operator\">></span> print<span class=\"token punctuation\">(</span>dist_data<span class=\"token punctuation\">)</span>\n         A        B        C        D\nB <span class=\"token number\">1.414214</span>                           \nC <span class=\"token number\">5.000000</span> <span class=\"token number\">5.385165</span>                  \nD <span class=\"token number\">2.236068</span> <span class=\"token number\">2.236068</span> <span class=\"token number\">3.162278</span>         \nE <span class=\"token number\">1.000000</span> <span class=\"token number\">2.236068</span> <span class=\"token number\">4.242641</span> <span class=\"token number\">2.000000</span>\n<span class=\"token comment\"># 각 지점에서 다른 지점까지의 거리 데이터가 dist_data에 저장됨</span>\n<span class=\"token operator\">></span> hclust_data <span class=\"token operator\">&lt;-</span> hclust<span class=\"token punctuation\">(</span>dist_data<span class=\"token punctuation\">,</span> method<span class=\"token operator\">=</span><span class=\"token string\">'single'</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\">#단일연결법(최단연결법)으로 연결</span>\n<span class=\"token operator\">></span> plot<span class=\"token punctuation\">(</span>hclust_data<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> abline<span class=\"token punctuation\">(</span>h<span class=\"token operator\">=</span><span class=\"token number\">1.7</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\">#높이를 1.7으로 선을 그어 군집을 나눠볼 수 있다.</span></code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/0lEQVQoz4WSyW6GQAyD5/0fELjAiSv7vqb6Irma8tM2ksUQEic2E+77NhCH3ud5tjRNLc9zy7LMkiRxFEVh13X9qFWEmISiGMdxWNM0Vte1dV3nz6qq/CyiD0Ka2ra1aZp8o2VZvrGuq5Pu++54xpPMCdlkGAafKhlvwTDZE9v0sSEkSKFBBW++svFzuzeEcRx9u23bPhqQTB5Qw7tyv0Uoy9L9QzbF8g4CwOZ8jz3u+95YBGINIY/PgSQF8ug8T/dSDfr7/BxIaWQQPZzJqQe4h3z8SwYh6RoACYCQDcm5h0rGF/Xtb6IgvjqQiwygCBXhv3v1zOuMXAjia8WQL3U6X7MGAxiQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hclust_1\" title=\"hclust_1\" src=\"/static/fab57e6ccff0e5da14c4bfee3e8207c6/37523/hclust_1.png\" srcset=\"/static/fab57e6ccff0e5da14c4bfee3e8207c6/e9ff0/hclust_1.png 180w,\n/static/fab57e6ccff0e5da14c4bfee3e8207c6/f21e7/hclust_1.png 360w,\n/static/fab57e6ccff0e5da14c4bfee3e8207c6/37523/hclust_1.png 720w,\n/static/fab57e6ccff0e5da14c4bfee3e8207c6/302a4/hclust_1.png 1080w,\n/static/fab57e6ccff0e5da14c4bfee3e8207c6/061c7/hclust_1.png 1216w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>높이를 1.7으로 하였을때는 {c},{d},{a,b,e}의 3 군집으로 나눠지는 것을 확인할 수 있다.위의 점들의 위치는 아래와 같다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 61.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA10lEQVQoz6WShwoEIQxE/f9PXdgC6/bi8XKMuJ7XA8E4JmOaO88zTNP0l87zHLz3ZjsI67o2ADmOI4BJuedY/s65LEvo+/5O2LZtJOT+rSiGTB0GhMMwxEep7uM4PrzliljJ67qGruss3fS39MQnJXyWoRFSe9M0l5Jz0netuBCqZAYDUCL9RCOhhpL28NehREJ6mJbMKuz7Hu1t215mhw/C8IwQMoai5eQDtQCsqiqrAMWPk2DFyAZ3SptfNE0yYlgS9VZZpDi+wqnKlfau1HACFVzyl30D0heyRYgYz4YAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hclust_data\" title=\"hclust_data\" src=\"/static/fa8ed0e334826e56206ffb3f640a925d/37523/hclust_data.png\" srcset=\"/static/fa8ed0e334826e56206ffb3f640a925d/e9ff0/hclust_data.png 180w,\n/static/fa8ed0e334826e56206ffb3f640a925d/f21e7/hclust_data.png 360w,\n/static/fa8ed0e334826e56206ffb3f640a925d/37523/hclust_data.png 720w,\n/static/fa8ed0e334826e56206ffb3f640a925d/302a4/hclust_data.png 1080w,\n/static/fa8ed0e334826e56206ffb3f640a925d/0d0e4/hclust_data.png 1230w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>최단연결법이 아닌 다른 방법으로도 구현해보자. method의 기본값은 ‘complete’, 최장연결법이다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7UlEQVQoz32SWQrDMAxEff/TJSFfgeQA+QrZd5VnmKK6aQVCtjwaLVa479vQJ8HfNI0VRWFVVVlZlpbnuWVZZl3XvTFegpznedpxHF+677styxKtx1zX9UyIYxxHG4bB5nm2bdtsXddopZDxBlHaQSqRkCBaSAO8QIqKSGSPLZMd9WCviCr9h8GGtm0jcJqmr+xphf86UEyo6zoOmzn6BywkqkxzTmfMWYlihZBRna8QAcTv6qcJFqGSEMsZ3McMySKnCPFprmpZSSUkA9f3fSTmHrSDfq/8DJ/uCHitkjaAe/i1V7+IPaGvWPv8Ah5gYgXsUw6aAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hclust_2\" title=\"hclust_2\" src=\"/static/2d17959de074bd88c7073ea99dd45507/37523/hclust_23.png\" srcset=\"/static/2d17959de074bd88c7073ea99dd45507/e9ff0/hclust_23.png 180w,\n/static/2d17959de074bd88c7073ea99dd45507/f21e7/hclust_23.png 360w,\n/static/2d17959de074bd88c7073ea99dd45507/37523/hclust_23.png 720w,\n/static/2d17959de074bd88c7073ea99dd45507/302a4/hclust_23.png 1080w,\n/static/2d17959de074bd88c7073ea99dd45507/51800/hclust_23.png 1196w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>최단 연결법과 다르게 군집이 형성되는 것을 확인할 수 있다.</p>\n<h3 id=\"비계층적-군집분석--k-means-군집\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EA%B3%84%EC%B8%B5%EC%A0%81-%EA%B5%B0%EC%A7%91%EB%B6%84%EC%84%9D--k-means-%EA%B5%B0%EC%A7%91\" aria-label=\"비계층적 군집분석  k means 군집 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>비계층적 군집분석 : k-means 군집</h3>\n<p>계층적으로 군집을 형성하지 않고 구하려는 군집의 수(k)를 사전에 정의해 정해진 군집의 수만큼 형성하는 방법이다. 집단 내 동질성과 집단 간 이질성이 모두 높게 전체 데이터를 k개의 군집으로 분할하는 알고리즘이다.</p>\n<ol>\n<li>군집의 수 k를 정하고 각각의 k를 설명할 변수의 값을 임의로 정하거나 데이터 중에서 k개를 선택한다. 이때 선택된 k개를 seed라고 한다.</li>\n<li>각 데이터를 가장 가까운 seed로 할당한다.</li>\n<li>각 군집의 데이터들 사이의 평균값/중앙값을 계산하여 새로운 seed를 설정한다.</li>\n<li>새로운 seed를 중심으로 군집을 재할당한다.</li>\n<li>각 군집의 중심이 변하지 않을 때까지(이상적으로 군집화될때까지) 3,4를 반복한다.</li>\n</ol>\n<ul>\n<li>\n<p>k-means 군집 특징</p>\n<table>\n<thead>\n<tr>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>- 분석 기법의 적용이 비교적 단순하고 빠르다<br />- 다양한 데이터에서 사용 가능하다</td>\n<td>- 초깃값(k)의 설정이 어렵다<br />- 결과의 해석에 어려움이 있다<br />- 데이터의 변수들이 연속형이여야 한다<br />- 안정된 군집은 보장하나 최적의 보장은 없다<br />- <strong>이상값에 민감하게 반응</strong>한다 → 평균값 대신 중앙값 사용하면 됨</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<h3 id=\"dbscandensity-based-spatial-clustering-of-applications-with-noise\" style=\"position:relative;\"><a href=\"#dbscandensity-based-spatial-clustering-of-applications-with-noise\" aria-label=\"dbscandensity based spatial clustering of applications with noise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DBSCAN(Density Based Spatial Clustering of Applications with Noise)</h3>\n<p>밀도 기반 군집분석의 한 방법으로 개체 간의 거리를 기반으로 한 다른 군집 방법과 다르게 밀집한 정도에 기초하여 군집을 형성한다.</p>\n<p>군집의 형태에 구애받지 않아 데이터의 분포가 기하학적이고 노이즈가 포함된 데이터셋에 대해서도 효과적으로 군집을 형성할 수 있고, 초기 군집의 수를 정할 필요가 없다.</p>\n<h2 id=\"자기조직화지도som\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EA%B8%B0%EC%A1%B0%EC%A7%81%ED%99%94%EC%A7%80%EB%8F%84som\" aria-label=\"자기조직화지도som permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자기조직화지도(SOM)</h2>\n<p>SOM(자기조직화지도) 알고리즘은 코호넨 맵이라고도 불리며, 인공신경망 기반 <strong>차원축소와 군집화</strong>를 동시에 수행할 수 있다. 고차원 데이터를 2차원에 가깝게 표현하여 한눈에 파악하는 <strong>시각화 방법</strong> 중 하나이다.</p>\n<h3 id=\"자기조직화지도-구성\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EA%B8%B0%EC%A1%B0%EC%A7%81%ED%99%94%EC%A7%80%EB%8F%84-%EA%B5%AC%EC%84%B1\" aria-label=\"자기조직화지도 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자기조직화지도 구성</h3>\n<p>은닉층 없이 j개의 입력층과 이를 n개의 노드(뉴런)로 표현하고자 하는 경쟁층으로 완전 연결(fully connected)되어 있다.</p>\n<ol>\n<li>초기 학습률과 임의의 값의 가중치 행렬, 경쟁층의 노드 개수를 지정한다.</li>\n<li>입력 벡터(첫번째 데이터)를 제시하고 가중치 행렬에 의하여 가장 가까운 노드에 나타낸다.</li>\n<li>입력 벡터에 대한 승자노드가 입력 벡터를 더 잘 나타내도록 학습률을 사용하여 해당 가중치를 재조정한다.</li>\n<li>2단계로 돌아가서 반복하여 모든 입력 벡터를 승자노드에 나타낸다. 모든 입력 벡터가 승자노드에 표시되는 과정을 1회 반복이라 한다.</li>\n<li>일정 반복수에 도달할때까지 2번으로 돌아가 반복하며, 그 과정에서 승자노드는 변경될 수 있다.</li>\n</ol>\n<h3 id=\"자기조직화지도-특성\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EA%B8%B0%EC%A1%B0%EC%A7%81%ED%99%94%EC%A7%80%EB%8F%84-%ED%8A%B9%EC%84%B1\" aria-label=\"자기조직화지도 특성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자기조직화지도 특성</h3>\n<p>인공신경망의 일종이지만 은닉층을 보유하고 있지 않고, 순전파 방식만 사용하므로 속도가 매우 빠르다.</p>\n<table>\n<thead>\n<tr>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>- 순전파 방식을 사용하여 속도가 매우 빠르다<br />- 저차원의 지도로 형상화되어 시각적 이해가 쉽다<br />- 패턴 발견 및 이미지 분석에서 성능이 우수하다<br />- 입력 데이터에 대한 속성을 그대로 보존한다</td>\n<td>- 초기 학습률 및 초기 가중치에 많은 영향을 받는다<br />- 경쟁층의 이상적인 노드의 갯수를 정하기 어렵다</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"군집분석-모형의-평가\" style=\"position:relative;\"><a href=\"#%EA%B5%B0%EC%A7%91%EB%B6%84%EC%84%9D-%EB%AA%A8%ED%98%95%EC%9D%98-%ED%8F%89%EA%B0%80\" aria-label=\"군집분석 모형의 평가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>군집분석 모형의 평가</h3>\n<p>군집 간 분산이 최대가 되는 군집의 수가 몇개인지, 군집 내 분산이 최소가 되는 군집의 수가 몇개인지 확인하는 방법이다.</p>\n<ul>\n<li>외부 평가\n<ul>\n<li>자카드계수 평가</li>\n<li>분류모형 평가 방법을 응용</li>\n</ul>\n</li>\n<li>내부 평가\n<ul>\n<li>단순 계산법</li>\n<li>군집 간의 거리를 계산</li>\n<li>실루엣 계수 : 데이터가 속한 군집 안에 데이터들이 잘 속해 있는지 평가. -1~1의 값을 가지며 1에 가까울수록 군집이 잘 되어있다고 평가.</li>\n<li>엘보 메소드 : K-means 분석 시각화</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"협업-필터링\" style=\"position:relative;\"><a href=\"#%ED%98%91%EC%97%85-%ED%95%84%ED%84%B0%EB%A7%81\" aria-label=\"협업 필터링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>협업 필터링</h3>\n<p>협업 필터링은 수많은 사람들로부터 유사한 사람들을 찾고 유사한 사람들이 선호했거나 경험한 것을 예측하는 추천 방법 중 하나이다.</p>\n<h1 id=\"연관분석\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EA%B4%80%EB%B6%84%EC%84%9D\" aria-label=\"연관분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연관분석</h1>\n<blockquote>\n<p>마케팅에서 자주 사용되는 연관분석에 대해 학습한다.</p>\n<p>연관분석의 다양한 알고리즘과 특징을 이해한다.</p>\n</blockquote>\n<h2 id=\"연관분석의-개요-및-측도\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EA%B4%80%EB%B6%84%EC%84%9D%EC%9D%98-%EA%B0%9C%EC%9A%94-%EB%B0%8F-%EC%B8%A1%EB%8F%84\" aria-label=\"연관분석의 개요 및 측도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연관분석의 개요 및 측도</h2>\n<p>장바구니 분석으로도 불리며 ‘치킨을 구매한 고객은 콜라를 구매할 확률이 높다’와 같이 고객들의 구매 패턴을 분석하여 의미 있는 규칙을 찾아내는 분석이다. If~then의 꼴로 해석된다. 탐색적 기법의 일종이며 비지도학습 유형으로 다양하게 활용될 수 있다.</p>\n<p>하지만 연관분석은 품목의 수가 증가하면 분석 계산이 기하급수적으로 증가할 수 있다. 이를 개선하기 위해 범주화하여 일반화하는 작업을 수행하기도 한다.</p>\n<h3 id=\"연관분석의-측도\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EA%B4%80%EB%B6%84%EC%84%9D%EC%9D%98-%EC%B8%A1%EB%8F%84\" aria-label=\"연관분석의 측도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연관분석의 측도(!)</h3>\n<ol>\n<li><strong>지지도</strong> : 전체 거래 중 A와 B라는 두 개의 품목이 동시에 포함된 거래의 비율. 단순하게 A cap B로 구할 수 있다. $P(A\\cap B)= \\frac{A와 B가 동시에 포함된 거래 수}{전체 거래수}$</li>\n<li><strong>신뢰도</strong> : 어떤 하나의 품목이 구매되었을 때 다른 품목 하나가 구매될 확률. 조건부 확률로 나타낼 수 있다. A가 구매되었을 때 B도 구매될 확률과 B가 구매되었을 때, A도 구매될 확률은 분모가 다를 것이다.</li>\n<li><strong>향상도</strong> : 품목 A가 주어지지 않았을 때 B가 구매될 확률 대비 A가 구매될 때 B가 구매될 확률. 신뢰도를 A의 확률로 나누면 된다. 신뢰도와 다르게 향상도(A→B)와 (B→A)는 같을 것이다. $\\frac{P(A\\cap B)}{P(A)P(B)}$</li>\n</ol>\n<h2 id=\"연관분석의-알고리즘과-특징\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EA%B4%80%EB%B6%84%EC%84%9D%EC%9D%98-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EA%B3%BC-%ED%8A%B9%EC%A7%95\" aria-label=\"연관분석의 알고리즘과 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연관분석의 알고리즘과 특징</h2>\n<h3 id=\"연관분석-알고리즘\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EA%B4%80%EB%B6%84%EC%84%9D-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\" aria-label=\"연관분석 알고리즘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연관분석 알고리즘</h3>\n<ol>\n<li>aporiori 알고리즘 : 지지도를 사용해 빈발 아이템 집합을 판별하고 이를 통해 계산의 복잡도를 감소시키는 알고리즘이다.\n<ul>\n<li>최소 지지도를 설정한다</li>\n<li>최소 지지도보다 큰 지지도를 갖는 단일 품목을 선별한다</li>\n<li>단일품목 2개로 이루어진 연관규칙 중 최소 지지도 이상의 연관규칙을 찾는다</li>\n<li>이를 반복적으로 수행하며 3개 이상의 품목에 대한 연관규칙을 생성하면서 의미 있는 결과를 찾는다</li>\n</ul>\n</li>\n<li>FP-Growth 알고리즘 : 데이터셋이 큰 경우 하나씩 검사하는 것이 비효율적이므로 지지도가 낮은 품목부터 아이템 집합을 생성하는 상향식 알고리즘. apriori 알고리즘보다 속도가 빠르며 연산 비용이 저렴하다.</li>\n</ol>\n<h3 id=\"연관분석의-특징\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EA%B4%80%EB%B6%84%EC%84%9D%EC%9D%98-%ED%8A%B9%EC%A7%95\" aria-label=\"연관분석의 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연관분석의 특징</h3>\n<table>\n<thead>\n<tr>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>- 결과가 단순하고 분명하다<br />- 분석을 위한 계산이 간단하다<br />- 목적변수가 없으므로 데이터 탐색을 위해 사용 가능하다</td>\n<td>- 품목 세분화에 어려움이 있다<br />- 품목 수의 증가는 기하급수적인 계산량의 증가를 초래한다<br />- 거래가 발생하지 않은 품목에 대하여는 분석이 불가능하다</td>\n</tr>\n</tbody>\n</table>","frontmatter":{"date":"February 24, 2022","title":"(ADsP) 3과목(데이터 분석) 3장. 정형 데이터 마이닝 (下)","categories":"ADsP","author":"choieastsea","emoji":"🚀"},"fields":{"slug":"/ADsP-3-(3)-2/"}},"prev":{"id":"60ff4daf-5019-5625-93a4-ec86c0a0fe00","html":"<p>저번에 이어 Next js를 공부해보자! (공식사이트와 유튜브를 돌아다니며 공부했다) 오늘은 fetch하여 데이터 받아오기와 Next.js에서의 SSR에 대하여 공부해보려고 한다.</p>\n<h1 id=\"데이터-가져오기react-\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0react-\" aria-label=\"데이터 가져오기react  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 가져오기(react )</h1>\n<p>저번에 공부한 내용으로는 간단하게 정적인 페이지를 만들어 보았는데, 오늘은 동적인 페이지를 만들어보자! index.js에서 영화 api를 가져와서 정보를 보여주도록 하자. 원래 리액트에서 하는 것 처럼, useEffect hook을 사용하여 페이지가 로드될때 데이터를 fetch해올 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Image <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/image\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react/cjs/react.development\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/SEO\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">API_KEY</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"API_KEY\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//put personal api key</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>movies<span class=\"token punctuation\">,</span> setMovies<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.themoviedb.org/3/movie/popular?api_key=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">API_KEY</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> results <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// console.log(results);</span>\n      <span class=\"token function\">setMovies</span><span class=\"token punctuation\">(</span>results<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SEO</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>home<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>active title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>movies<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">movie</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>movie<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Image</span></span>\n                <span class=\"token attr-name\">alt</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>movie<span class=\"token punctuation\">.</span>poster_path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://image.tmdb.org/t/p/w500/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>movie<span class=\"token punctuation\">.</span>poster_path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>200px<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>300px<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h4</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>movie<span class=\"token punctuation\">.</span>original_title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h4</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">jsx</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">{`\n        .title {\n          text-align: center;\n        }\n        .container {\n          display: flex;\n          flex-direction: row;\n          flex-wrap: wrap;\n          justify-content: space-evenly;\n        }\n        .item h4 {\n          text-align: center;\n          max-width: 200px;\n        }\n        .image-wrapper {\n          max-height: 300px;\n          overflow: hidden;\n          box-shadow: rgba(0, 0, 0, 0.3) 0px 5px 12px;\n          border-radius: 1rem;\n          transition: transform 0.2s ease-in-out;\n        }\n        .image-wrapper:hover {\n          transform: scale(1.05) translateY(-10px);\n        }\n      `}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>flex로 간단하게 이미지 배치를 하였다. 사진에 hover event도 달아주었고, 결과는 아래와 같다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEC0lEQVQ4y43Tf0zUdRjA8Q+Zok5phjq03FSwaamkqZhLSDEVlz/JMBIxUoe1UFE8xAMuIXWgbv4ATkBB8DzRU/wB4cIWJIJkpKwFqaQOOO6nqAcn3+/B9W7cVa75T8/2/PPs+byeZ5/tEXJ7O5137iJbLNDthA4Jm82G1WrlefzJ/4menh6EQ5LosnXQ1dmJ1CUhPevCbn+G3W5HlmWcPU436XQiSRKyJCO5Uvo3e/u6u7txOByIjg47j9qfYDJZMRhMtLWZaNMbaW010tzSRu3NW1RU3+TnW7/SqjfS0mpArze4+vR6o+uNxfIIm60TWXYgeqcZjWbuP2jmwUO9q7EXf2q1YrOYqNQVkRu7kbL8Yzw26XlsMmK0tLtwo8HsAk1mK12SjNPpRPx4rZaQJVEcySggv/Ayu9Nz2bhpJ421tUglGcjqT3HmRiLnRPKk+ABNt+pYsjScecFLWPVROGFhEbzhH0TxpTLX14iKyp9Qfn2YopR0ijbFck6r5fMN8fxSXQ0ZEVhjAjCkfYYhZhbdR9Zw/+4dFk/2Z9mbEwidE8Sq0FCEx1Cysk+4wdq6Bg5sT0YXvZ69783hh7QtaPd/Q1VpKQ/DA2mMXkn9pSIav1hJU2gAdVevkBw4DYW/H2+N82fc+OkIzxGc1J51g5UVN1DHrePqoVSi564gfOoUdHsUqHftJrKPQBMSgG75bI7Nm8JqIchMSEC5YDbLx46i76DRDB46HuHhzclTZ9zgd+XXyFZ+xaEVwaSv+oSYpYs5unUd6apUZngI0rz7kjHEA9VILyYIwf7EJGKXzWf1OxP4YOIkgoNC8PV9m/yC039vWFnNhrUbKd4dR13GduqzUlDv2MHeRBXzPASpPkNQr49C5T0IfyE4nKRkT0gQI4b5MvhVP4a9Pgnx8nByj590g9ev3yBsRRTq5F0UJMaiVSlJ+FJBsjKJ94UgddRw8j7+kHNrVhITspBDCQr2Bs9ijM9Y+g98jQFeoxHC6zl4ueRb/CcGMn/2MgKnL2DurEVMm7mQfUkqpgpBWL+XWCsEScGBhM+YQV6ykoTAmfiN9KVPPx8GeI1CiL7kHC90gxazGY3mNIWaIk5pz3CiQEPvELPJRE1VFd+XXeHK5RJKdTqqyssxGwzcrqlBpysmOycPjfYs54tLaGszusF/Dttmt/OwpQVHT88LR9/R+ZQuWXqh7nD8t+a6lObfG8hSbCEzIY4sxWYOKLZyNCWRxsYmkjLL2JldzcXS37jX0EJT0wPu/dFMasou4uO2ER+rQBkfz5bNm6ivv+3esOGCBlV/QeoYDwI8BRH9BeGvCI7l5CHeDWNo2DbSU/ZRevE8kQcvcLCgBO+B/fASgkXTvJg8whMhBNnqLBf4F76pkZ6OteiSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"next-image\" title=\"next-image\" src=\"/static/6f6f9b67d37b35c498d924f3fc67fbfc/37523/next-image.png\" srcset=\"/static/6f6f9b67d37b35c498d924f3fc67fbfc/e9ff0/next-image.png 180w,\n/static/6f6f9b67d37b35c498d924f3fc67fbfc/f21e7/next-image.png 360w,\n/static/6f6f9b67d37b35c498d924f3fc67fbfc/37523/next-image.png 720w,\n/static/6f6f9b67d37b35c498d924f3fc67fbfc/302a4/next-image.png 1080w,\n/static/6f6f9b67d37b35c498d924f3fc67fbfc/07a9c/next-image.png 1440w,\n/static/6f6f9b67d37b35c498d924f3fc67fbfc/aa440/next-image.png 1500w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<h2 id=\"-이미지-태그\" style=\"position:relative;\"><a href=\"#-%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%83%9C%EA%B7%B8\" aria-label=\" 이미지 태그 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>+ 이미지 태그</h2>\n<p>그냥 img를 사용하면 Next.js에서 제공하는 <code class=\"language-text\">next/Image</code>가 권장된다는 경고 문구가 나온다. 이는 두가지 케이스로 나뉜다.</p>\n<ol>\n<li>\n<p>로컬 이미지 : public 폴더에다가 넣고 import해주면 된다.</p>\n</li>\n<li>\n<p>url등으로 경로가 설정된 외부 이미지</p>\n<p><code class=\"language-text\">next.config.js</code>를 건드려줘야 하는데 공식문서에 나온대로만 해놓자. 나는 도메인을 이렇게 적어주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//next.config.js</span>\n<span class=\"token keyword\">const</span> nextConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  reactStrictMode<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  images<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    domains<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"image.tmdb.org\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> nextConfig<span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n<p>그럼 이미지 태그를 html이 아닌 자체 컴포넌트로 사용하는 이유가 무엇일까? Next.js는 사용자의 경험을 매우 중요하게 생각하는데, 이미지의 원본이 다운로드 될 필요가 없다고 판단한다. 이미지는 보면 Chrome의 Network 탭에서 보면 한번에 다운로드되지 않으며, 해당 이미지가 보여질 위치일때(스크롤 위치에 따라) 사전에 정의한 사이즈만큼만 다운로드 되어진다. 이는 로딩시간과 부하를 줄여주는데 큰 도움이 될 것이다.</p>\n<h2 id=\"문제점\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제점</h2>\n<p>우리는 Next.js에서 초기의 모습을 html로 만들어서 브라우저로 번들링된 js파일들과 함께 보내온다고 저번에 공부했다. 하지만 useEffect를 사용하면, 브라우저 단에서 외부 서버의 데이터를 fetch해오므로, view page source code를 했을 때, 영화 정보가 나오지 않는 것을 확인할 수 있다. 이 경우, 영화 정보를 보여주는 사이트인데, 이러한 내용이 검색 엔진에 포함되지 않을 확률이 생기게 된다. 이를 서버사이드에서 해주기 위해 우리는 <code class=\"language-text\">getServersideProps</code>함수를 이용할 필요가 있다.</p>\n<h1 id=\"서버-사이드-렌더링--getserversideprops\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%A0%8C%EB%8D%94%EB%A7%81--getserversideprops\" aria-label=\"서버 사이드 렌더링  getserversideprops permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버 사이드 렌더링 : getServersideProps</h1>\n<p>서버에서는 초기상태를 빌드하여 브라우저로 보내주는데, 동적 페이지의 경우 다른 서버에서 받아온 정보 또한 초기상태에 포함되어야 하는지 여부에 따라 다양해질 것 같다. 예를 들어 수집될 필요가 없는 외부 정보라면 굳이 서버에 부하를 주지 않고, 브라우저에서 동작하도록 하게 하면 되고, 사이트에 중요한 정보라면 서버단에서 렌더링할 필요가 있다. 이것은 서버사이드렌더링이 일어나길 원하는 페이지에서 <code class=\"language-text\">getServersideProps</code>함수를 오버라이딩해줌으로써 가능하다.</p>\n<p>또한, 컴포넌트는 props로 함수에서 리턴하는 것을 가져올 수 있다. 코드는 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//index.js에 추가</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Home</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> results <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getServerSideProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//request time에 서버에서 처리하여 default export되는 componenet에게 넘길 내용을 정의한다</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.themoviedb.org/3/movie/popular?api_key=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">API_KEY</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> results <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> results <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 하면 보이는 결과는 똑같지만, view page sources를 해줬을 때 img의 정보가 들어가 있는 것을 확인할 수 있다! 서버에서 요청될때 렌더링하여 브라우저로 보내주기 때문에 그렇다! 그렇다고 해서 모든 내용이 서버에서 렌더링된다면 이는 서버에 부하를 일으킬 것이므로, <strong>적당한 타협이 필요</strong>하다. SSR 방식은 request time에 서버가 페이지를 렌더링하여 응답을 하는 것이다. 만약 정적 사이트의 경우에는 사전에 pre-rendered 되어있고, 모든 유저에게 똑같은 정보를 보내주면 된다. 이는 SSR과 또 다른 의미(static generation)이며, 다음에 자세히 알아보도록 하자.</p>\n<h1 id=\"로컬호스트를-오픈하여-테스트해보기-localtunnel-이용\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EC%BB%AC%ED%98%B8%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%98%A4%ED%94%88%ED%95%98%EC%97%AC-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%B4%EB%B3%B4%EA%B8%B0-localtunnel-%EC%9D%B4%EC%9A%A9\" aria-label=\"로컬호스트를 오픈하여 테스트해보기 localtunnel 이용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>+로컬호스트를 오픈하여 테스트해보기 (localtunnel 이용)</h1>\n<p>production은 아니지만, 개발 단계에서 간단하게 외부 환경에서 테스트해볼 수 있는 오픈소스가 있다. 좀 느려도 해볼만 하다고 생각한다. 해당 포트에 서버 프로그램이 실행중이라면, 그 포트를 외부에서 접근가능하게 하는데 보안 등 어려운 설정들이 많이 필요한데, <code class=\"language-text\">localtunnel</code>은 정말 간단하게 이를 허용해줄 수 있다. <a href=\"https://localtunnel.github.io/www/\">공식 사이트</a>를 보면 아주 간단하게 로컬 서버를 외부에 공개할 수 있다. 우선, 글로벌로 <code class=\"language-text\">localtunnel</code>패키지를 설치하고, 해당 로컬 서버의 포트를 열어주면 url이 나오게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g localtunnel\n$ lt --port <span class=\"token number\">3000</span>\nyour url is: https://perfect-seahorse-12.loca.lt\t</code></pre></div>\n<p>이러한 식으로 url이 나오고, 3000번 포트에 서버가 실행되고 있다면, 어디서나 정상적인 접근이 가능할 것이다. (초기 화면이 있는데, 7일마다 버튼만 눌러주면 안나오는 것 같다)</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 216.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAIAAAD3xz8iAAAACXBIWXMAACE4AAAhOAFFljFgAAAHTklEQVRIx6WVaVBTWRbH822mamqqP0zVVFuNloiiUabFHpAelqke9iXs2QgEDEI2EsK+iOwi2wCC7DDdoDarIMqO0pOG0bSKEbtrhG5cii3Jy0J2krckbyphGrutMN1Vcz7cuu/W+d1z77nnnT/GbDYjCGIymcxmM/orzGy1vTlGr9cvLy8LhcK1tbVfJEEQFAqFKysrAoHAYDBgLJFhGIYgBEHM1vjvmclq+3MIgvZHDPp/mAVWPhMqnzzRvXqlWn4B63SW5R0tqtCgIAzB8ObmJgAAEATZhrUrK/o3b0CZTPv9D4jBYFlW6lCZCjVCEAJvbGysr6+DIGgbtpFSFDVZRzP6v54AYzCAGrVGoVBKpTJADEjEgEgMSKVyhVwpBeRSqQKQyCRiQCwGJBIpAMikUvnOjlKr1RkMRszurkGl0shkCrEY2N6WbG2JxGLg5ctVgeDx6ura6soPa2uv19c3t7fFW1sikUgiFkvl8h21Wru7a8QYjaBeb9BodEqlJb5EIlWrdXz+QllZeXZ2bnNLa2FR8cOHArVaBwAyhUKpUmk0Gp1ebzAaIQwEwUYjZDCAOt2uwfAuKyaTaXd312xCdFrNfqr33YxGCIJgDIIgVh5EEPP2tqSpufva9e6mlp6/N7R3dA+1fz42cId/995MT89AR1efWCKFYdMeCcMIxmQyI4gJBC179w9NfPDHs1hnf0JsVk5OTf21m+VXP2dkXKfQsunJ3BOnvYZuT1iLFNr7GzB7dQfDMIqig8OTgWFMJqdsbGjy7XPh66/mBeOTc3ene78YKCys/Ftg4sjYLIqiEAzvUZj9G6IoentkuqS0beHBw77eG4OpOdUfOXVcSJwbHZweHW9uvuHjTZiYmN13flckJpOlGL5eWCosa2utrP9HcXG2u3fRJ75f0MiD5ZzeqoIHY6PUCMrUvakD4Qfz37C4ZQMpeePsRH5FfoXd6VsJsf1pSXe4EZuTzaVJieN3xm3Clu+ZmfmLlJRWJlW02Pn93P0S3wi6m0+e22dTHJJ0tLQlK3VifPZAeHpyjkthLLWzhVO9JQRac1w8MzLm6KGzzvanr5H9Kji8ufsLB8J3783yLqZtjRV0MKKo5z3aEqhVdM65P3tjDx0ZYAfVstlTU3M2YARBUBS9+eVQRHD8o57SrsTgYuzJzoiAG0x6O5dXRyWvdafzQkOHBm7vO78P9/T2USmsmy1dY00lg5zYCWbIeHbCN52Vc50N08WcEFf34eExG/DeSSYm5pJpHGJ0bC6bM9txdXWs69VUq6At82lpEb+6Oi2JNzV538axzdanevL4aSiOnEChd1SUD1cW/rPx8lfXcmZqMvm1JfUpHEJw9PTkzIEJm52eC8HFs2g5jUWVzUUluaTYnMiIjqKCL1va8rl5nq4+I8N3bN7ZAg8P3XZzD0qIZkV5hlP8ScQAejzuwgUcJcaHHOJHtT/q3N8/dGDCbt3q+81vP3A6F+DsGuT0sacj9tOzZ72cnf96wtHlBNbzd78/PDQ0agPeUxCRSFxTU1vf0NrS3ltT21RV01hd21TX0Fpf31xff72xqRUApPvONronBEFisQgAxEajYWdHAYJGhUIul8nkctkvt16VUsnn8wUCwXOhcGRk5Gs+f+np0rcvXiwuLqrV6l/Vty1KoNe92VhfXVuDrH3iQLn5qXyCKjli1MvEkpVHj98+/+7NE+G/+f+Si0QQqDeo5e/JMOYnIoHu7kjV88Og5LX8+cJSQdx3RXHCjPDHuRTlq2XV62dbYx16tfJn8DstRVENsK1bfqSd7jLWh5uv+aHdkWg/zdQSaGzC78z0yATzKkBk/lHf3/Uw1Hoe7eZbTR1Ln++6m39G00jRdTL1rQx1U4I+w1Gb67rTV6NVKn4WGbSa0WAwIgjw8lvFRJuq1E8R8Yfl1KgNustm8rln7FBR9IeyYl/l4rBMJDJanUEQhGEYk56enpmZmZ+XV5CTdZnLrmAlNuB96nxdymOjS8m40pjwK5SoOj+XemJABevi5VT2pZzsgvxLWVlZKSkpGDqdzuPxqiur8jPSy9O4rZncbh6rk8doT2e2FeQ256S18+idnORODr0xlXUlIy2Ty716pSKNlxYWFoah0WgMBj0rMzOVQU+Lp+aSogvCAkoig0pJ4aUx4SXksGJ8aGGY/6VQ/2x8eFo8lcugZ2VkMBlJBAIBg8fjo4mxUZFRESHBQe5/CTxzKszRnow9lnDGIcHNLf78eeqZY/iTR4NPO/m7eAV7eESGBEXhKVGxbCKJjCGRycS4JCKeEInDBXq4+/7JKdjRgXjKgYY9lujhQ3P3pmKPRZy09/34U2/P8EBPr0hcMCHmAiExm0iOw5BIJCKRQMDjI3G4AHf3z7BY7yN2uMOHSPZ2MQ5HyA6Ho+zt/O0+9LL7yAt7yt/DIzI0lIDHk4gEEom0B5N+jOzpdfx4coB/NZNeTU+qYTNqWIyq5KQrTHqCr4+7w/EAT8//whaK+B+xRHLnkXiOEgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"localtunnel\" title=\"localtunnel\" src=\"/static/8da232f4abf5388c128e43a4b48838b5/37523/localtunnel.png\" srcset=\"/static/8da232f4abf5388c128e43a4b48838b5/e9ff0/localtunnel.png 180w,\n/static/8da232f4abf5388c128e43a4b48838b5/f21e7/localtunnel.png 360w,\n/static/8da232f4abf5388c128e43a4b48838b5/37523/localtunnel.png 720w,\n/static/8da232f4abf5388c128e43a4b48838b5/302a4/localtunnel.png 1080w,\n/static/8da232f4abf5388c128e43a4b48838b5/78797/localtunnel.png 1125w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>오늘까지 한 코드는 깃허브에 올려놓았다. 다음에는 static generation(SSG), api, production mode, next config에 나오는 주요 속성등을 공부해보도록 하자!</p>","frontmatter":{"date":"March 10, 2022","title":"(React) NextJS 입문해보기 - (2) data fetching, localtunnel 이용하여 공개하기","categories":"FE","author":"choieastsea","emoji":"😃"},"fields":{"slug":"/FE-NextJS-2/"}},"site":{"siteMetadata":{"siteUrl":"https://choieastsea.github.io","comments":{"utterances":{"repo":"choieastsea/choieastsea.github.io"}}}}},"pageContext":{"slug":"/FE-NextJS-1/","nextSlug":"/ADsP-3-(3)-2/","prevSlug":"/FE-NextJS-2/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}