{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/DRF_serializer/",
    "result": {"data":{"cur":{"id":"bb64831b-04c3-554c-a783-af377795429b","html":"<p>Django를 이용하여 서버를 구축하는 과정에 있어서, model을 설계하고 Serailizer를 이용하여 데이터를 CRUD하면서 헷갈리는 개념을 공부해보았다.</p>\n<p>우선, DRF는 설치되어 있어야한다. (가상 환경 만들고, drf project 생성하고, app 생성하고 실행하기)</p>\n<h2 id=\"drf-데이터-흐름\" style=\"position:relative;\"><a href=\"#drf-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%9D%90%EB%A6%84\" aria-label=\"drf 데이터 흐름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DRF 데이터 흐름</h2>\n<p><strong>DB ↔ QuerySet/Model ↔ OrderdDict(ReturnDict) ↔ JSON</strong></p>\n<p>우리가 사용할 데이터는 보통 DB에 테이블로서 존재하는데, 여기서는 하나의 테이블이 하나의 모델이 될 것이다.</p>\n<p>DB의 값을 바로 가져와 python 코드레벨에서 사용하는 것은 불가능하고, 위의 과정을 거쳐서 JSON으로 사용할 수 있게 된다. (역으로 JSON 데이터를 DB에 넣거나 수정할 때에도 마찬가지)</p>\n<p>DRF에서는 model에서 dictionary로 변환하는 과정을 <code class=\"language-text\">Serialize</code>(직렬화,,, 의역하여 객체화.?) 라고 정의하고, dictionary에서 model로 변환하는 과정을 <code class=\"language-text\">Deserialize</code>라고 정의한다.</p>\n<p>DRF에서는 이 두가지의 과정을 도와주는 <code class=\"language-text\">Serializer</code> 클래스와 <code class=\"language-text\">ModelSerializer</code> 클래스가 제공된다. 따라서, 이 두 클래스를 선택적으로 상속받아 구현하면 된다.! 두 클래스의 차이는 아래를 참고한다.</p>\n<h3 id=\"모델-만들어서-create-read-해보기개념\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C-create-read-%ED%95%B4%EB%B3%B4%EA%B8%B0%EA%B0%9C%EB%85%90\" aria-label=\"모델 만들어서 create read 해보기개념 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 만들어서 Create, Read 해보기(개념)</h3>\n<ol>\n<li>\n<p>DB 연결</p>\n<ol>\n<li>settings.py에 db의 정보를 적어준다. timezone 도 현재 위치에 맞게 수정해주는 것이 좋다.</li>\n<li>또한 installed app에다가 만든 app을 추가해준다. appconfig가 있다면 그걸 추가해주는 것으로 보인다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">TIME_ZONE <span class=\"token operator\">=</span> <span class=\"token string\">'Asia/Seoul'</span>\nUSE_TZ <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nDATABASES <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'default'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'ENGINE'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.db.backends.mysql'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'your db name'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'USER'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'your user(ex root)'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'PASSWORD'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'your pw'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'HOST'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'your db server(ex localhost / aws rds endpoint)'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'PORT'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'3306'</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nINSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'django.contrib.admin'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.auth'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.contenttypes'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.sessions'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.messages'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.staticfiles'</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">'rest_framework'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">#for rest request</span>\n    <span class=\"token string\">'test_app'</span>  <span class=\"token comment\"># your app</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p>모델 정의</p>\n<ol>\n<li>\n<p>models.py에 클래스로 생성</p>\n</li>\n<li>\n<p>이는 우리가 다루는 데이터의 단위이자 DB 테이블의 단위가 될 것임</p>\n</li>\n<li>\n<p>DB schema가 없는 상태에서, 모델을 먼저 정의하고 <code class=\"language-text\">migrate</code>해주면 DB에 테이블이 생성될 것이다! (sql이나 dbms의 코드를 이용하지 않고 테이블을 만들 수 있는 것임)</p>\n<p>DB를 직접 설계하지 않고, migration을 해주는 것의 장점은, 귀찮고 헷갈리는 SQL을 생략할 수 있다는 점과, 버전별로 스키마의 내용을 코드로 갖고 있을 수 있다는 장점이 있을 수 있다. <a href=\"https://tibetsandfox.tistory.com/24\">참고</a></p>\n</li>\n<li>\n<p>만약, DB가 이미 구축되어 있다면, <code class=\"language-text\">inspectdb</code> 커맨드를 이용하여 models.py를 역으로 만들어줄 수도 있다.(<a href=\"https://dev.to/idrisrampurawala/creating-django-models-of-an-existing-db-288m\">관련 링크1</a>, <a href=\"https://hyun-am-coding.tistory.com/entry/Django%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9B%B9-API-%EB%A7%8C%EB%93%A4%EA%B8%B0\">관련링크2</a>)</p>\n</li>\n</ol>\n</li>\n<li>\n<p>모델을 코드로 다루기 위한, 혹은 DB에 저장하기 위한 Serializer class 정의</p>\n<p>Serializer는 serialize와 deserialize의 두가지 역할을 수행하며, 추가적으로 save()메소드가 실행될 때, 내부적으로 create(), update()을 실행해준다. ModelSerizlizer는 create, update를 기본적으로 제공해주므로 더 간단하게는 구현해볼 수 있다(<a href=\"http://www.incodom.kr/Django/DRF-Serializer\">참고</a>)</p>\n<ol>\n<li>Serializer 클래스 상속하여 만들기(<a href=\"https://www.django-rest-framework.org/tutorial/1-serialization/#creating-a-serializer-class\">공식문서</a>)</li>\n<li>ModelSerializer 클래스 상속하여 만들기(<a href=\"https://www.django-rest-framework.org/tutorial/1-serialization/#using-modelserializers\">공식문서</a>)</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"모델-만들어서-create-read-해보기구현\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C-create-read-%ED%95%B4%EB%B3%B4%EA%B8%B0%EA%B5%AC%ED%98%84\" aria-label=\"모델 만들어서 create read 해보기구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 만들어서 Create, Read 해보기(구현)</h2>\n<p>우리는 간단하게 ModelSeirzlizer로 해봅시다!</p>\n<ol>\n<li>\n<p>models.py에 모델 정의</p>\n<p>간단한 회원을 만들어보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    user_name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n    user_id <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    user_pw <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    created <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateTimeField<span class=\"token punctuation\">(</span>auto_now_add<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>\n<p>db migrate</p>\n<p><code class=\"language-text\">python manage.py makemigrations ${app_name}</code></p>\n<p>해서 마이그레이션 파일을 생성해주고, 이를 db에 적용한다. (settings.py installed_apps에 해당 app_name 있어야함)</p>\n<p><code class=\"language-text\">python manage.py migrate ${app_name} ${migration_name}</code></p>\n<p>이러고 DB에 가보면 적용되어 있을 것이다!! 추가적으로, 마이그레이션 버전을 위한 것인지 <code class=\"language-text\">django_migrations</code> 테이블도 생성되어 있음을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB20lEQVQoz42S2W7bMBBF9Q+xY8uSI9tRJC4SRa3e0SCL06APQYH2/z/lFKSTuOlTHw4uMAMezGAYNE3DYrFgtVp9IU1TlKkxzcDQKrrWUGQZx74jkyW7/Z66rjkeDhwOR/q2pujvCdq2wdiKXAmkVgglyeWZmyQhjG9IFgmL5ZLlcokUAiElShfkQjCfx0RRRBTNCGcRwdPpmW4zsMpSbkVGKnNSkXOnBNE8ZjSeIJXy01RVhduo61qfWmukkyvl0UoR/Pz1m6eXE8N2w2a/o6wtpa18RnHMaDRiOp1+IQxDz9f6hMlkSvDj7Y3n7y/cPz54qRMZR1MTz2PGozHX19eMx+P/wgu3xz3dZk1hK27z7H1lSTibcXV15ad0XB6OPJf6pRc8v77Sb9ZUbYMsNZkSZEp67rKMJElIFu4gK6IoJornxP/g6mHojhITNEOP0Io7KTwfQjelrWv/JQ77NV0/YJuevuuw1voDGWM8rnc6PfLwbUuQiuxdIsi19OnWPcslZV3RDB3Dbku/3dKuB4bdxpNp6X9FrhWFNchCEjjJhb/WlQJRapQtUbVBN4aiqXzq2mD6mswoUi08tyr3GXxMlSv5OeGn0GgvO1N6nEzakrKzPnOjyI3+5A/yd0MmM3DZLQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/18a8b21f0c4713e982f6a23d02752748/37523/img1.png\"\n        srcset=\"/static/18a8b21f0c4713e982f6a23d02752748/e9ff0/img1.png 180w,\n/static/18a8b21f0c4713e982f6a23d02752748/f21e7/img1.png 360w,\n/static/18a8b21f0c4713e982f6a23d02752748/37523/img1.png 720w,\n/static/18a8b21f0c4713e982f6a23d02752748/302a4/img1.png 1080w,\n/static/18a8b21f0c4713e982f6a23d02752748/07a9c/img1.png 1440w,\n/static/18a8b21f0c4713e982f6a23d02752748/ddc6c/img1.png 1534w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>mysql에서 잘 적용되어 있음을 확인하였다. 테이블 이름은 <code class=\"language-text\">${app_name}_${model_name}</code>으로 생성해주더라.</p>\n</li>\n<li>\n<p>DB에 값 추가 (Serializer 이용)</p>\n<p>아주 간단하게 Serializer도 만들어준다. (UserSerializer.py)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">UserSerializer</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        model <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>User\n        fields <span class=\"token operator\">=</span> <span class=\"token string\">'__all__'</span></code></pre></div>\n<p>그리고, 해당 app의 views.py에서 새로운 사용자를 만드는 로직을 만들어주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@api_view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">create_user</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'data :</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    serializer <span class=\"token operator\">=</span> UserSerializer<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>serializer<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        serializer<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>serializer<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>serializer<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">,</span> status <span class=\"token operator\">=</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>여기서 사용하는 serializer는 deserialize를 해주는 것이라고 보면 된다.(파라미터만 잘 넣으면 알아서 db로 넣도록 데이터를 만들어준다)</p>\n<p>이러고 JSON데이터를 post로 보내주면 생성된다. (내가 근데 설정을 잘못한 건지, 한글 필드를 적었다가 에러가 계속 나더라)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVQoz31SuXLCMBTUd+eALk2+IwFmUmUmXQpylanCVeUCGuw4EdZhXd6MhG2EB3gzOyu997zaZ4kURQEPSimSJEGapsiyDJxzWGuPQmsDwGI4+cXF7QKXd0sQX3DOQUoZRGshnyvLsuE2fARho5ExjY+VxPtKgnDOGgGPulFrHdgfUOfraEQDN9nglqzpH4QQwV2e5804tYh3Ln5SiCyDohRWqR3RGq4SJ4xtHCqlYIxpmutRvaBmDDrPYaREWR1Ubq3tHEDQirjRr1XlKB6sLbYjuK8YN2mlcKinfUk+iHEO2hooaxqO12v/fzlHzllAQgUyukYuOKRWKLQO7PdMCBAos5njoM0WXIUyqrtwwYHJ2es9OpMndKfP6FToBry0eD/Ox484eRvidPQQ1uRmMcMgYFrxDP35BNdfI/S+J7j6HKEf1QbLWdj351v4fC98M45u2Vu25QbxO9YWKAxgqpoyOBb/EdiUaBioOx0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/bd52257ccdff86ecf313a7a2583ce84f/37523/img2.png\"\n        srcset=\"/static/bd52257ccdff86ecf313a7a2583ce84f/e9ff0/img2.png 180w,\n/static/bd52257ccdff86ecf313a7a2583ce84f/f21e7/img2.png 360w,\n/static/bd52257ccdff86ecf313a7a2583ce84f/37523/img2.png 720w,\n/static/bd52257ccdff86ecf313a7a2583ce84f/302a4/img2.png 1080w,\n/static/bd52257ccdff86ecf313a7a2583ce84f/07a9c/img2.png 1440w,\n/static/bd52257ccdff86ecf313a7a2583ce84f/7f2ab/img2.png 2236w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>(id는 auto increment라서 없어도 됨)</p>\n<p>이제 getter를 만들어보자.! 여기서 serialize를 해주고, json으로 변환하여 리턴해주면 된다. 위에서 말했다시피, serialize는 model까지만 바꿔주므로, 이를 json으로 다시 바꿔주기 위해서는 JSONRenderer를 이용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@api_view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_all_user</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    users <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span>\n    serialized_users <span class=\"token operator\">=</span> UserSerializer<span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">,</span> many<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    json_data <span class=\"token operator\">=</span> JSONRenderer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span>serialized_users<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>json_data<span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjUlEQVQoz3VS207cMBD1z7LlqR/DT/DcJ6AP/QIKVEJcurRSJVYsu8QO8TW+nWomyXYD1NLRSTwzZ2zPEUoplFJQa51xzpn5f6jEtQIEZPCqGcIYgxgjrLVo2xbUQGuNlNKswUdALWiNx/G3Gxx9ucbyyUFMp/Heo+s6UIPpdMTTNwnXOhfkg/iAn48SV79f0NoE0WmNUofilDPoAvQfU0IuBc573s8lI1ETEqfbjXi7RDAWJfRIziP7AOQyQwoR0TpGb8OHOYw0sPix+oP7dotfWuGhk1h2zQwPWr7DfvxObXArn5mXrw3E5/NTHF6e4dOEq6/Mi4tTLC7PcPD95F9sP2fEYsyd8oT1nsdfxvchxBTRx8hv50MY4jyUOrz3NLCSdzUhBN4TgR49RigpoZSElJInPi2yEFnpZbtlkBMoTvvOWjjnmP2oI8h/PvRoXjWMC3sWGWbYNA2eNxus12usVitIJdH3PQyJec9CBBImGwkqIENrY3Y22AnWCtdHxJjY6FQwGf4tqAld+S8xEESm9vd8GQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/fa702658365502ddae6c50bd2239ea15/37523/img3.png\"\n        srcset=\"/static/fa702658365502ddae6c50bd2239ea15/e9ff0/img3.png 180w,\n/static/fa702658365502ddae6c50bd2239ea15/f21e7/img3.png 360w,\n/static/fa702658365502ddae6c50bd2239ea15/37523/img3.png 720w,\n/static/fa702658365502ddae6c50bd2239ea15/302a4/img3.png 1080w,\n/static/fa702658365502ddae6c50bd2239ea15/07a9c/img3.png 1440w,\n/static/fa702658365502ddae6c50bd2239ea15/3d68f/img3.png 2282w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ol>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>핵심은 DB의 데이터를 조작하기 위해 Serializer를 거쳐야 한다는 것이다. db에 넣기 위해 deserailize, db에서 값을 가져오기 위해 serailize를 수행하고, 이를 위한 Serailizer 객체를 구현하여 사용하면 된다.</p>\n<p>아직은 간단하게 구현해보았지만, 조건을 부여하여 orm으로 가져오는 QuerySet과 view를 간단하게 처리하기 위한 ViewSet 등의 개념도 배워봐야할 것 같다… 어렵네요.! +django admin도 해봐야한다..!</p>","excerpt":"Django를 이용하여 서버를 구축하는 과정에 있어서, model을 설계하고 Serailizer를 이용하여 데이터를 CRUD하면서 헷갈리는 개념을 공부해보았다. 우선, DRF는 설치되어 있어야한다. (가상 환경 만들고, drf project 생성하고, app 생성하고 실행하기) DRF 데이터 흐름 DB ↔ QuerySet/Model ↔ OrderdDict(ReturnDict) ↔ JSON 우리가 사용할 데이터는 보통 DB에 테이블로서 존재하는데, 여기서는 하나의 테이블이 하나의 모델이 될 것이다. DB의 값을 바로 가져와 python 코드레벨에서 사용하는 것은 불가능하고, 위의 과정을 거쳐서 JSON으로 사용할 수 있게 된다. (역으로 JSON 데이터를 DB에 넣거나 수정할 때에도 마찬가지) DRF에서는 model에서 dictionary로 변환하는 과정을 (직렬화,,, 의역하여 객체화.?) 라고 정의하고, dictionary에서 model로 변환하는 과정을 라고 정의한다. DRF에…","frontmatter":{"date":"January 03, 2023","title":"(DRF) Django Rest Framework, Serialize 개념 이해하기","categories":"WEB","author":"choieastsea","emoji":"😬"},"fields":{"slug":"/DRF_serializer/"}},"next":{"id":"709cb75a-570a-5de4-8075-19486a37c740","html":"<h2 id=\"프론트엔드-서버-개발\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EC%84%9C%EB%B2%84-%EA%B0%9C%EB%B0%9C\" aria-label=\"프론트엔드 서버 개발 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프론트엔드 서버 개발</h2>\n<p>저번 시간에 정한 구조를 기반으로 간단한 웹사이트를 개발하고 배포해보도록 하자.! 오늘은 그중에 프론트엔드 서버부터 만들어보자.</p>\n<p>한 문장으로 정리하면 프론트엔드 서버는 <code class=\"language-text\">nginx</code>웹 서버가 url 요청에 대하여 build된 react file의 결과물(html, css, js)를 리턴하도록만 하면 된다. 웹서버의 프록시는 사용하지 않을 할 예정이다.</p>","frontmatter":{"date":"January 01, 2023","title":"(배포) 웹서비스 배포하기 (2) 프론트 서버 개발","categories":"WEB","author":"choieastsea","emoji":"🚀"},"fields":{"slug":"/deploy-2-front-server/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://choieastsea.github.io","comments":{"utterances":{"repo":"choieastsea/choieastsea.github.io"}}}}},"pageContext":{"slug":"/DRF_serializer/","nextSlug":"/deploy-2-front-server/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}