{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/mac-setup-openmp/",
    "result": {"data":{"cur":{"id":"07f2f54e-ace1-532a-a1df-277dcd13e4d5","html":"<p>병렬프로그래밍 수업을 위해 <code class=\"language-text\">openmp</code>를 mac os에 설치해야하는데, 헷갈려서 정리해놓는다. clang이 아닌 gcc로 실습환경을 구성하려고 한다.(mac의 gcc도 clang 계열이지만, 여기서는 몇가지 이유로 gcc로 진행한다) <code class=\"language-text\">brew</code>로 설치하였고, 이것은 필수이다.!</p>\n<ol>\n<li>\n<p>gcc 설치 및 버전 확인</p>\n<p>나는 c++로 진행하였기에 gcc가 아닌 g++로 진행하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> gcc\nbrew info gcc</code></pre></div>\n<p>brew info 명령어로 gcc 컴파일러의 버전정보를 얻을 수 있다.</p>\n</li>\n<li>\n<p>openmp 실행 방법</p>\n<p>우선, 소스코드에 <code class=\"language-text\">#pragma omp parallel</code>이 main 함수 안에 선언되어 있어야 한다. 나는 다음과 같이 적어주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">omp parallel</span></span>\nstd<span class=\"token double-colon punctuation\">::</span>cout<span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Hello World!\\n\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 컴파일 할 때, <code class=\"language-text\">-fopenmp</code> 옵션을 주면 되는데, 여기서 버전정보를 알 필요가 있다. 버전에 맞게 다음과 같이 컴파일해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">g++-12 test.cpp -fopenmp -o <span class=\"token builtin class-name\">test</span></code></pre></div>\n</li>\n<li>\n<p>최종 확인</p>\n<p>실행~</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./test \nHello World<span class=\"token operator\">!</span>\nHello World<span class=\"token operator\">!</span>\nHello World<span class=\"token operator\">!</span>\nHello World<span class=\"token operator\">!</span>\nHello World<span class=\"token operator\">!</span>\nHello World<span class=\"token operator\">!</span>\nHello World<span class=\"token operator\">!</span>\nHello World<span class=\"token operator\">!</span></code></pre></div>\n<p>실행환경의 Thread 수만큼 Hello World가 찍혀서 나오는 것을 볼 수 있다. 이러면 openmp환경이 세팅되었다고 보면 될 것 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.555555555555557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAUUlEQVQI142MuwlAIQxF3X+izGARCGiZRiEYzQ5XzALvFYf7KU5prUFE0HsHM+PttRYiAmMMqCrOOdh7Z35Raq0gohTNOVPi7il4YjPL/r4/XPqJkm5DL+vIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"m1pro.png\"\n        title=\"m1pro.png\"\n        src=\"/static/b52651c7be9601f7a99907337128a5ad/37523/m1pro.png\"\n        srcset=\"/static/b52651c7be9601f7a99907337128a5ad/e9ff0/m1pro.png 180w,\n/static/b52651c7be9601f7a99907337128a5ad/f21e7/m1pro.png 360w,\n/static/b52651c7be9601f7a99907337128a5ad/37523/m1pro.png 720w,\n/static/b52651c7be9601f7a99907337128a5ad/b12f7/m1pro.png 1020w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>나의 경우, m1 pro칩이 들어간 mac book pro를 사용중인데, 8코어 8쓰레드인 걸 지금 알았다… ㅎ</p>\n</li>\n</ol>","excerpt":"병렬프로그래밍 수업을 위해 를 mac os에 설치해야하는데, 헷갈려서 정리해놓는다. clang이 아닌 gcc로 실습환경을 구성하려고 한다.(mac의 gcc도 clang 계열이지만, 여기서는 몇가지 이유로 gcc로 진행한다) 로 설치하였고, 이것은 필수이다.! gcc 설치 및 버전 확인 나는 c++로 진행하였기에 gcc가 아닌 g++로 진행하였다. brew info 명령어로 gcc 컴파일러의 버전정보를 얻을 수 있다. openmp 실행 방법 우선, 소스코드에 이 main 함수 안에 선언되어 있어야 한다. 나는 다음과 같이 적어주었다. 그리고 컴파일 할 때,  옵션을 주면 되는데, 여기서 버전정보를 알 필요가 있다. 버전에 맞게 다음과 같이 컴파일해준다. 최종 확인 실행~ 실행환경의 Thread 수만큼 Hello World가 찍혀서 나오는 것을 볼 수 있다. 이러면 openmp환경이 세팅되었다고 보면 될 것 같다.  나의 경우, m1 pro칩이 들어간 mac book pro를 사용중인…","frontmatter":{"date":"September 05, 2022","title":"m1 mac에서 병렬프로그래밍을 위해 openmp 설치하기","categories":"블로그","author":"choieastsea","emoji":"😉"},"fields":{"slug":"/mac-setup-openmp/"}},"next":{"id":"5b0b9dd5-ebb1-5e97-afe5-96b81e72e2d6","html":"<p>배열은 저번에 공부했듯이 고정된 크기의 연속된 주소에 저장된 자료구조이다. 배열도 저장하는 방법(위치, 정렬)에 따라 크게 4가지로 나눌 수 있다.</p>\n<h1 id=\"배열의-종류\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4%EC%9D%98-%EC%A2%85%EB%A5%98\" aria-label=\"배열의 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열의 종류</h1>\n<ul>\n<li>\n<p>데이터가 몰려있냐에 따라</p>\n<ul>\n<li>\n<p>packed</p>\n<p>배열안의 데이터(의미있는)가 한쪽에 몰려있는 경우이다.</p>\n</li>\n<li>\n<p>unpacked</p>\n<p>배열안의 데이터가 산발적으로 존재하는 경우이다. 빈 공간에는 의미없는 값이나, 특정 값(예를 들어 의미없음을 뜻하는 -1 등)이 들어가 있을 수 있다.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>데이터가 정렬되어있냐에 따라</p>\n<ul>\n<li>\n<p>sorted</p>\n<p>배열안의 데이터가 정렬되어(숫자면 값이 크거나 작은 순서대로) 있다.</p>\n</li>\n<li>\n<p>unsorted</p>\n<p>배열안의 데이터가 정렬되어 있지 않다. (데이터의 크고 작음이 순서에 영향을 미치지 않는다)</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>두 기준으로 보았을 때 4가지 조합이 존재하는데, 배열에서 가장 중요한 연산인 <code class=\"language-text\">Search</code>, <code class=\"language-text\">Insert</code>, <code class=\"language-text\">Delete</code>를 직접 구현해보면서 각 배열의 특징에 대하여 알아보도록 하자! (단, insert 또는 delete 시 배열 전체의 크기 변화는 없다고 가정) <u>search는 해당 값을 찾는 연산, insert는 해당 값이 없다면 추가하는 연산, delete는 해당 값이 있다면 삭제하는 연산으로, insert와 delete는 항상 search가 선행되어야 할 것</u>이다.</p>\n<h1 id=\"1-packed--unsorted\" style=\"position:relative;\"><a href=\"#1-packed--unsorted\" aria-label=\"1 packed  unsorted permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. packed &#x26; unsorted</h1>\n<p>가장 기본적인 형태의 배열이다. 배열의 데이터의 크기가 S라고 했을 때, 데이터는 아래와 같이 저장될 것이다. 1행은 인덱스를 의미하고, 2행은 데이터를 의미하며 S는 4이다.</p>\n<table>\n<thead>\n<tr>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n<th>6</th>\n<th>7</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>5</td>\n<td>3</td>\n<td>7</td>\n<td>6</td>\n<td>x</td>\n<td>x</td>\n<td>x</td>\n<td>x</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p>Search</p>\n<p>정렬되어 있지 않으므로 차례대로 찾아야할 것이다. <code class=\"language-text\">O(n)</code>이 걸릴 것이다.</p>\n</li>\n<li>\n<p>Insert</p>\n<p>Search하고, insert를 하는데 단순히 끝에 데이터를 넣고 S를 1 증가시키면 될 것이다. 순수 insert 자체는 <code class=\"language-text\">O(1)</code>이 걸리지만, 총 <code class=\"language-text\">O(n)</code>이 걸린다.</p>\n</li>\n<li>\n<p>Delete</p>\n<p>만약 값을 찾고 그 값을 x로 지운 후, 뒤의 값들을 하나씩 미루는 방법을 사용한다면 그 자체로 <code class=\"language-text\">O(n)</code>이 걸릴 것이다. 하지만 unsorted array는 데이터에 위치에 대하여 특정한 제약이 없으므로, 단순히 맨 끝의 데이터와 지울 데이터의 위치를 바꾸고 S를 1 감소시켜주면 된다.</p>\n<p>예를 들어, 5를 delete하려고 하면, 0번 인덱스의 5와 마지막 인덱스의 6을 바꿔주고(혹은 6을 0번에만 대입해줘도 됨) s를 줄여주면 된다. delete(5)의 결과는 아래와 같다.</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n<th>6</th>\n<th>7</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>6</td>\n<td>3</td>\n<td>7</td>\n<td>6</td>\n<td>x</td>\n<td>x</td>\n<td>x</td>\n<td>x</td>\n</tr>\n</tbody>\n</table>\n<p>코드는 아래와 같을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> A<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> S<span class=\"token punctuation\">;</span> <span class=\"token comment\">// size of array</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// A에 x가 있는지 찾는다 없다면 -1 리턴</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> S<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> x<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// A에 x를 끝에 넣어준다</span>\n    A<span class=\"token punctuation\">[</span>S<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n    S<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dlte</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> loc<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 해당 위치의 데이터를 마지막 원소와 스왑하고 지운다</span>\n    <span class=\"token keyword\">int</span> tmp <span class=\"token operator\">=</span> A<span class=\"token punctuation\">[</span>loc<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    A<span class=\"token punctuation\">[</span>loc<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> A<span class=\"token punctuation\">[</span>S <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    A<span class=\"token punctuation\">[</span>S <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span>\n    S<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">char</span> c<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> quit <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>quit<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        cin <span class=\"token operator\">>></span> c<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'s'</span><span class=\"token operator\">:</span>\n            cin <span class=\"token operator\">>></span> x<span class=\"token punctuation\">;</span>\n            res <span class=\"token operator\">=</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d not founded\\n\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">else</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d founded in %d\\n\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'i'</span><span class=\"token operator\">:</span>\n            cin <span class=\"token operator\">>></span> x<span class=\"token punctuation\">;</span>\n            res <span class=\"token operator\">=</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'d'</span><span class=\"token operator\">:</span>\n            cin <span class=\"token operator\">>></span> x<span class=\"token punctuation\">;</span>\n            res <span class=\"token operator\">=</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">dlte</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'q'</span><span class=\"token operator\">:</span>\n            quit <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"S : %d\\n\"</span><span class=\"token punctuation\">,</span> S<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> S<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%3d   \"</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> S<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%3d   \"</span><span class=\"token punctuation\">,</span> A<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"2-packed--sorted\" style=\"position:relative;\"><a href=\"#2-packed--sorted\" aria-label=\"2 packed  sorted permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. packed &#x26; sorted</h1>\n<p>아래와 같은 형식으로 저장될 것이다. S(배열의 크기)는 4이다.</p>\n<table>\n<thead>\n<tr>\n<th>0</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n<th>5</th>\n<th>6</th>\n<th>7</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>3</td>\n<td>5</td>\n<td>6</td>\n<td>7</td>\n<td>x</td>\n<td>x</td>\n<td>x</td>\n<td>x</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p>Search</p>\n<p>Binary Search를 이용하면 <code class=\"language-text\">O(log n)</code>에 찾을 것이다. 빠르다!</p>\n</li>\n<li>\n<p>Insert</p>\n<p>데이터에 따라 삽입되는 위치가 정해질 것이다. 이는 이전과 다르게 중간에 삽입한다면 뒤의 데이터들을 하나씩 미뤄야 하므로 <code class=\"language-text\">O(n)</code>의 시간이 걸릴 것이다. insert의 경우에는 값이 없을때, 삽입하는 것이므로 어디에 삽입할지를 search단계에서 파악하는 것이 필요하다. 따라서, 전역변수를 두고 search가 실패했을 경우, insert해야하는 위치를 저장하도록 하면 될 것이다.</p>\n</li>\n<li>\n<p>Delete</p>\n<p>역시 삭제한 위치가 생기면 뒤의 데이터들을 하나씩 당겨야 하므로 <code class=\"language-text\">O(n)</code>의 시간이 걸릴 것이다.</p>\n</li>\n</ul>\n<p>코드는 아래와 같을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span>\n\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> A<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> S<span class=\"token punctuation\">;</span>   <span class=\"token comment\">// size of array</span>\n<span class=\"token keyword\">int</span> loc<span class=\"token punctuation\">;</span> <span class=\"token comment\">// insert할 위치</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> left<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> right<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Recursive Binary search</span>\n    <span class=\"token keyword\">int</span> mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>left <span class=\"token operator\">+</span> right<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>left <span class=\"token operator\">></span> right<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// loc 위치에서 insert할 예정</span>\n        loc <span class=\"token operator\">=</span> left<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">[</span>mid<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> x<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> mid<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">[</span>mid<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> x<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// left...mid ... x ...right</span>\n        <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// left ... x ... mid ... right</span>\n        <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">,</span> mid <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// loc 뒤의 원소들을 한칸씩 미룬다.</span>\n    S<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> S<span class=\"token punctuation\">;</span> i <span class=\"token operator\">></span> loc<span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        A<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> A<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// A에 x를 loc에 넣어준다</span>\n    A<span class=\"token punctuation\">[</span>loc<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">dlte</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> loc<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 해당 위치의 원소 뒤로 한칸씩 당긴다.</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> loc <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> S<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        A<span class=\"token punctuation\">[</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> A<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    S<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">char</span> c<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> quit <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>quit<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        cin <span class=\"token operator\">>></span> c<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'s'</span><span class=\"token operator\">:</span>\n            cin <span class=\"token operator\">>></span> x<span class=\"token punctuation\">;</span>\n            res <span class=\"token operator\">=</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> S <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d not founded\\n\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">else</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%d founded in %d\\n\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'i'</span><span class=\"token operator\">:</span>\n            cin <span class=\"token operator\">>></span> x<span class=\"token punctuation\">;</span>\n            res <span class=\"token operator\">=</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> S <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'d'</span><span class=\"token operator\">:</span>\n            cin <span class=\"token operator\">>></span> x<span class=\"token punctuation\">;</span>\n            res <span class=\"token operator\">=</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> S <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">dlte</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'q'</span><span class=\"token operator\">:</span>\n            quit <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"S : %d\\n\"</span><span class=\"token punctuation\">,</span> S<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> S<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%3d   \"</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> S<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%3d   \"</span><span class=\"token punctuation\">,</span> A<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"3-unpacked--unsorted\" style=\"position:relative;\"><a href=\"#3-unpacked--unsorted\" aria-label=\"3 unpacked  unsorted permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. unpacked &#x26; unsorted</h1>\n<p>unpacked에서는 효율적인 연산을 위하여 해당 위치에 데이터가 있는지 추가로 저장할 필요가 있다. 또한 추가적으로, insert와 delete에서 시간을 절약하기 위해 <code class=\"language-text\">free list</code>와 비슷한 개념을 사용하게 된다. 앞으로 데이터는 아래와 같은 형식으로 저장되거나 업데이트 될 것이다.</p>\n<ol>\n<li>\n<p>해당 위치에 데이터가 있는 경우 : 데이터에는 의미있는 값이 저장된다</p>\n</li>\n<li>\n<p>해당 위치에 데이터가 없는 경우 : 데이터에 다음 비어있는 공간의 인덱스가 저장된다!</p>\n<p>이렇게 저장해줌으로써, 빈 공간을 <code class=\"language-text\">Linked List</code>처럼 관리할 수 있게 된다. 최초의 빈 공간은 따로 변수로 관리한다.(head의 역할)</p>\n</li>\n</ol>\n<ul>\n<li>\n<p>Search</p>\n<p>정렬되어있지 않으므로 선형탐색을 해야한다. <code class=\"language-text\">O(n)</code>의 시간이 걸릴 것이고, 비교하면 packed보다는 (빈 공간 역시 탐색하므로) 더 오래 걸릴 것이다.</p>\n</li>\n<li>\n<p>Insert</p>\n<p>해당 데이터가 없다면 빈 공간(데이터가 없는 공간)에 삽입할 것이다. 빈 공간을 탐색하는 것은 <code class=\"language-text\">O(n)</code>만큼 걸리겠지만, 위의 free list 개념을 이용하면, 상수시간에 해결 가능하다.</p>\n</li>\n<li>\n<p>Delete</p>\n<p>해당 데이터가 있다면 해당 위치에 데이터가 없다고 표시해준다. 또한, 해당 위치의 데이터는 다음 비어 있는 공간의 인덱스로 저장하도록 한다. 역시 상수시간에 가능하다.</p>\n</li>\n</ul>\n<p>코드는 아래와 같다.</p>","frontmatter":{"date":"July 08, 2022","title":"(DS) 자료구조 정리 02- 다양한 종류의 배열 (packed~unpacked, sorted~unsorted)","categories":"Alg","author":"choieastsea","emoji":"😬"},"fields":{"slug":"/CDS01-array-2/"}},"prev":{"id":"b16b8c18-01f9-539f-9955-57e778d6453e","html":"<h2 id=\"목표\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"목표 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>목표</h2>\n<p>CRA를 이용한 <code class=\"language-text\">React.js</code> 프론트 개발, <code class=\"language-text\">node js</code>와 <code class=\"language-text\">MySQL</code>을 이용한 api 서버 개발 모두 할 줄 안다면, 이제 배포를 해볼 차례이다.! 배포까지 해보아야 웹 서비스가 어떤 식으로 구성되는지 알 수 있을 것 같아서 공부해보았고, 그 기록을 남기고자 한다.</p>\n<p>목표는 다음과 같다.</p>\n<ul>\n<li>클라우드 환경을 이용하여 웹서비스(풀스택) 배포하기</li>\n<li>docker 이용하여 배포 환경 구축하기</li>\n<li>(optional) 도메인 구입해서 쉽게 접속하기</li>\n</ul>\n<h2 id=\"web-service-architecture\" style=\"position:relative;\"><a href=\"#web-service-architecture\" aria-label=\"web service architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Service Architecture</h2>\n<p>출처: <a href=\"https://fractalideas.com/blog/making-react-and-django-play-well-together/\">https://fractalideas.com/blog/making-react-and-django-play-well-together/</a></p>\n<p><img src=\"/e435d0a4f61e0bf436d5f37b50c9a8b6/webapp-architectures.svg\" alt=\"asdf\"></p>\n<p>크게 4가지 방법이 있고, 각각에 대하여 이해해보자.</p>\n<ol>\n<li>\n<p>두개(front, api)의 서버를 두는 구조이다. client가 브라우저를 통하여 url(app.example.com)을 입력하면, front-server에서 이를 처리하여 html, css, js 파일을 리턴해준다. 그리고, 해당 사이트에서 클릭 등의 이벤트로 인하여 api가 호출이 될 때에는 다른 url(api.example.com)을 통하여 요청과 응답이 이루어지는 구조이다. 이는 front와 backend가 각각의 서버 프로그램으로 구분되어 있으므로, backend 서버에서는 프론트로부터 오는 cross origin request에 대한 CORS 허용이 되어 있어야 할 것이다.</p>\n<p>대부분의 SPA(리액트도 포함)가 이러한 구조를 이용한다고 한다. React js의 경우에는 front server에서 url요청에 따라 정적인 html, js, css를 (번들링된 상태로 주겠지만 아무튼)리턴할 것이다. 그리고, <code class=\"language-text\">react-router-dom</code>과 같은 라이브러리를 통하여 root를 공유하는 다른 url요청(예를 들어 app.example.com/rank)을 추가적인 프론트서버에 요청보내지 않고 처리할 수 있다.</p>\n</li>\n<li>\n<p>백엔드 서버에서 프론트엔드를 리턴하는 구조이다. 아마, node js에서 express 미들웨어로 hello world를 찍어보려고 할 때,</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span>res</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n\tres<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;h1>Hello World&lt;/h1>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>라던가, sendFile을 이용하여 정적인 html파일을 리턴하도록 한 경험이 있을 것이다. 이러한 방법이라고 보면 될 것 같다.</p>\n</li>\n<li>\n<p>브라우저의 요청에 대하여, 프론트 엔드 서버가 처음으로 받고, 해당하는 내용이 없다면 proxy등을 통하여 백엔드 서버로 넘겨줘 요청을 처리하도록 한다. CRA와 <code class=\"language-text\">npm start</code>를 통하여 개발서버를 연 이후, <code class=\"language-text\">package.json</code>에서 proxy를 api server주소로 설정하여, api 요청에 대하여 백엔드로 넘겨주는 방법을 사용할 수 있다. <a href=\"https://choieastsea.github.io/full-stack-in-js/\">나도 과거에 이러한 방법을</a> 이용한 적이 있으니 참고하면 될 것 같다.</p>\n</li>\n<li>\n<p>이 방법은 리버스 프록시를 이용하는 방법인데, 나도 해본 적은 없어 원문 링크를 참고하여 보면 될 것 같다.</p>\n</li>\n</ol>\n<h2 id=\"-cra를-이용한-리액트-웹서버-웹서버-이해하기\" style=\"position:relative;\"><a href=\"#-cra%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0\" aria-label=\" cra를 이용한 리액트 웹서버 웹서버 이해하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>+ CRA를 이용한 리액트 웹서버? 웹서버 이해하기</h2>\n<p>CRA(Create React App)을 이용하여 리액트 개발 공부를 한 나는, React는 분명 front-end library인데, 왜 npm start만 하면 <code class=\"language-text\">localhost:3000</code>과 같이 접속할 수 있지?? 라는 의문을 품었었다. 이는 CRA의 개발모드에서 지원해주는 로컬 웹서버 환경으로 디버깅 등을 편하게 해주기 위해 웹서버를 제공해주는 것이였다. 하지만, 이는 용량이 크고 필요 없는 코드가 존재하여 실제 배포되서 운영되기에는 무리가 있다. 따라서, 우리는 <code class=\"language-text\">npm run build</code>를 이용한다.! 빌드하여 컴팩트해진 정적 파일들을 웹서버(CRA dev server와 거의 같은 일을 하는) 에 올려놓으면 되는 것이다.</p>\n<p>결론은, 1번방법으로 리액트를 배포하려면 웹서버를 구축해놔야한다는 것이다. 이 웹서버는 app.example.com과 같은 url 요청에 대하여 <strong>빌드된 정적 파일들을 제공</strong>하면 되는 것이다.</p>\n<p>자 그러면, 웹서버는 뭐를 사용하면 될까? 우리는 <code class=\"language-text\">nginx</code> 를 이용해보도록 하자. node.js를 이용하여 웹서버의 역할을 구현해 볼 수도 있지만, 엔진엑스가 웹서버의 의미에 더 부합한다고 볼 수 있다. 또한 세팅(configuration)만 하고, nginx server를 켜 놓으면 완성되므로 매우 쉽다~ 이거에 관하여 <a href=\"youtube.com/watch?v=Zimhvf2B7Es\">매우 정리가 잘 되어있는 유튜브</a>를 보면 도움이 될 것이다.</p>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<ul>\n<li>\n<p>우리가 사용할 웹 서비스 아키텍쳐(이것이 뭐라고 통용되는지는 찾아볼 필요가 있음) : 프론트 엔드 서버 / api (백엔드)서버를 분리하여 사용할 예정</p>\n</li>\n<li>\n<p>프론트엔드 서버의 구조 : <code class=\"language-text\">nginx</code> + <code class=\"language-text\">builded react file</code></p>\n<p>모든 http(s) 요청에 대하여, 해당 url에 정적인 내용을 browser에게 리턴한다.</p>\n</li>\n<li>\n<p>백엔드 서버의 구조 : <code class=\"language-text\">nest js</code> (혹은 <code class=\"language-text\">django rest framework</code>) ~ <code class=\"language-text\">MySQL server</code>가 연결되어 있는 구조</p>\n<p>프론트엔드에서 불려지는 api 요청에 대하여, browser에게 응답한다. 필요하다면, db server를 사용할 수도 있다.</p>\n</li>\n</ul>","frontmatter":{"date":"December 30, 2022","title":"(배포) 웹서비스 배포하기 (1) 서비스 아키텍쳐","categories":"WEB","author":"choieastsea","emoji":"🚀"},"fields":{"slug":"/deploy-1-basic/"}},"site":{"siteMetadata":{"siteUrl":"https://choieastsea.github.io","comments":{"utterances":{"repo":"choieastsea/choieastsea.github.io"}}}}},"pageContext":{"slug":"/mac-setup-openmp/","nextSlug":"/CDS01-array-2/","prevSlug":"/deploy-1-basic/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}